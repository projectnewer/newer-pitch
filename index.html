<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newer | The New Construction Marketplace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <!-- Confetti Library for UX Delight -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /* Custom Scrollbar for Dashboard */
        .dashboard-scroll::-webkit-scrollbar { width: 6px; }
        .dashboard-scroll::-webkit-scrollbar-track { background: #1c1917; }
        .dashboard-scroll::-webkit-scrollbar-thumb { background: #44403c; border-radius: 4px; }
        .dashboard-scroll::-webkit-scrollbar-thumb:hover { background: #57534e; }

        /* Responsive Phone Frame Styling */
        .phone-frame {
            background-color: #fff;
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 600px;
            border-radius: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 8px solid #1c1917;
        }
        
        @media (min-width: 1024px) {
            .phone-frame {
                border: 12px solid #1c1917;
                border-radius: 3rem;
                width: 340px;
                height: 700px;
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            }
            .phone-notch { display: block; }
        }

        .phone-notch {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 40%; height: 24px; background-color: #1c1917;
            border-bottom-left-radius: 14px; border-bottom-right-radius: 14px; z-index: 20;
        }

        /* Custom Range Slider */
        input[type=range] {
            -webkit-appearance: none; width: 100%; background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #1c1917; cursor: pointer; margin-top: -6px; box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; cursor: pointer; background: #e7e5e4; border-radius: 2px;
        }
        input[type=range]:focus::-webkit-slider-runnable-track { background: #d6d3d1; }

        /* Animations */
        .fade-in { animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .pulse-ring { animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite; }
        @keyframes pulse-ring { 0% { transform: scale(0.33); opacity: 1; } 80%, 100% { transform: scale(1); opacity: 0; } }

        /* Guided Action Pulse (UX Improvement) */
        .action-pulse { animation: softPulse 2s infinite; }
        @keyframes softPulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        .toast-enter { animation: toastSlideDown 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes toastSlideDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .feed-item-enter { animation: slideInRight 0.4s ease-out forwards; }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Marquee Animation for Live Ticker */
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .animate-marquee { animation: marquee 60s linear infinite; }

        .chart-container { position: relative; width: 100%; max-width: 600px; margin: 0 auto; height: 300px; max-height: 400px; }
        
        /* FAQ & Role Toggle */
        .faq-answer { transition: max-height 0.3s ease-out, opacity 0.3s ease-out; max-height: 0; overflow: hidden; opacity: 0; }
        .faq-answer.open { max-height: 200px; opacity: 1; }
        .faq-icon { transition: transform 0.3s ease; }
        .faq-icon.rotate { transform: rotate(180deg); }

        .role-btn { transition: all 0.2s ease; }
        .role-btn.active { background-color: #1c1917; color: white !important; border-color: #1c1917; }
        .role-btn.active:hover { background-color: #0c0a09; color: white !important; }
        .role-btn:not(.active):hover { background-color: #e7e5e4; color: #1c1917; }
        
        /* AI Gradient Styling */
        .ai-text-gradient {
            background: linear-gradient(to right, #4f46e5, #9333ea, #db2777);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .ai-btn {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
            color: white;
            border: none;
        }
        .ai-btn:hover { background: linear-gradient(to right, #4338ca, #6d28d9); }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 font-sans antialiased pb-16 lg:pb-0 selection:bg-blue-100 selection:text-blue-900">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-stone-200 shadow-sm transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- SIMPLIFIED LOGO WITH COLORED DOT -->
                <a href="#" class="flex items-center gap-0.5 transition-opacity hover:opacity-80 group" onclick="setAudience('buyer')">
                    <span class="text-2xl font-black tracking-tighter text-stone-900">Newer</span>
                    <span class="w-2 h-2 bg-blue-600 rounded-full mt-2.5 group-hover:animate-pulse"></span>
                </a>
                
                <div class="hidden md:flex bg-stone-100 rounded-full p-1 border border-stone-200">
                    <button onclick="setAudience('buyer')" class="role-btn active px-5 py-1.5 rounded-full text-sm font-semibold text-stone-500">For Buyers</button>
                    <button onclick="setAudience('builder')" class="role-btn px-5 py-1.5 rounded-full text-sm font-semibold text-stone-500">For Builders</button>
                    <button onclick="setAudience('investor')" class="role-btn px-5 py-1.5 rounded-full text-sm font-semibold text-stone-500">Investors</button>
                </div>

                <button onclick="openWaitlistModal()" class="bg-stone-900 text-white px-5 py-2 rounded-full text-sm font-bold hover:bg-stone-800 transition-colors active:scale-95 transform duration-100 shadow-lg shadow-stone-900/10">
                    Join Waitlist
                </button>
            </div>
            <!-- Mobile Role Switcher -->
            <div class="md:hidden flex justify-center py-3 space-x-2 border-t border-stone-100">
                <button onclick="setAudience('buyer')" class="role-btn active text-xs px-4 py-1.5 rounded-full border border-stone-200 font-bold">Buyers</button>
                <button onclick="setAudience('builder')" class="role-btn text-xs px-4 py-1.5 rounded-full border border-stone-200 font-bold">Builders</button>
                <button onclick="setAudience('investor')" class="role-btn text-xs px-4 py-1.5 rounded-full border border-stone-200 font-bold">Investors</button>
            </div>
        </div>
    </nav>

    <!-- LIVE MARKET TICKER -->
    <div class="w-full bg-stone-900 text-stone-400 overflow-hidden border-b border-stone-800 z-40 relative h-9 flex items-center">
        <div class="flex whitespace-nowrap overflow-hidden absolute w-full">
            <div class="animate-marquee inline-block">
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-green-400">●</span> New Match: 4bd in Austin ($550k)</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-blue-400">●</span> Pitch Accepted: Denver ($720k)</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-yellow-400">●</span> Demand Spike: 3-Car Garages (78704)</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-green-400">●</span> Joined: Pulte Homes</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-purple-400">●</span> Match: 3bd in Dallas ($420k)</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-blue-400">●</span> Offer: Custom Lot Phoenix</span>
                <span class="text-stone-700">|</span>
                <!-- Duplicated content -->
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-green-400">●</span> New Match: 4bd in Austin ($550k)</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-blue-400">●</span> Pitch Accepted: Denver ($720k)</span>
                <span class="text-stone-700">|</span>
                <span class="mx-8 text-xs font-mono tracking-wide"><span class="text-yellow-400">●</span> Demand Spike: 3-Car Garages (78704)</span>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="relative pt-16 pb-20 md:pt-24 md:pb-32 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div id="hero-badge" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-50 border border-blue-100 text-blue-700 text-[10px] md:text-xs font-bold uppercase tracking-wide mb-8">
                <span class="w-1.5 h-1.5 rounded-full bg-blue-600 animate-pulse"></span> The Reverse Market
            </div>
            <h1 id="hero-title" class="text-4xl md:text-6xl lg:text-7xl font-extrabold text-stone-900 tracking-tight mb-6 leading-tight min-h-[2.4em]">
                Don't Search for a Home.<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-teal-500">Let New Homes Find You.</span>
            </h1>
            <p id="hero-desc" class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-stone-500 min-h-[3em] leading-relaxed">
                Stop chasing leftovers. Post your "Dream Home" and let top builders pitch you with <strong>off-market deals</strong> and <strong>custom builds</strong>.
            </p>
            <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
                <a href="#demo" id="hero-cta-btn" class="px-8 py-4 bg-stone-900 text-white rounded-xl font-bold shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-200">Build My Dream Profile</a>
                <a href="#concept" class="px-8 py-4 bg-white text-stone-900 border border-stone-200 rounded-xl font-bold shadow-sm hover:bg-stone-50 transition-all duration-200">How It Works</a>
            </div>
        </div>
        
        <!-- Background Elements -->
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full -z-10 pointer-events-none">
            <div class="absolute top-[-10%] left-[-10%] w-[60%] h-[60%] bg-blue-100/40 rounded-full blur-[100px]"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-teal-100/40 rounded-full blur-[100px]"></div>
        </div>
    </section>

    <!-- Concept Section -->
    <section id="concept" class="py-16 md:py-24 bg-white border-y border-stone-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 id="concept-title" class="text-3xl font-bold text-stone-900">The Power Shift</h2>
                <p id="concept-desc" class="mt-4 text-stone-500 max-w-2xl mx-auto">
                    The traditional market makes you beg for a viewing.<br><span class="font-semibold text-stone-700">Newer turns you into the Client, and builders into the Service Providers.</span>
                </p>
            </div>
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="p-8 rounded-3xl bg-stone-50 border border-stone-100 relative group hover:shadow-lg transition-all duration-300">
                    <div class="absolute -top-3 left-8 bg-red-100 text-red-600 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide">The Old Way</div>
                    <h3 class="text-xl font-bold text-stone-800 mb-4 flex items-center gap-2"><i class="fas fa-search text-stone-400"></i> Active Buyer, Passive Seller</h3>
                    <ul id="concept-old-list" class="space-y-4 text-stone-600 text-sm"></ul>
                </div>
                <div class="p-8 rounded-3xl bg-gradient-to-br from-blue-50 to-white border border-blue-100 shadow-xl relative group hover:shadow-2xl hover:scale-[1.02] transition-all duration-300">
                    <div class="absolute -top-3 left-8 bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide">The Newer Way</div>
                    <h3 class="text-xl font-bold text-stone-800 mb-4 flex items-center gap-2"><i class="fas fa-handshake text-blue-500"></i> Passive Buyer, Active Seller</h3>
                    <ul id="concept-new-list" class="space-y-4 text-stone-700 text-sm"></ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo Section -->
    <section id="demo" class="py-16 md:py-24 bg-stone-100 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12">
                <h2 id="demo-title" class="text-3xl font-bold text-stone-900">Your Personal Market</h2>
                <p id="demo-desc" class="mt-4 text-stone-600 max-w-3xl">Interact with the <strong>Buyer App</strong> (Phase A) to create demand. Watch the <strong>Builder Dashboard</strong> (Phase B) react.</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-8 lg:h-[800px]">
                <!-- LEFT COLUMN: Buyer App Simulation -->
                <div class="lg:col-span-4 flex flex-col items-center lg:items-end">
                    <div class="mb-4 text-center lg:text-right w-full">
                        <span class="text-xs font-bold uppercase text-stone-400 tracking-wider">Phase A: The Buyer</span>
                        <h3 class="text-xl font-bold text-stone-800">The Asset</h3>
                        <p class="text-sm text-stone-500">Building the "Dream Home Profile"</p>
                    </div>
                    
                    <div class="phone-frame flex flex-col shadow-2xl relative">
                        <div class="phone-notch"></div>
                        <div id="phone-notifications" class="absolute top-12 left-0 right-0 px-3 z-50 pointer-events-none flex flex-col items-center space-y-2"></div>
                        <!-- LOGO WITH DOT IN PHONE DEMO -->
                        <div class="h-16 bg-white border-b border-stone-100 flex items-center justify-between px-6 pt-6 relative z-10 shrink-0">
                            <div class="flex items-center gap-0.5">
                                <span class="text-2xl font-black tracking-tighter text-stone-900">Newer</span>
                                <span class="w-2 h-2 bg-blue-600 rounded-full mt-2.5"></span>
                            </div>
                            <div class="w-8 h-8 rounded-full bg-stone-100 flex items-center justify-center"><i class="fas fa-user text-stone-400 text-xs"></i></div>
                        </div>
                        <div id="buyer-screen-container" class="flex-1 p-6 overflow-y-auto bg-stone-50 relative">
                            
                            <!-- Step 1: Vibe Check -->
                            <div id="step-1" class="step-content fade-in">
                                <h3 class="text-xl font-bold mb-1">Set the mood.</h3>
                                <p class="text-xs text-stone-500 mb-6">Which style feels like home?</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <button onclick="selectStyle('Modern Farmhouse')" class="style-btn group p-3 bg-white rounded-xl border border-stone-200 hover:border-blue-500 hover:shadow-md transition-all text-left">
                                        <div class="h-16 bg-stone-100 rounded-lg mb-2 flex items-center justify-center group-hover:bg-blue-100 transition-colors"><i class="fas fa-warehouse text-2xl text-stone-400 group-hover:text-blue-500"></i></div>
                                        <span class="text-[10px] font-bold block text-stone-600 group-hover:text-blue-600">Modern Farmhouse</span>
                                    </button>
                                    <button onclick="selectStyle('Contemporary')" class="style-btn group p-3 bg-white rounded-xl border border-stone-200 hover:border-blue-500 hover:shadow-md transition-all text-left">
                                        <div class="h-16 bg-stone-100 rounded-lg mb-2 flex items-center justify-center group-hover:bg-blue-100 transition-colors"><i class="fas fa-cube text-2xl text-stone-400 group-hover:text-blue-500"></i></div>
                                        <span class="text-[10px] font-bold block text-stone-600 group-hover:text-blue-600">Contemporary</span>
                                    </button>
                                    <button onclick="selectStyle('Traditional')" class="style-btn group p-3 bg-white rounded-xl border border-stone-200 hover:border-blue-500 hover:shadow-md transition-all text-left">
                                        <div class="h-16 bg-stone-100 rounded-lg mb-2 flex items-center justify-center group-hover:bg-blue-100 transition-colors"><i class="fas fa-landmark text-2xl text-stone-400 group-hover:text-blue-500"></i></div>
                                        <span class="text-[10px] font-bold block text-stone-600 group-hover:text-blue-600">Traditional</span>
                                    </button>
                                    <button onclick="selectStyle('Mediterranean')" class="style-btn group p-3 bg-white rounded-xl border border-stone-200 hover:border-blue-500 hover:shadow-md transition-all text-left">
                                        <div class="h-16 bg-stone-100 rounded-lg mb-2 flex items-center justify-center group-hover:bg-blue-100 transition-colors"><i class="fas fa-sun text-2xl text-stone-400 group-hover:text-blue-500"></i></div>
                                        <span class="text-[10px] font-bold block text-stone-600 group-hover:text-blue-600">Mediterranean</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Step 2: Crew & Amenities -->
                            <div id="step-2" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold mb-1">The Basics.</h3>
                                <p class="text-xs text-stone-500 mb-6">Define your space needs.</p>
                                <div class="space-y-6">
                                    <div>
                                        <label class="text-[10px] font-bold uppercase text-stone-400">Persona</label>
                                        <div class="flex gap-2 mt-2">
                                            <button onclick="setPersona('Family')" class="persona-btn flex-1 py-2 bg-white border border-stone-200 rounded-lg text-xs font-bold hover:border-stone-900 transition-colors text-stone-600">Growing Family</button>
                                            <button onclick="setPersona('Couple')" class="persona-btn flex-1 py-2 bg-white border border-stone-200 rounded-lg text-xs font-bold hover:border-stone-900 transition-colors text-stone-600">Pro Couple</button>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label class="text-[10px] font-bold uppercase text-stone-400">Bedrooms</label>
                                            <span id="bed-val" class="text-xs font-bold text-blue-600">3</span>
                                        </div>
                                        <input type="range" min="2" max="6" value="3" class="w-full" oninput="updateRange('bed', this.value)">
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label class="text-[10px] font-bold uppercase text-stone-400">Max Budget</label>
                                            <span id="budget-val" class="text-xs font-bold text-blue-600">$500k</span>
                                        </div>
                                        <input type="range" min="300" max="1500" step="50" value="500" class="w-full" oninput="updateRange('budget', this.value)">
                                    </div>
                                    <button onclick="nextStep('amenities')" class="w-full py-3 bg-stone-900 text-white rounded-xl font-bold text-sm shadow-lg shadow-stone-900/20 action-pulse hover:animate-none hover:bg-stone-800 transition-all">Next Step</button>
                                </div>
                            </div>

                            <!-- Amenities Step -->
                            <div id="step-amenities" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold mb-1">Non-Negotiables.</h3>
                                <p class="text-xs text-stone-500 mb-6">Select top 3 features.</p>
                                <div class="grid grid-cols-2 gap-3 mb-6">
                                    <button onclick="toggleAmenity(this, 'Office')" class="amenity-btn p-3 rounded-xl border border-stone-200 bg-white text-stone-600 hover:border-blue-500 hover:text-blue-600 transition-all flex flex-col items-center gap-2 group">
                                        <i class="fas fa-laptop-house text-lg text-stone-400 group-hover:text-blue-500"></i><span class="text-[10px] font-bold">Home Office</span>
                                    </button>
                                    <button onclick="toggleAmenity(this, '3-Car Garage')" class="amenity-btn p-3 rounded-xl border border-stone-200 bg-white text-stone-600 hover:border-blue-500 hover:text-blue-600 transition-all flex flex-col items-center gap-2 group">
                                        <i class="fas fa-car text-lg text-stone-400 group-hover:text-blue-500"></i><span class="text-[10px] font-bold">3-Car Garage</span>
                                    </button>
                                    <button onclick="toggleAmenity(this, 'Master Down')" class="amenity-btn p-3 rounded-xl border border-stone-200 bg-white text-stone-600 hover:border-blue-500 hover:text-blue-600 transition-all flex flex-col items-center gap-2 group">
                                        <i class="fas fa-bed text-lg text-stone-400 group-hover:text-blue-500"></i><span class="text-[10px] font-bold">Master Down</span>
                                    </button>
                                    <button onclick="toggleAmenity(this, 'Pool Ready')" class="amenity-btn p-3 rounded-xl border border-stone-200 bg-white text-stone-600 hover:border-blue-500 hover:text-blue-600 transition-all flex flex-col items-center gap-2 group">
                                        <i class="fas fa-swimming-pool text-lg text-stone-400 group-hover:text-blue-500"></i><span class="text-[10px] font-bold">Pool Ready</span>
                                    </button>
                                </div>
                                <button onclick="nextStep('3')" class="w-full py-3 bg-stone-900 text-white rounded-xl font-bold text-sm hover:bg-stone-800 transition-all">Review & Verify</button>
                            </div>

                            <!-- Step 3: Verification -->
                            <div id="step-3" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold mb-1">Unlock Offers</h3>
                                <p class="text-xs text-stone-500 mb-6">Builders prioritize verified buyers.</p>
                                <button onclick="verifyUser(event)" class="w-full py-3 bg-white border-2 border-stone-100 rounded-xl font-bold text-sm flex items-center justify-center gap-3 hover:border-green-500 hover:text-green-600 hover:bg-green-50 transition-all group mb-3 text-stone-600">
                                    <i class="fas fa-university text-stone-300 group-hover:text-green-500"></i> Connect Bank (Plaid)
                                </button>
                                <button onclick="verifyUser(event)" class="w-full py-3 bg-white border-2 border-stone-100 rounded-xl font-bold text-sm flex items-center justify-center gap-3 hover:border-green-500 hover:text-green-600 hover:bg-green-50 transition-all group text-stone-600">
                                    <i class="fas fa-file-upload text-stone-300 group-hover:text-green-500"></i> Upload Approval
                                </button>
                            </div>

                            <!-- Step 4: Complete -->
                            <div id="step-4" class="step-content hidden fade-in text-center pt-8">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce"><i class="fas fa-check text-2xl text-green-600"></i></div>
                                <h3 class="text-xl font-bold mb-1">You are Live!</h3>
                                <p class="text-xs text-stone-500 mb-6">Alias: <span class="bg-stone-100 py-0.5 px-2 rounded font-mono font-bold text-stone-700">Buyer #8942</span></p>
                                
                                <!-- AI Feature: Buyer Bio -->
                                <div class="mt-4 mb-6">
                                    <div id="ai-bio-container" class="hidden p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-indigo-100 rounded-xl text-left mb-3">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-base">✨</span>
                                            <span class="text-[10px] font-bold uppercase text-indigo-600 tracking-wider">AI Generated Bio</span>
                                        </div>
                                        <p id="ai-bio-text" class="text-xs text-stone-700 italic leading-relaxed"></p>
                                    </div>
                                    <button onclick="generateBuyerBio()" id="btn-generate-bio" class="w-full py-2.5 bg-white border border-indigo-200 text-indigo-600 font-bold rounded-lg text-xs hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2 shadow-sm">
                                        <span>✨</span> Enhance Profile with AI
                                    </button>
                                </div>

                                <button onclick="resetDemo()" class="mt-2 text-xs text-stone-400 hover:text-stone-600 underline">Start Over</button>
                            </div>
                        </div>
                        <div class="h-14 bg-white border-t border-stone-100 flex justify-around items-center text-stone-300 shrink-0">
                            <i class="fas fa-home text-stone-900"></i><i class="fas fa-heart"></i><i class="fas fa-comment"></i><i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>

                <!-- RIGHT COLUMN: Builder Dashboard -->
                <div class="lg:col-span-8 flex flex-col h-[600px] lg:h-[700px]">
                    <div class="mb-4 text-center lg:text-left pl-4">
                        <span class="text-xs font-bold uppercase text-stone-400 tracking-wider">Phase B: The Builder</span>
                        <h3 class="text-xl font-bold text-stone-800">The Bidder</h3>
                        <p class="text-sm text-stone-500">Monitoring "Live Demand" & Pitching Inventory</p>
                    </div>
                    <!-- Dashboard Header -->
                    <div class="bg-stone-900 text-white p-4 rounded-t-2xl flex justify-between items-center shadow-lg z-10">
                        <div class="flex items-center gap-3">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            <span class="ml-2 font-mono font-bold text-sm tracking-wider text-stone-300 hidden md:inline">BUILDER_TERMINAL_V1</span>
                            <span class="ml-2 px-2 py-0.5 bg-green-900 text-green-400 text-[10px] rounded border border-green-700 animate-pulse">LIVE</span>
                        </div>
                        <div class="flex bg-stone-800 rounded-lg p-1 border border-stone-700">
                            <button onclick="toggleDashboardView('list')" id="view-list-btn" class="px-3 py-1 rounded text-xs font-bold bg-stone-600 text-white transition-all">Feed</button>
                            <button onclick="toggleDashboardView('map')" id="view-map-btn" class="px-3 py-1 rounded text-xs font-bold text-stone-400 hover:text-white transition-all">Map</button>
                            <button onclick="toggleDashboardView('intel')" id="view-intel-btn" class="px-3 py-1 rounded text-xs font-bold text-stone-400 hover:text-white transition-all">Intel</button>
                        </div>
                    </div>
                    <!-- Dashboard Body -->
                    <div class="bg-stone-800 flex-1 rounded-b-2xl border-x border-b border-stone-700 shadow-2xl relative overflow-hidden flex flex-col">
                        <div class="grid grid-cols-4 gap-px bg-stone-700 border-b border-stone-700">
                            <div class="bg-stone-800 p-3"><div class="text-[10px] text-stone-500 uppercase font-bold">Active Demand</div><div class="text-white font-mono text-base md:text-lg font-bold" id="stat-active">1,248</div></div>
                            <div class="bg-stone-800 p-3"><div class="text-[10px] text-stone-500 uppercase font-bold">Avg Budget</div><div class="text-white font-mono text-base md:text-lg font-bold" id="stat-budget">$485k</div></div>
                            <div class="bg-stone-800 p-3"><div class="text-[10px] text-stone-500 uppercase font-bold">Your Credits</div><div class="text-yellow-400 font-mono text-base md:text-lg font-bold" id="stat-credits">500</div></div>
                            <div class="bg-stone-800 p-3"><div class="text-[10px] text-stone-500 uppercase font-bold">Conv. Rate</div><div class="text-green-400 font-mono text-base md:text-lg font-bold">18.4%</div></div>
                        </div>
                        
                        <!-- LIST VIEW CONTAINER -->
                        <div id="dashboard-list-view" class="flex-1 min-h-0 bg-stone-900/50 flex flex-col relative transition-opacity duration-300">
                            <div class="flex justify-between items-center p-2 bg-stone-900/80 border-b border-stone-700 text-[10px] uppercase text-stone-500 font-bold tracking-wider px-4">
                                <span>Incoming Stream</span>
                                <span>Updates <span class="w-1.5 h-1.5 rounded-full bg-green-500 inline-block ml-1 animate-pulse"></span></span>
                            </div>
                            <div id="dashboard-feed" class="flex-1 overflow-y-auto dashboard-scroll p-2 space-y-2 relative"></div>
                        </div>
                        
                        <!-- MAP VIEW CONTAINER -->
                        <div id="dashboard-map-view" class="flex-1 min-h-0 relative bg-stone-900 overflow-hidden hidden transition-opacity duration-300">
                            <canvas id="demandMap" class="w-full h-full object-cover opacity-80"></canvas>
                            <div class="absolute bottom-4 right-4 bg-black/70 px-3 py-2 rounded text-xs text-white backdrop-blur">
                                <span class="w-2 h-2 rounded-full bg-red-500 inline-block mr-1"></span> High Demand
                                <span class="w-2 h-2 rounded-full bg-blue-500 inline-block ml-2 mr-1"></span> Your Lots
                            </div>
                        </div>

                        <!-- INTEL VIEW -->
                        <div id="dashboard-intel-view" class="flex-1 min-h-0 bg-stone-800 overflow-y-auto hidden p-6 transition-opacity duration-300">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 h-full">
                                <div class="bg-stone-900/50 p-4 rounded-xl border border-stone-700">
                                    <h4 class="text-xs font-bold text-stone-400 uppercase mb-4">Live Feature Demand</h4>
                                    <div class="space-y-4">
                                        <div><div class="flex justify-between text-xs text-stone-400 mb-1"><span>Home Office</span><span class="text-green-400">42% <i class="fas fa-arrow-up"></i></span></div><div class="h-1.5 bg-stone-700 rounded-full"><div class="h-full bg-blue-500 rounded-full" style="width: 42%"></div></div></div>
                                        <div><div class="flex justify-between text-xs text-stone-400 mb-1"><span>3-Car Garage</span><span class="text-stone-400">28%</span></div><div class="h-1.5 bg-stone-700 rounded-full"><div class="h-full bg-purple-500 rounded-full" style="width: 28%"></div></div></div>
                                        <div><div class="flex justify-between text-xs text-stone-400 mb-1"><span>Pool Ready</span><span class="text-red-400">15% <i class="fas fa-arrow-down"></i></span></div><div class="h-1.5 bg-stone-700 rounded-full"><div class="h-full bg-teal-500 rounded-full" style="width: 15%"></div></div></div>
                                    </div>
                                    <div class="mt-6 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <div class="text-blue-400 text-[10px] font-bold uppercase"><i class="fas fa-robot mr-1"></i> AI Insight</div>
                                            <button onclick="generateMarketIntel()" id="btn-ai-intel" class="text-[10px] text-white bg-blue-600 px-2 py-1 rounded hover:bg-blue-500 transition-colors">Analyze</button>
                                        </div>
                                        <p id="ai-intel-text" class="text-stone-400 text-xs leading-relaxed">Click Analyze to generate report.</p>
                                    </div>
                                </div>
                                <div class="bg-stone-900/50 p-4 rounded-xl border border-stone-700">
                                    <h4 class="text-xs font-bold text-stone-400 uppercase mb-4">Budget Trend (90 Days)</h4>
                                    <div class="chart-container h-48 w-full"><canvas id="intelChart"></canvas></div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Visualizer -->
                        <div id="user-card-overlay" class="absolute bottom-0 left-0 right-0 bg-stone-900/95 border-t border-blue-500 p-5 transform translate-y-full transition-transform duration-500 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] z-20 backdrop-blur-sm">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <div class="flex items-center gap-2 mb-1"><span class="text-[10px] font-bold text-blue-400 uppercase tracking-wider">New High-Intent Match</span><span class="w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"></span></div>
                                    <h4 class="text-white font-bold text-xl">Verified Buyer #8942</h4>
                                </div>
                                <div class="text-right"><div class="text-2xl font-bold text-green-400" id="dash-card-budget">$500k</div><div class="text-[10px] text-stone-500 uppercase">Pre-Approved</div></div>
                            </div>
                            <div class="grid grid-cols-3 gap-3 mb-4">
                                <div class="bg-stone-800 p-2 rounded border border-stone-700"><div class="text-[10px] text-stone-500 uppercase">Style</div><div class="text-sm text-white font-medium" id="dash-card-style">Modern</div></div>
                                <div class="bg-stone-800 p-2 rounded border border-stone-700"><div class="text-[10px] text-stone-500 uppercase">Size</div><div class="text-sm text-white font-medium" id="dash-card-config">3bd / 2ba</div></div>
                                <div class="bg-stone-800 p-2 rounded border border-stone-700"><div class="text-[10px] text-stone-500 uppercase">Must Have</div><div class="text-sm text-white font-medium truncate" id="dash-card-amenities">...</div></div>
                            </div>
                            <div id="unlock-area"><button onclick="unlockLead()" id="btn-unlock" class="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg shadow-lg text-sm transition-all flex items-center justify-center gap-2"><i class="fas fa-lock-open"></i> UNLOCK CONTACT DETAILS (50 Credits)</button></div>
                        </div>

                        <!-- Pitch Modal -->
                        <div id="pitch-modal" class="absolute inset-0 bg-black/80 z-30 hidden flex items-center justify-center p-4 backdrop-blur-sm">
                            <div class="bg-stone-800 border border-stone-600 rounded-xl p-5 w-full max-w-sm shadow-2xl">
                                <h4 class="text-white font-bold mb-1">Pitch Buyer <span id="pitch-target-id" class="text-blue-400 font-mono">#0000</span></h4>
                                <p class="text-xs text-stone-400 mb-4">Select inventory type to offer.</p>
                                
                                <div class="mb-4 relative">
                                    <textarea id="pitch-message" class="w-full bg-stone-900 border border-stone-600 text-white text-xs rounded-lg p-3 focus:border-blue-500 outline-none h-20 resize-none leading-relaxed" placeholder="Drafting pitch..."></textarea>
                                    <button onclick="generateBuilderPitch()" id="btn-ai-pitch" class="absolute bottom-2 right-2 text-[10px] bg-indigo-600 hover:bg-indigo-500 text-white px-2 py-1 rounded flex items-center gap-1 transition-colors font-bold"><span>✨</span> AI Draft</button>
                                </div>

                                <div class="space-y-2 mb-4">
                                    <button onclick="selectPitch(this, 'Spec')" class="pitch-opt w-full text-left p-3 rounded-lg bg-stone-700 border border-stone-600 hover:border-blue-500 hover:bg-stone-600 transition-all text-xs text-stone-300 group">
                                        <div class="flex justify-between mb-1"><span class="font-bold text-white group-hover:text-blue-400"><i class="fas fa-home mr-2"></i> Inventory Home</span><span class="text-green-400">Quick Close</span></div>
                                    </button>
                                    <button onclick="selectPitch(this, 'Dirt')" class="pitch-opt w-full text-left p-3 rounded-lg bg-stone-700 border border-stone-600 hover:border-blue-500 hover:bg-stone-600 transition-all text-xs text-stone-300 group">
                                        <div class="flex justify-between mb-1"><span class="font-bold text-white group-hover:text-blue-400"><i class="fas fa-layer-group mr-2"></i> Custom Build</span><span class="text-blue-400">High Margin</span></div>
                                    </button>
                                </div>
                                <div class="flex gap-3">
                                    <button onclick="document.getElementById('pitch-modal').classList.add('hidden')" class="flex-1 py-2.5 bg-stone-700 hover:bg-stone-600 text-stone-300 rounded-lg text-xs font-bold">Cancel</button>
                                    <button onclick="sendPitch()" class="flex-1 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-xs font-bold">Send Pitch</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Social Proof -->
    <section id="testimonials" class="py-16 md:py-24 bg-white border-y border-stone-100" data-audience="buyer,builder,investor"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="text-center mb-16"><h2 id="testimonial-title" class="text-3xl font-bold text-stone-900">Success Stories</h2><p id="testimonial-desc" class="mt-4 text-stone-500">Real results from the people changing how homes are bought and sold.</p></div><div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"><div class="bg-stone-50 p-8 rounded-2xl border border-stone-100 relative" data-audience="buyer,investor"><div class="absolute -top-4 right-8 bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-bold uppercase">New Buyer</div><div class="flex items-center gap-4 mb-6"><div class="w-12 h-12 bg-stone-300 rounded-full overflow-hidden flex items-center justify-center text-xl text-stone-500"><i class="fas fa-user"></i></div><div><h4 class="font-bold text-stone-900">Sarah & Mark T.</h4><p class="text-xs text-stone-500">Relocating to Austin, TX</p></div></div><p class="text-stone-600 italic">"We spent 3 months driving around looking at 'Sold' signs. On Newer, we posted our budget and got a pitch for a lot that wasn't even listed yet."</p></div><div class="bg-stone-50 p-8 rounded-2xl border border-stone-100 relative" data-audience="buyer,investor"><div class="absolute -top-4 right-8 bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-bold uppercase">First-Time Buyer</div><div class="flex items-center gap-4 mb-6"><div class="w-12 h-12 bg-stone-300 rounded-full overflow-hidden flex items-center justify-center text-xl text-stone-500"><i class="fas fa-user-graduate"></i></div><div><h4 class="font-bold text-stone-900">Jason L.</h4><p class="text-xs text-stone-500">Denver, CO</p></div></div><p class="text-stone-600 italic">"I thought I was priced out. A builder saw my 'Verify' badge and offered me a pre-construction deal on a townhome if I could close quickly."</p></div><div class="bg-stone-900 p-8 rounded-2xl border border-stone-700 relative" data-audience="builder,investor"><div class="absolute -top-4 right-8 bg-green-900 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase">Production Builder</div><div class="flex items-center gap-4 mb-6"><div class="w-12 h-12 bg-stone-700 rounded-full overflow-hidden flex items-center justify-center text-xl text-stone-400"><i class="fas fa-hard-hat"></i></div><div><h4 class="font-bold text-white">James R.</h4><p class="text-xs text-stone-400">VP Sales, Regional Builder</p></div></div><p class="text-stone-300 italic">"I searched Newer for buyers with a $550k budget in that zip code, found 3 matches, and pitched them. Sold it that weekend with zero marketing spend."</p></div><div class="bg-stone-900 p-8 rounded-2xl border border-stone-700 relative" data-audience="builder,investor"><div class="absolute -top-4 right-8 bg-green-900 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase">Custom Builder</div><div class="flex items-center gap-4 mb-6"><div class="w-12 h-12 bg-stone-700 rounded-full overflow-hidden flex items-center justify-center text-xl text-stone-400"><i class="fas fa-drafting-compass"></i></div><div><h4 class="font-bold text-white">Elena V.</h4><p class="text-xs text-stone-400">Owner, Boutique Homes</p></div></div><p class="text-stone-300 italic">"The 'Lead Unlock' feature alone saved us $20k in ad spend. We connect with clients who already want a custom build in our territory."</p></div><div class="bg-purple-50 p-8 rounded-2xl border border-purple-100 relative" data-audience="investor"><div class="absolute -top-4 right-8 bg-purple-200 text-purple-700 px-3 py-1 rounded-full text-xs font-bold uppercase">The Investor</div><div class="flex items-center gap-4 mb-6"><div class="w-12 h-12 bg-purple-200 rounded-full overflow-hidden flex items-center justify-center text-xl text-purple-600"><i class="fas fa-chart-line"></i></div><div><h4 class="font-bold text-purple-900">Marcus T.</h4><p class="text-xs text-purple-600">Partner, PropTech VC</p></div></div><p class="text-purple-800 italic">"By inverting the model, Newer solves the liquidity crisis in new construction. It's not just lead gen; it's a market maker."</p></div></div></div></section>
    
    <section id="moat" class="py-16 md:py-24 bg-stone-50" data-audience="builder,investor"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="grid md:grid-cols-2 gap-16 items-center"><div><div class="inline-block px-3 py-1 bg-stone-200 text-stone-600 text-xs font-bold uppercase rounded mb-4">The Trust Layer</div><h2 class="text-3xl font-bold text-stone-900 mb-6">Why Builders Pay for "Unlocks"</h2><p class="text-lg text-stone-600 mb-6">The biggest pain point for builders is "Tire Kickers"—people who tour homes but can't afford them.</p><p class="text-lg text-stone-600 mb-8">Newer solves this with the <strong>Verification Moat</strong>. We integrate with banking APIs (Plaid) and lenders to verify financial capacity <em>before</em> the builder sees the profile.</p><div class="space-y-4"><div class="flex items-center gap-4 p-4 bg-white rounded-lg border border-stone-200"><div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600"><i class="fas fa-check"></i></div><div><h4 class="font-bold text-stone-900">Verified Funds</h4><p class="text-sm text-stone-500">Cash on hand or Pre-approval letter validated.</p></div></div><div class="flex items-center gap-4 p-4 bg-white rounded-lg border border-stone-200"><div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600"><i class="fas fa-user-secret"></i></div><div><h4 class="font-bold text-stone-900">Buyer Anonymity</h4><p class="text-sm text-stone-500">Builders bid on the <em>budget</em>, not the person. No bias.</p></div></div></div></div><div class="bg-white p-8 rounded-2xl border border-stone-200 shadow-lg"><h3 class="text-sm font-bold text-stone-400 uppercase mb-4 text-center">Conversion Funnel Comparison</h3><div class="space-y-6"><div><div class="flex justify-between text-sm mb-1"><span class="text-stone-500">Industry Avg (Zillow/MLS)</span><span class="font-bold text-stone-700">1-2% Conversion</span></div><div class="h-4 bg-stone-200 rounded-full overflow-hidden"><div class="h-full bg-stone-400 w-[2%]"></div></div></div><div><div class="flex justify-between text-sm mb-1"><span class="text-blue-600 font-bold">Newer Verified</span><span class="font-bold text-blue-700">15-20% Conversion</span></div><div class="h-4 bg-blue-100 rounded-full overflow-hidden"><div class="h-full bg-blue-600 w-[20%]"></div></div></div></div><div class="mt-8 pt-8 border-t border-stone-200 text-center"><p class="text-stone-500 text-sm italic">"I'd rather pay $50 for one verified lead than $500 for a billboard." <br><span class="text-stone-800 font-bold not-italic mt-2 block">- VP Sales, National Builder</span></p></div></div></div></div></section>
    
    <section id="revenue" class="py-16 md:py-24 bg-stone-900 text-white" data-audience="builder,investor">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16"><h2 id="revenue-title" class="text-3xl font-bold">Unicorn Unit Economics</h2><p id="revenue-desc" class="mt-4 text-stone-400 max-w-2xl mx-auto">Three revenue streams create a scalable, recurring income model.</p></div>
            <div class="grid lg:grid-cols-3 gap-8"><div class="bg-stone-800 p-8 rounded-2xl border border-stone-700 hover:border-blue-500 transition-colors"><div class="h-12 w-12 bg-stone-700 rounded-xl flex items-center justify-center mb-6 text-blue-400 text-xl"><i class="fas fa-rss"></i></div><h3 class="text-xl font-bold mb-2">1. SaaS Subscription</h3><p class="text-stone-400 text-sm mb-4">Builders pay for access to the "Demand Feed" and market analytics.</p><div class="text-2xl font-mono font-bold text-white">$2k - $10k<span class="text-sm text-stone-500 font-normal">/mo</span></div></div><div class="bg-stone-800 p-8 rounded-2xl border border-stone-700 hover:border-blue-500 transition-colors"><div class="h-12 w-12 bg-stone-700 rounded-xl flex items-center justify-center mb-6 text-blue-400 text-xl"><i class="fas fa-lock-open"></i></div><h3 class="text-xl font-bold mb-2">2. Unlock Fees</h3><p class="text-stone-400 text-sm mb-4">Micro-transactions. Builders pay to unlock the contact info of a matched buyer.</p><div class="text-2xl font-mono font-bold text-white">$50 - $200<span class="text-sm text-stone-500 font-normal">/lead</span></div></div><div class="bg-stone-800 p-8 rounded-2xl border border-stone-700 hover:border-blue-500 transition-colors"><div class="h-12 w-12 bg-stone-700 rounded-xl flex items-center justify-center mb-6 text-blue-400 text-xl"><i class="fas fa-percentage"></i></div><h3 class="text-xl font-bold mb-2">3. Success Fees</h3><p class="text-stone-400 text-sm mb-4">Small take rate on the final transaction value upon closing.</p><div class="text-2xl font-mono font-bold text-white">0.5%<span class="text-sm text-stone-500 font-normal"> of Sale Price</span></div></div></div>
            <div class="mt-16 bg-stone-800 p-6 rounded-2xl border border-stone-700" data-audience="investor">
                <h4 class="text-lg font-bold mb-6 text-center">Projected Revenue Mix (Year 1 - Year 5)</h4>
                <div class="flex justify-center gap-2 mb-6"><button onclick="updateRevenue('conservative')" class="scenario-btn px-4 py-2 rounded-full text-sm font-medium border border-stone-600 hover:bg-stone-700 text-stone-300 transition-colors">Conservative</button><button onclick="updateRevenue('base')" class="scenario-btn px-4 py-2 rounded-full text-sm font-medium bg-blue-600 text-white border border-blue-600 transition-colors">Base Case</button><button onclick="updateRevenue('aggressive')" class="scenario-btn px-4 py-2 rounded-full text-sm font-medium border border-stone-600 hover:bg-stone-700 text-stone-300 transition-colors">Aggressive</button></div>
                <div class="chart-container"><canvas id="revenueChart"></canvas></div>
                <div class="mt-8 border-t border-stone-700 pt-6">
                     <div class="flex justify-between items-center mb-4">
                        <h5 class="text-sm font-bold text-purple-400">INVESTMENT THESIS GENERATOR</h5>
                        <button onclick="generateInvestmentMemo()" id="btn-ai-memo" class="ai-btn px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-lg hover:shadow-purple-500/20 flex items-center gap-2">
                             <span>✨</span> Draft Deal Memo
                        </button>
                     </div>
                     <div id="ai-memo-container" class="hidden bg-stone-900/50 rounded-xl p-4 border border-purple-500/30">
                        <p id="ai-memo-text" class="text-sm text-stone-300 font-mono leading-relaxed"></p>
                     </div>
                </div>
            </div>
        </div>
    </section>
    
    <section id="cta-builder" class="py-16 md:py-24 bg-blue-600" data-audience="builder,investor"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"><h2 class="text-3xl font-bold text-white mb-6">For Builders: The Infinite ROI Engine</h2><div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto mb-10 text-white"><div class="p-4 border border-blue-400 rounded-xl bg-blue-700/30"><div class="text-3xl font-bold mb-1">0</div><div class="text-sm opacity-80">Marketing Spend</div></div><div class="p-4 border border-blue-400 rounded-xl bg-blue-700/30"><div class="text-3xl font-bold mb-1">20x</div><div class="text-sm opacity-80">Higher Conversion</div></div><div class="p-4 border border-blue-400 rounded-xl bg-blue-700/30"><div class="text-3xl font-bold mb-1">100%</div><div class="text-sm opacity-80">Verified Intent</div></div></div><button onclick="openWaitlistModal()" class="bg-white text-blue-600 px-8 py-4 rounded-full font-bold shadow-xl hover:bg-stone-100 hover:scale-105 transition-all">Request Builder Access</button></div></section>
    
    <section class="py-16 md:py-24 bg-stone-50 border-t border-stone-200" data-audience="buyer,builder,investor">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-stone-900 text-center mb-12">Frequently Asked Questions</h2>
            <div class="space-y-4">
                <!-- Buyer FAQs -->
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">Is my data safe with builders?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">Absolutely. Builders only see your <strong>anonymized profile</strong> (e.g., "Buyer #8942"). They only get your name if YOU decide to accept their pitch.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">Does this cost me money?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">No. Newer is 100% free for buyers. Builders pay for the opportunity to pitch you.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">What if I change my mind?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">You are in control. You can pause your profile or decline pitches at any time. There is no obligation to buy.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">Can I use my own realtor?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">Yes! You can add your agent's info to your profile so builders include them in the transaction process.</p>
                    </div>
                </div>

                <!-- Builder FAQs -->
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="builder">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">Do I pay for leads that don't close?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">The "Unlock Fee" is for the introduction to a verified buyer. We don't refund, but our conversion rate is ~15x higher than Zillow leads because intent is pre-verified.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="builder">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">How verification works?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">We require soft-pull proof of funds via Plaid or a valid pre-approval letter uploaded within the last 30 days before a buyer can receive pitches.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="builder">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">What is the typical time-to-contract?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">Because intent is verified upfront, our average time from Pitch Acceptance to Contract is 7 days, versus the industry average of 45+ days.</p>
                    </div>
                </div>

                <!-- Investor FAQs -->
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="investor">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">How do you prevent platform leakage?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">Anonymity is key. Builders can't ID buyers without paying. Success fees are enforced via title company partnerships and lien recording.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="investor">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">What prevents builders from bypassing the fee?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">We use a 'Title Lock' partnership. Our success fee is recorded as a lien released only at closing, automated via API with major title companies.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-stone-200 overflow-hidden" data-audience="investor">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)">
                        <span class="font-bold text-stone-800">Is this just a lead gen agency?</span>
                        <i class="fas fa-chevron-down text-stone-400 faq-icon"></i>
                    </button>
                    <div class="faq-answer px-6 bg-stone-50">
                        <p class="py-4 text-stone-600 text-sm">No. Lead gen is selling contact info once. We are a marketplace that monetizes the transaction AND the data stream, creating a recurring revenue moat.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-stone-900 py-12 text-stone-400">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6">
            <!-- FOOTER LOGO WITH DOT -->
            <div class="flex items-center gap-0.5 group cursor-pointer" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <span class="text-xl font-black tracking-tighter text-white">Newer</span>
                <span class="w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5"></span>
            </div>
            <div class="text-sm">
                &copy; 2025 Newer LLC. All rights reserved.
                <span class="mx-2">•</span>
                <a href="mailto:your-email@example.com" class="hover:text-white transition-colors">Contact Us</a>
            </div>
            <div class="flex gap-4">
                <i class="fab fa-twitter hover:text-white cursor-pointer"></i>
                <i class="fab fa-linkedin hover:text-white cursor-pointer"></i>
                <i class="fab fa-instagram hover:text-white cursor-pointer"></i>
            </div>
        </div>
    </footer>

    <!-- Waitlist Modal -->
    <div id="waitlist-modal" class="fixed inset-0 z-[60] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-stone-900/60 backdrop-blur-sm transition-opacity opacity-0" id="modal-backdrop" onclick="closeWaitlistModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto pointer-events-none">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="pointer-events-auto relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all scale-95 opacity-0 sm:w-full sm:max-w-md" id="modal-panel">
                    <button onclick="closeWaitlistModal()" class="absolute top-4 right-4 text-stone-400 hover:text-stone-600"><i class="fas fa-times text-xl"></i></button>
                    
                    <!-- Form State -->
                    <div id="modal-form-state" class="p-8">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"><i class="fas fa-rocket"></i></div>
                            <h3 class="text-xl font-bold text-stone-900">Get Early Access</h3>
                        </div>
                        <p class="text-sm text-stone-500 mb-6">Join 4,200+ buyers and builders waiting for the launch in your city.</p>
                        <form id="waitlist-form" onsubmit="handleWaitlistSubmit(event)">
                            <div class="space-y-4">
                                <div><label class="block text-xs font-bold uppercase text-stone-500 mb-1">Email</label><input type="email" required class="w-full px-4 py-3 bg-stone-50 border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm" placeholder="you@example.com"></div>
                                <div><label class="block text-xs font-bold uppercase text-stone-500 mb-1">Zip Code</label><input type="text" required class="w-full px-4 py-3 bg-stone-50 border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm" placeholder="e.g. 78704"></div>
                                <div>
                                    <label class="block text-xs font-bold uppercase text-stone-500 mb-2">I am a...</label>
                                    <div class="grid grid-cols-3 gap-2">
                                        <label class="cursor-pointer"><input type="radio" name="role" value="buyer" class="peer sr-only" checked><div class="px-2 py-3 border border-stone-200 rounded-xl text-center text-xs font-bold text-stone-500 peer-checked:bg-stone-900 peer-checked:text-white peer-checked:border-stone-900 hover:bg-stone-50 transition-all">Buyer</div></label>
                                        <label class="cursor-pointer"><input type="radio" name="role" value="builder" class="peer sr-only"><div class="px-2 py-3 border border-stone-200 rounded-xl text-center text-xs font-bold text-stone-500 peer-checked:bg-stone-900 peer-checked:text-white peer-checked:border-stone-900 hover:bg-stone-50 transition-all">Builder</div></label>
                                        <label class="cursor-pointer"><input type="radio" name="role" value="investor" class="peer sr-only"><div class="px-2 py-3 border border-stone-200 rounded-xl text-center text-xs font-bold text-stone-500 peer-checked:bg-stone-900 peer-checked:text-white peer-checked:border-stone-900 hover:bg-stone-50 transition-all">Investor</div></label>
                                    </div>
                                </div>
                                <button type="submit" class="w-full bg-blue-600 text-white rounded-xl py-3 font-bold hover:bg-blue-700 transition-all shadow-lg active:scale-[0.98]">Secure My Spot</button>
                            </div>
                        </form>
                    </div>

                    <!-- Success State -->
                    <div id="modal-success-state" class="hidden p-10 text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-500 text-2xl animate-bounce"><i class="fas fa-check"></i></div>
                        <h3 class="text-2xl font-bold text-stone-900 mb-2">You're on the list!</h3>
                        <p class="text-stone-500 text-sm mb-8">We'll notify you when Newer launches in your chosen zip code.</p>
                        <button type="button" onclick="closeWaitlistModal()" class="inline-flex w-full justify-center rounded-lg bg-stone-100 px-3 py-2 text-sm font-semibold text-stone-900 hover:bg-stone-200 transition-colors">Close</button>
                    </div>
                    <div id="modal-footer" class="bg-stone-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"><p class="text-xs text-stone-400 text-center sm:text-right w-full">We respect your privacy. No spam.</p></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JS Logic -->
    <script>
        // --- State Management ---
        let appState = { style: '', persona: '', bedrooms: 3, budget: 500, amenities: [], verified: false, credits: 500 };
        
        // Data for Map
        const heatMapPoints = Array.from({length: 30}, () => ({ x: Math.random(), y: Math.random(), r: 20 + Math.random() * 40 }));
        const lotPoints = Array.from({length: 5}, () => ({ x: Math.random(), y: Math.random() }));
        
        // DOM Elements
        const audienceElements = document.querySelectorAll('[data-audience]');

        // --- Content Configuration ---
        const contentConfig = {
            buyer: {
                badge: '<span class="w-1.5 h-1.5 rounded-full bg-blue-600 animate-pulse"></span> The Reverse Market',
                title: 'Don\'t Search for a Home.<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500">Let New Homes Find You.</span>',
                desc: 'Stop chasing leftovers. Post your "Dream Home" and let top builders pitch you with <strong>off-market deals</strong> and <strong>custom builds</strong>.',
                ctaText: 'Build My Dream Profile',
                conceptTitle: 'The Power Shift',
                conceptDesc: 'The traditional market makes you beg for a viewing.<br><span class="font-semibold text-stone-700">Newer turns you into the Client, and builders into the Service Providers.</span>',
                demoTitle: 'Your Personal Market',
                testimonialTitle: 'Success Stories',
                testimonialDesc: 'See how families are skipping the stress and getting offers directly from builders.',
                oldList: '<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i class="fas fa-times text-red-400"></i></div><div><span class="font-bold text-stone-800">Chasing Listings:</span><p class="text-sm">Refreshing Zillow daily hoping for a match.</p></div></li>',
                newList: `<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i class="fas fa-trophy text-blue-500"></i></div><div><span class="font-bold text-stone-900">Being the Prize:</span><p class="text-sm">Builders bid on <em>your</em> business with incentives.</p></div></li>`,
                demoDesc: 'Interact with the <strong>Buyer App</strong> (Phase A) to broadcast your needs. Watch the market respond.',
                revenueTitle: 'Pricing', revenueDesc: 'Simple, transparent pricing.'
            },
            builder: {
                badge: '<span class="w-1.5 h-1.5 rounded-full bg-green-600 animate-pulse"></span> Guaranteed Absorption',
                title: 'Build for Buyers.<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-teal-500">Not for Speculation.</span>',
                desc: 'Eliminate market risk. See exactly what <strong>verified buyers</strong> in your zip code want before you pour a single foundation.',
                ctaText: 'Access Live Demand Feed',
                conceptTitle: 'From Gambling to Manufacturing',
                conceptDesc: 'Stop guessing what will sell next year.<br><span class="font-semibold text-stone-700">Newer gives you an order book of pre-approved buyers waiting for inventory.</span>',
                demoTitle: 'Demand Command Center',
                testimonialTitle: 'Builder Wins',
                testimonialDesc: 'Real results from developers who stopped building blind and started building sold.',
                oldList: '<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i class="fas fa-times text-red-400"></i></div><div><span class="font-bold text-stone-800">The "Spec" Gamble:</span><p class="text-sm">Building homes and praying interest rates don\'t rise.</p></div></li>',
                newList: `<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i class="fas fa-chart-line text-blue-500"></i></div><div><span class="font-bold text-stone-900">Build-to-Order:</span><p class="text-sm">Secure a buyer before you even break ground.</p></div></li>`,
                demoDesc: 'Watch the <strong>Builder Terminal</strong> (Phase B) populate instantly as real demand flows in from the App.',
                revenueTitle: 'Transparent Pricing', revenueDesc: 'No hidden fees. A partnership model designed to align our success with yours.'
            },
            investor: {
                badge: '<span class="w-1.5 h-1.5 rounded-full bg-purple-600 animate-pulse"></span> Market Efficiency',
                title: 'Solving the $300B<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-500">Housing Speculation Tax.</span>',
                desc: 'By inverting the market from Supply-First to <strong>Demand-First</strong>, we unlock massive liquidity and zero-out customer acquisition costs.',
                ctaText: 'See The Unit Economics',
                conceptTitle: 'The Liquidity Engine',
                conceptDesc: 'The housing market is illiquid because it lacks data.<br><span class="font-semibold text-stone-700">Newer is the clearinghouse that matches capital to verified demand instantly.</span>',
                demoTitle: 'The Transaction Engine',
                testimonialTitle: 'Market Validation',
                testimonialDesc: 'Data-driven validation of the high-velocity matching engine and liquidity model.',
                oldList: '<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i class="fas fa-times text-red-400"></i></div><div><span class="font-bold text-stone-800">Capital Lockup:</span><p class="text-sm">Money stuck in finished inventory waiting for buyers.</p></div></li>',
                newList: `<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i class="fas fa-bolt text-blue-500"></i></div><div><span class="font-bold text-stone-900">Velocity of Money:</span><p class="text-sm">Faster turns, higher IRR, and de-risked assets.</p></div></li>`,
                demoDesc: 'Observe the ecosystem mechanics: How <strong>User Input</strong> converts to <strong>Monetizable Data</strong> for builders.',
                revenueTitle: 'Unicorn Unit Economics', revenueDesc: 'Three revenue streams create a scalable, recurring income model with high LTV.'
            }
        };
        
        // --- Mock AI Logic (Reliable for Demos) ---
        const mockBios = [
            "Professional Couple seeking a modern sanctuary. Pre-approved and ready to move quickly for the right home office setup.",
            "Growing family prioritizing school district and space. Looking for a functional layout with room to expand.",
            "Design-conscious buyer seeking architectural uniqueness. Flexible closing timeline for the perfect modern aesthetic."
        ];
        
        const mockPitches = [
            "We have a lot in Phase 2 perfectly suited for your custom plan. Let's discuss a build-to-suit option.",
            "I have a spec home finishing in 45 days that hits all your requirements. $10k incentive if under contract this month.",
            "Your budget aligns with our new 'Modern Series'. Verify your funds and let's schedule a hard hat tour."
        ];

        const mockIntel = "Analysis: High demand for Home Offices in this zip code suggests shifting to Plan B layouts. Recommendation: Increase spec starts on 4bd models to capture verified $500k+ buyers.";
        
        const mockMemo = "Investment Thesis: Newer effectively eliminates CAC for builders by monetizing verified demand. This creates a negative working capital cycle and high LTV/CAC ratio, positioning it as a liquidity layer for the $1T new construction market.";

        // Corrected Function Names to match HTML onclicks
        function generateBuyerBio() {
            const btn = document.getElementById('btn-generate-bio');
            const container = document.getElementById('ai-bio-container');
            const text = document.getElementById('ai-bio-text');
            
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Generating...'; btn.disabled = true;
            
            setTimeout(() => {
                const randomBio = mockBios[Math.floor(Math.random() * mockBios.length)];
                container.classList.remove('hidden');
                text.innerText = `"${randomBio}"`;
                btn.innerHTML = '<span>✨</span> Regenerate Bio'; btn.disabled = false;
            }, 1200);
        }

        function generateBuilderPitch() {
            const btn = document.getElementById('btn-ai-pitch');
            const area = document.getElementById('pitch-message');
            
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i>'; btn.disabled = true;
            
            setTimeout(() => {
                area.value = mockPitches[Math.floor(Math.random() * mockPitches.length)];
                btn.innerHTML = '<span>✨</span> AI Draft'; btn.disabled = false;
            }, 800);
        }

        function generateMarketIntel() {
            const btn = document.getElementById('btn-ai-intel');
            const text = document.getElementById('ai-intel-text');
            
            btn.innerText = 'Analyzing...'; btn.disabled = true;
            
            setTimeout(() => {
                text.innerText = mockIntel;
                text.classList.add('text-white', 'font-medium');
                btn.innerText = 'Analyze'; btn.disabled = false;
            }, 1500);
        }
        
        function generateInvestmentMemo() {
            const btn = document.getElementById('btn-ai-memo');
            const container = document.getElementById('ai-memo-container');
            const text = document.getElementById('ai-memo-text');
            
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i>'; btn.disabled = true;
            
            setTimeout(() => {
                container.classList.remove('hidden');
                text.innerText = mockMemo;
                btn.innerHTML = '<span>✨</span> Regenerate'; btn.disabled = false;
            }, 1200);
        }

        // --- Helper Functions ---
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => { clearTimeout(timeout); func(...args); };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function toggleFaq(btn) {
            const answer = btn.nextElementSibling; 
            const icon = btn.querySelector('.faq-icon');
            const isExpanded = btn.getAttribute('aria-expanded') === 'true';
            btn.setAttribute('aria-expanded', !isExpanded);
            if(answer.classList.contains('open')) { answer.classList.remove('open'); icon.classList.remove('rotate'); } 
            else { answer.classList.add('open'); icon.classList.add('rotate'); }
        }

        function startMarketSimulation() {
            setInterval(() => {
                const activeEl = document.getElementById('stat-active'); 
                if(!activeEl) return;
                let current = parseInt(activeEl.innerText.replace(/,/g, ''));
                current += Math.random() > 0.6 ? 1 : (Math.random() > 0.5 ? -1 : 0);
                activeEl.innerText = current.toLocaleString();
            }, 3000);
        }

        // --- Demo Flow Logic ---
        function setAudience(role) {
            // Update Buttons
            document.querySelectorAll('.role-btn').forEach(btn => {
                const isActive = (btn.innerText.toLowerCase().includes(role) || 
                                (role === 'buyer' && btn.innerText.includes('Buyers')) || 
                                (role === 'builder' && btn.innerText.includes('Builders')));
                
                if (isActive) {
                    btn.classList.add('active', 'bg-stone-900', 'text-white', 'border-stone-900');
                    btn.classList.remove('bg-stone-100', 'text-stone-500', 'border-stone-200');
                } else {
                    btn.classList.remove('active', 'bg-stone-900', 'text-white', 'border-stone-900');
                    btn.classList.add('bg-stone-100', 'text-stone-500', 'border-stone-200');
                }
            });

            // Update Content
            const config = contentConfig[role] || contentConfig['buyer'];
            const badgeEl = document.getElementById('hero-badge');
            const titleEl = document.getElementById('hero-title');
            const descEl = document.getElementById('hero-desc');
            const ctaEl = document.getElementById('hero-cta-btn');
            
            const conceptTitleEl = document.getElementById('concept-title');
            const conceptDescEl = document.getElementById('concept-desc');
            const demoTitleEl = document.getElementById('demo-title');
            const demoDescEl = document.getElementById('demo-desc');
            const testimonialTitleEl = document.getElementById('testimonial-title');
            const testimonialDescEl = document.getElementById('testimonial-desc');
            const conceptOldListEl = document.getElementById('concept-old-list');
            const conceptNewListEl = document.getElementById('concept-new-list');
            const revenueTitleEl = document.getElementById('revenue-title');
            const revenueDescEl = document.getElementById('revenue-desc');

            if(badgeEl) badgeEl.innerHTML = config.badge;
            if(titleEl) titleEl.innerHTML = config.title;
            if(descEl) descEl.innerHTML = config.desc;
            if(ctaEl) ctaEl.innerText = config.ctaText;
            
            if(conceptTitleEl) conceptTitleEl.innerText = config.conceptTitle;
            if(conceptDescEl) conceptDescEl.innerHTML = config.conceptDesc;
            if(demoTitleEl) demoTitleEl.innerText = config.demoTitle;
            if(demoDescEl) demoDescEl.innerHTML = config.demoDesc;
            if(testimonialTitleEl) testimonialTitleEl.innerText = config.testimonialTitle;
            if(testimonialDescEl) testimonialDescEl.innerText = config.testimonialDesc;
            if(conceptOldListEl) conceptOldListEl.innerHTML = config.oldList;
            if(conceptNewListEl) conceptNewListEl.innerHTML = config.newList;
            if(revenueTitleEl) revenueTitleEl.innerText = config.revenueTitle;
            if(revenueDescEl) revenueDescEl.innerText = config.revenueDesc;

            audienceElements.forEach(el => {
                const allowedRoles = el.getAttribute('data-audience').split(',').map(s => s.trim());
                if(allowedRoles.includes(role)) { el.classList.remove('hidden'); } else { el.classList.add('hidden'); }
            });
        }

        function selectStyle(style) {
            appState.style = style;
            document.querySelectorAll('.style-btn').forEach(btn => {
                if(btn.innerText.includes(style)) btn.classList.add('ring-2', 'ring-blue-500', 'bg-blue-50');
                else btn.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-50');
            });
            setTimeout(() => nextStep('2'), 400);
        }

        function setPersona(type) {
            appState.persona = type;
            document.querySelectorAll('.persona-btn').forEach(btn => {
               if(btn.innerText === type) { btn.classList.add('bg-stone-900', 'text-white', 'border-stone-900'); btn.classList.remove('bg-white', 'text-stone-600'); }
               else { btn.classList.remove('bg-stone-900', 'text-white', 'border-stone-900'); btn.classList.add('bg-white', 'text-stone-600'); }
            });
        }

        function updateRange(type, val) {
            if(type === 'bed') { appState.bedrooms = val; document.getElementById('bed-val').innerText = val; }
            if(type === 'budget') { appState.budget = val; document.getElementById('budget-val').innerText = `$${val}k`; }
            updateDashPreview();
        }

        function toggleAmenity(btn, name) {
            if(appState.amenities.includes(name)) {
                appState.amenities = appState.amenities.filter(a => a !== name);
                btn.classList.remove('border-blue-500', 'text-blue-600', 'bg-blue-50');
            } else {
                if(appState.amenities.length >= 3) return;
                appState.amenities.push(name);
                btn.classList.add('border-blue-500', 'text-blue-600', 'bg-blue-50');
                // Simulate "Match Found" notification on phone
                notifyPhone("Market Update", `3 Builders match your ${name} request.`);
            }
            updateDashPreview();
        }

        function nextStep(id) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`step-${id}`).classList.remove('hidden');
        }

        function verifyUser(e) {
            const btn = e.currentTarget;
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Verifying...';
            
            setTimeout(() => {
                appState.verified = true;
                nextStep('4');
                revealBuilderCard(); // Trigger the builder side event
            }, 1500);
        }

        function updateDashPreview() {
            document.getElementById('dash-card-style').innerText = appState.style || 'Pending';
            document.getElementById('dash-card-config').innerText = `${appState.bedrooms}bd / ${Math.ceil(appState.bedrooms * 0.7)}ba`;
            document.getElementById('dash-card-budget').innerText = `$${appState.budget}k`;
            document.getElementById('dash-card-amenities').innerText = appState.amenities.join(', ') || 'None';
        }

        function revealBuilderCard() {
            const card = document.getElementById('user-card-overlay');
            card.classList.remove('translate-y-full');
            document.getElementById('stat-active').innerText = "1,249"; // Increment counter
        }

        function unlockLead() {
            if(appState.credits < 50) return alert("Low Credits");
            appState.credits -= 50;
            document.getElementById('stat-credits').innerText = appState.credits;
            document.getElementById('unlock-area').innerHTML = `
                <div class="bg-stone-800 rounded-lg p-3 border border-stone-600 flex items-center justify-between">
                    <div>
                        <div class="text-[10px] text-stone-400 uppercase">Contact Info</div>
                        <div class="text-sm font-bold text-white">James Smith • (512) 555-0122</div>
                        <div class="text-xs text-blue-400">Verified • 750+ Credit Score</div>
                    </div>
                    <div class="w-8 h-8 bg-green-900/50 rounded-full flex items-center justify-center text-green-500"><i class="fas fa-check"></i></div>
                </div>
            `;
            notifyPhone("Profile Viewed", "A Builder just unlocked your contact info!");
        }

        function sendPitch() {
            document.getElementById('pitch-modal').classList.add('hidden');
            notifyPhone("New Offer!", "Builder Pitch: Custom Lot in Phase 2.");
            
            // Visual feedback on list items (Simulated on the first item for demo)
            const firstPitchBtn = document.querySelector('.pitch-btn');
            if(firstPitchBtn) {
                firstPitchBtn.innerText = "Sent";
                firstPitchBtn.classList.remove('bg-blue-600', 'hover:bg-blue-500', 'text-white');
                firstPitchBtn.classList.add('bg-green-600', 'text-white', 'cursor-default');
                firstPitchBtn.disabled = true;
            }
        }

        function resetDemo() {
            // Reset state
            appState = { style: '', persona: '', bedrooms: 3, budget: 500, amenities: [], verified: false, credits: 500 };
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            document.getElementById('step-1').classList.remove('hidden');
            document.getElementById('user-card-overlay').classList.add('translate-y-full');
            
            // Reset UI bits
            document.querySelectorAll('.style-btn').forEach(btn => btn.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-50'));
            document.querySelectorAll('.amenity-btn').forEach(btn => btn.classList.remove('border-blue-500', 'text-blue-600', 'bg-blue-50'));
            document.getElementById('stat-credits').innerText = "500";
            document.getElementById('unlock-area').innerHTML = '<button onclick="unlockLead()" class="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg shadow-lg text-sm transition-all flex items-center justify-center gap-2"><i class="fas fa-lock-open"></i> UNLOCK CONTACT DETAILS (50 Credits)</button>';
            
            // Clear notifications
            document.getElementById('phone-notifications').innerHTML = '';
        }

        // --- Notification System ---
        function notifyPhone(title, msg) {
            const container = document.getElementById('phone-notifications');
            const el = document.createElement('div');
            el.className = 'w-full bg-white/95 backdrop-blur shadow-lg rounded-xl p-3 border border-stone-100 flex items-start gap-3 transform translate-y-[-10px] opacity-0 transition-all duration-300';
            el.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-blue-100 shrink-0 flex items-center justify-center text-blue-600 text-xs"><i class="fas fa-bell"></i></div>
                <div><h4 class="text-xs font-bold text-stone-900">${title}</h4><p class="text-[10px] text-stone-500 leading-tight mt-0.5">${msg}</p></div>
            `;
            container.appendChild(el);
            
            // Animation In
            requestAnimationFrame(() => { el.classList.remove('translate-y-[-10px]', 'opacity-0'); });
            
            // Remove after 4s
            setTimeout(() => {
                el.classList.add('opacity-0', 'translate-y-[-10px]');
                setTimeout(() => el.remove(), 300);
            }, 4000);
        }

        // Add drawMap function
        function drawMap() {
            const canvas = document.getElementById('demandMap');
            if(!canvas) return;
            
            // Ensure parent has dimensions
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            
            const ctx = canvas.getContext('2d');
            
            // Clear/Background
            ctx.fillStyle = '#1c1917'; // stone-900
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw Heatmap (Demand)
            heatMapPoints.forEach(p => {
                const x = p.x * canvas.width;
                const y = p.y * canvas.height;
                const grad = ctx.createRadialGradient(x, y, 0, x, y, p.r);
                grad.addColorStop(0, 'rgba(239, 68, 68, 0.4)'); // red
                grad.addColorStop(1, 'rgba(239, 68, 68, 0)');
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(x, y, p.r, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw Lots (Supply)
            lotPoints.forEach(p => {
                const x = p.x * canvas.width;
                const y = p.y * canvas.height;
                ctx.fillStyle = '#3b82f6'; // blue
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Pulse effect ring
                ctx.strokeStyle = 'rgba(59, 130, 246, 0.5)';
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.stroke();
            });
        }

        const debouncedDraw = debounce(() => {
             const mapView = document.getElementById('dashboard-map-view'); 
             const intelView = document.getElementById('dashboard-intel-view');
             if (mapView && !mapView.classList.contains('hidden')) drawMap();
             if (intelView && !intelView.classList.contains('hidden') && intelChartInstance) intelChartInstance.resize();
        }, 100);
        window.addEventListener('resize', debouncedDraw);

        // --- View Toggles ---
        function toggleDashboardView(view) {
            if(view === 'list') {
                document.getElementById('dashboard-list-view').classList.remove('hidden');
                document.getElementById('dashboard-intel-view').classList.add('hidden');
                document.getElementById('dashboard-map-view').classList.add('hidden');
                document.getElementById('view-list-btn').classList.add('bg-stone-600', 'text-white'); document.getElementById('view-list-btn').classList.remove('text-stone-400');
                document.getElementById('view-intel-btn').classList.remove('bg-stone-600', 'text-white'); document.getElementById('view-intel-btn').classList.add('text-stone-400');
                document.getElementById('view-map-btn').classList.remove('bg-stone-600', 'text-white'); document.getElementById('view-map-btn').classList.add('text-stone-400');
            } else if (view === 'intel') {
                document.getElementById('dashboard-list-view').classList.add('hidden');
                document.getElementById('dashboard-map-view').classList.add('hidden');
                document.getElementById('dashboard-intel-view').classList.remove('hidden');
                document.getElementById('view-intel-btn').classList.add('bg-stone-600', 'text-white'); document.getElementById('view-intel-btn').classList.remove('text-stone-400');
                document.getElementById('view-list-btn').classList.remove('bg-stone-600', 'text-white'); document.getElementById('view-list-btn').classList.add('text-stone-400');
                document.getElementById('view-map-btn').classList.remove('bg-stone-600', 'text-white'); document.getElementById('view-map-btn').classList.add('text-stone-400');
                initChart();
            } else {
                document.getElementById('dashboard-list-view').classList.add('hidden');
                document.getElementById('dashboard-intel-view').classList.add('hidden');
                document.getElementById('dashboard-map-view').classList.remove('hidden');
                document.getElementById('view-map-btn').classList.add('bg-stone-600', 'text-white'); document.getElementById('view-map-btn').classList.remove('text-stone-400');
                document.getElementById('view-list-btn').classList.remove('bg-stone-600', 'text-white'); document.getElementById('view-list-btn').classList.add('text-stone-400');
                document.getElementById('view-intel-btn').classList.remove('bg-stone-600', 'text-white'); document.getElementById('view-intel-btn').classList.add('text-stone-400');
                drawMap();
            }
        }

        function selectPitch(el, type) {
            document.querySelectorAll('.pitch-opt').forEach(opt => opt.classList.remove('border-blue-500', 'bg-stone-600'));
            el.classList.add('border-blue-500', 'bg-stone-600');
        }

        // --- Waitlist Logic ---
        function openWaitlistModal() {
            const modal = document.getElementById('waitlist-modal');
            const panel = document.getElementById('modal-panel');
            const backdrop = document.getElementById('modal-backdrop');
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                panel.classList.remove('opacity-0', 'scale-95');
            }, 10);
        }

        function closeWaitlistModal() {
            const modal = document.getElementById('waitlist-modal');
            const panel = document.getElementById('modal-panel');
            const backdrop = document.getElementById('modal-backdrop');
            
            panel.classList.add('opacity-0', 'scale-95');
            backdrop.classList.add('opacity-0');
            setTimeout(() => { modal.classList.add('hidden'); }, 300);
        }

        function handleWaitlistSubmit(e) {
            e.preventDefault();
            // Confetti effect
            if(typeof confetti === 'function') {
                const btn = e.submitter;
                const rect = btn.getBoundingClientRect();
                confetti({
                    particleCount: 150, spread: 70, origin: { x: (rect.left + rect.width/2)/window.innerWidth, y: (rect.top + rect.height/2)/window.innerHeight }
                });
            }
            
            // Switch to success state
            document.getElementById('modal-form-state').classList.add('hidden');
            document.getElementById('modal-success-state').classList.remove('hidden');
        }

        // --- Feed Simulation ---
        function addFeedItem() {
            const container = document.getElementById('dashboard-feed');
            const id = Math.floor(Math.random() * 8999) + 1000;
            const budget = Math.floor(Math.random() * 500) + 300;
            const item = document.createElement('div');
            item.className = 'grid grid-cols-12 gap-2 p-3 bg-stone-700/30 rounded border border-stone-700 items-center animate-[slideInRight_0.4s_ease-out] hover:bg-stone-700 transition-colors border-l-2 border-l-blue-500';
            item.innerHTML = `
                <div class="col-span-2 font-mono text-blue-300 text-[10px] sm:text-xs">#${id}</div>
                <div class="col-span-5 text-stone-300 text-[10px] sm:text-xs truncate">3bd • Modern Farmhouse</div>
                <div class="col-span-2 text-white font-bold text-[10px] sm:text-xs">$${budget}k</div>
                <div class="col-span-3 text-right"><button onclick="document.getElementById('pitch-modal').classList.remove('hidden'); document.getElementById('pitch-target-id').innerText='#${id}'" class="pitch-btn px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white text-[10px] rounded shadow-sm transition-colors">Pitch</button></div>
            `;
            container.prepend(item);
            if(container.children.length > 15) container.lastElementChild.remove();
        }

        // --- Init ---
        let chartInstance = null;
        function initChart() {
            if(chartInstance) return;
            const ctx = document.getElementById('intelChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Avg Buyer Budget',
                        data: [420, 435, 430, 450, 465, 485],
                        borderColor: '#3b82f6',
                        tension: 0.4,
                        borderWidth: 2,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { display: false },
                        x: { ticks: { color: '#6b7280', font: {size: 10} }, grid: { display: false } }
                    }
                }
            });
        }

        let revenueChartInstance = null;
        function updateRevenue(scenario) {
            if(!revenueChartInstance) return;
            const scenarios = { 
                conservative: { saas: [0.8, 2.1, 4.5, 8.0, 12.0], unlock: [0.2, 1.0, 3.5, 6.0, 9.0], success: [0.05, 0.5, 2.0, 8.0, 18.0] }, 
                base: { saas: [1.2, 3.5, 8.0, 15.5, 24.0], unlock: [0.5, 2.1, 6.5, 12.0, 18.5], success: [0.1, 1.5, 5.0, 18.0, 42.0] }, 
                aggressive: { saas: [2.0, 5.5, 12.0, 25.0, 45.0], unlock: [1.0, 4.0, 12.0, 25.0, 40.0], success: [0.5, 3.0, 10.0, 35.0, 85.0] } 
            };
            const data = scenarios[scenario];
            revenueChartInstance.data.datasets[0].data = data.saas; 
            revenueChartInstance.data.datasets[1].data = data.unlock; 
            revenueChartInstance.data.datasets[2].data = data.success;
            revenueChartInstance.update();
            
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                if(btn.innerText.toLowerCase().includes(scenario)) { 
                    btn.classList.replace('border-stone-600', 'bg-blue-600'); 
                    btn.classList.replace('text-stone-300', 'text-white'); 
                    btn.classList.add('border-blue-600'); 
                } else { 
                    btn.classList.replace('bg-blue-600', 'border-stone-600'); 
                    btn.classList.replace('text-white', 'text-stone-300'); 
                    btn.classList.remove('border-blue-600'); 
                }
            });
        }

        // Start loops
        setInterval(addFeedItem, 3500); // Slower, more realistic feed
        addFeedItem(); addFeedItem(); // Initial data

        document.addEventListener('DOMContentLoaded', function() {
            setAudience('buyer');
            
            // Revenue Chart Init
            const ctx = document.getElementById('revenueChart');
            if(ctx) {
                revenueChartInstance = new Chart(ctx.getContext('2d'), {
                    type: 'bar', 
                    data: { 
                        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'], 
                        datasets: [
                            { label: 'SaaS', data: [1.2, 3.5, 8.0, 15.5, 24.0], backgroundColor: '#3b82f6', stack: 'Stack 0' }, 
                            { label: 'Unlock', data: [0.5, 2.1, 6.5, 12.0, 18.5], backgroundColor: '#10b981', stack: 'Stack 0' }, 
                            { label: 'Success', data: [0.1, 1.5, 5.0, 18.0, 42.0], backgroundColor: '#6366f1', stack: 'Stack 0' }
                        ] 
                    },
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false, 
                        plugins: { legend: { position: 'bottom', labels: { color: '#9ca3af' } } }, 
                        scales: { 
                            y: { beginAtZero: true, grid: { color: 'rgba(75, 85, 99, 0.2)' }, ticks: { color: '#9ca3af', callback: v => '$' + v + 'M' } }, 
                            x: { grid: { display: false }, ticks: { color: '#9ca3af' } } 
                        } 
                    }
                });
            }
            
            startMarketSimulation();
        });
    </script>
</body>
</html>
