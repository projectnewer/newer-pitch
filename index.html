<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newer | The Reverse Marketplace for New Construction</title>
    
    <!-- Brand Favicon (Golden Roof v8.1) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none'><path d='M5 15 L12 7 L19 15' stroke='%23FBBF24' stroke-width='3.5' stroke-linecap='square' stroke-linejoin='miter' /></svg>">
    
    <!-- SEO & Social Metadata -->
    <meta name="description" content="Stop chasing listings. Newer connects verified buyers directly with top home builders. Get pitched exclusive off-market inventory before it hits the MLS.">
    <meta property="og:title" content="Newer | Make Builders Bid For You.">
    <meta property="og:description" content="Tired of bidding wars? Join the first reverse marketplace where builders compete for your business. Get early access to new construction homes.">
    <meta property="og:type" content="website">
    <!-- Updated Social Image with Brand Colors -->
    <meta property="og:image" content="https://placehold.co/1200x630/006AFF/0F172A?text=Newer+Marketplace">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Fonts: Lexend (Brand), Inter (UI), JetBrains Mono (Data) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@500&family=Lexend:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Icons: Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- CSS (Tailwind JIT) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        brand: ['Lexend', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            blue: '#006AFF',    // PropTech Blue (Actions, Links, Trust)
                            dark: '#0F172A',    // Builder Slate (Headings, Dark Mode)
                            light: '#F8FAFC',   // Paper White (Backgrounds)
                            surface: '#FFFFFF', // White cards
                            border: '#CBD5E1',  // Slate 300
                            success: '#10B981', // Growth Green (Success, Sales)
                            gold: '#FBBF24',    // Verified Gold (VIP, Winners)
                            muted: '#64748B',   // Slate 500
                        }
                    },
                    backgroundImage: {
                        'blueprint': 'linear-gradient(#E2E8F0 1px, transparent 1px), linear-gradient(90deg, #E2E8F0 1px, transparent 1px)',
                        'blueprint-dark': 'radial-gradient(rgba(0, 106, 255, 0.15) 1px, transparent 1px)', // Blue dots
                    },
                    boxShadow: {
                        'sharp': '4px 4px 0px 0px rgba(15, 23, 42, 0.1)',
                        'sharp-lg': '8px 8px 0px 0px rgba(15, 23, 42, 0.1)',
                        'sharp-blue': '4px 4px 0px 0px rgba(0, 106, 255, 0.2)',
                        'sharp-gold': '4px 4px 0px 0px rgba(251, 191, 36, 0.3)',
                    },
                    animation: {
                        'stamp': 'stamp-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both',
                        'dust': 'dust-out 1s ease-out both',
                        'spin-slow': 'spin 8s linear infinite',
                    },
                    keyframes: {
                        'stamp-in': {
                            '0%': { opacity: '0', transform: 'scale(3) rotate(-10deg)' },
                            '100%': { opacity: '1', transform: 'scale(1) rotate(-10deg)' },
                        },
                        'dust-out': {
                            '0%': { opacity: '1', transform: 'scale(1)' },
                            '100%': { opacity: '0', transform: 'scale(2)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Deferred Scripts for Performance -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        /* Blueprint Pattern Utility */
        .bg-blueprint-grid {
            background-size: 20px 20px;
        }

        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid #E2E8F0;
            box-shadow: 4px 4px 0px 0px rgba(15, 23, 42, 0.05);
        }

        .glass-card-premium {
            background: #FFFFFF;
            border: 1px solid #E2E8F0;
            box-shadow: 6px 6px 0px 0px rgba(0, 106, 255, 0.1); /* Blue Hint */
        }
        
        /* Warmer Dark Mode for Builders */
        .glass-dark {
            background: #0F172A; /* Builder Slate */
            border: 1px solid #1E293B;
        }

        /* Shine Effect */
        .shine-gold {
            position: relative;
            overflow: hidden;
        }
        .shine-gold::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(251, 191, 36, 0.3) 50%, /* Gold Shine */
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(45deg) translate(-100%, -100%);
            animation: shine 4s infinite;
        }
        @keyframes shine {
            0% { transform: translate(-100%, -100%) rotate(45deg); }
            15% { transform: translate(100%, 100%) rotate(45deg); }
            100% { transform: translate(100%, 100%) rotate(45deg); }
        }

        /* Custom Scrollbar for Dashboard */
        .dashboard-scroll::-webkit-scrollbar { width: 6px; }
        .dashboard-scroll::-webkit-scrollbar-track { background: #1E293B; }
        .dashboard-scroll::-webkit-scrollbar-thumb { background: #475569; border-radius: 2px; }
        .dashboard-scroll::-webkit-scrollbar-thumb:hover { background: #64748B; }

        /* Responsive Phone Frame Styling */
        .phone-frame {
            background-color: #fff;
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 600px;
            border-radius: 12px;
            box-shadow: 12px 12px 0px 0px rgba(15, 23, 42, 0.2);
            border: 4px solid #0F172A; /* Builder Slate */
            transform: translateZ(0); 
        }
        
        @media (min-width: 1024px) {
            .phone-frame {
                border: 8px solid #0F172A;
                border-radius: 16px;
                width: 340px;
                height: 700px;
            }
            .phone-notch { display: block; }
        }

        .phone-notch {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 35%; height: 26px; background-color: #0F172A;
            border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; z-index: 20;
        }

        /* Custom Range Slider */
        input[type=range] {
            -webkit-appearance: none; width: 100%; background: transparent;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 16px; width: 16px; border-radius: 0; /* Square thumb */
            background: #006AFF; cursor: pointer; margin-top: -6px; 
            border: 2px solid #0F172A;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; cursor: pointer; background: #CBD5E1; border-radius: 0;
        }
        input[type=range]:focus::-webkit-slider-runnable-track { background: #94A3B8; }

        /* Global Accessibility Focus */
        *:focus-visible {
            outline: 2px solid #006AFF;
            outline-offset: 2px;
        }

        /* Stamp Effect */
        .stamp-container {
            position: relative;
            display: inline-block;
            color: #006AFF; /* PropTech Blue */
            border: 4px solid #006AFF;
            padding: 10px 20px;
            text-transform: uppercase;
            font-family: 'Lexend', sans-serif;
            font-weight: 800;
            font-size: 2rem;
            letter-spacing: 0.1em;
            transform: rotate(-10deg);
        }
        
        #hero {
            background-size: cover;
            background-position: center;
            transition: background-image 0.5s ease-in-out;
        }
        
        /* Markdown-like styling for AI response */
        .ai-content h3 { font-family: 'Lexend', sans-serif; font-weight: 700; margin-bottom: 0.5rem; color: #0F172A; }
        .ai-content ul { list-style-type: square; padding-left: 1.5rem; margin-bottom: 1rem; color: #006AFF; }
        .ai-content li span { color: #475569; }
        .ai-content p { margin-bottom: 1rem; color: #475569; }
        .ai-content strong { color: #0F172A; font-weight: 600; }

        /* Ticker Animation */
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .animate-marquee { animation: marquee 40s linear infinite; }
        
        /* FAQ Animation */
        .faq-answer { transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out; max-height: 0; overflow: hidden; opacity: 0; }
        .faq-answer.open { max-height: 500px; opacity: 1; }
        .faq-icon { transition: transform 0.3s ease; }
    </style>
</head>
<body class="bg-brand-light text-brand-dark font-sans antialiased pb-16 lg:pb-0 selection:bg-brand-blue selection:text-white">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/95 border-b border-brand-border shadow-sm transition-all duration-300" aria-label="Main Navigation">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <!-- LOGO v8.1 (Ticker/Exponent: Sharp Caret) -->
                <a href="#" class="flex items-start gap-0.5 group transition-opacity hover:opacity-80" onclick="setAudience('buyer'); window.scrollTo({top: 0, behavior: 'smooth'});" aria-label="Newer Home">
                    <span class="text-3xl font-brand font-semibold tracking-tighter text-brand-dark leading-none">NEWER</span>
                    <svg viewBox="0 0 24 24" fill="none" class="w-4 h-4 -mt-1 -ml-0.5" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" />
                    </svg>
                </a>
                
                <div class="hidden md:flex bg-slate-100/50 rounded-md p-1 border border-brand-border" role="tablist" aria-label="User Persona Selection">
                    <button onclick="setAudience('buyer')" role="tab" aria-selected="true" id="tab-buyer" class="role-btn active px-6 py-2 rounded-sm text-sm font-semibold transition-all">For Buyers</button>
                    <button onclick="setAudience('builder')" role="tab" aria-selected="false" id="tab-builder" class="role-btn px-6 py-2 rounded-sm text-sm font-semibold transition-all">For Builders</button>
                    <button onclick="setAudience('investor')" role="tab" aria-selected="false" id="tab-investor" class="role-btn px-6 py-2 rounded-sm text-sm font-semibold transition-all">Partners</button>
                </div>

                <button onclick="openWaitlistModal()" class="bg-brand-dark text-white border border-brand-dark px-6 py-2.5 rounded-md text-sm font-bold hover:bg-brand-blue hover:border-brand-blue transition-all active:translate-y-0.5 shadow-sharp">
                    Get Early Access
                </button>
            </div>
            <!-- Mobile Role Switcher (Compact) -->
            <div class="md:hidden flex justify-center py-2 space-x-2 border-t border-brand-border bg-white/95" role="tablist">
                <button onclick="setAudience('buyer')" role="tab" class="role-btn active text-xs px-4 py-1.5 rounded-sm border border-brand-border font-bold" aria-current="true">Buyers</button>
                <button onclick="setAudience('builder')" role="tab" class="role-btn text-xs px-4 py-1.5 rounded-sm border border-brand-border font-bold" aria-current="false">Builders</button>
                <button onclick="setAudience('investor')" role="tab" class="role-btn text-xs px-4 py-1.5 rounded-sm border border-brand-border font-bold" aria-current="false">Partners</button>
            </div>
        </div>
    </nav>

    <!-- LIVE MARKET TICKER -->
    <div class="w-full bg-brand-dark text-slate-400 overflow-hidden border-b border-brand-dark z-40 relative h-10 flex items-center shadow-md" aria-label="Live Market Updates">
        <div class="flex whitespace-nowrap overflow-hidden absolute w-full" aria-hidden="true">
            <div class="animate-marquee inline-block text-xs font-mono font-medium tracking-wide">
                <!-- Content Set 1 -->
                <span class="mx-8 ticker-item"><span class="text-brand-success">ðŸ’°</span> <strong class="text-white">$15k Incentive</strong> accepted by Buyer #8492 (Dallas)</span>
                <span class="text-slate-700">|</span>
                <span class="mx-8 ticker-item"><span class="text-brand-blue">ðŸ”¥</span> <strong class="text-white">3 Builders</strong> bidding on Lot 4 (Austin)</span>
                <span class="text-slate-700">|</span>
                <span class="mx-8 ticker-item"><span class="text-brand-blue">ðŸ“‰</span> <strong class="text-white">Interest Rate Buy-down</strong> secured by Buyer #221 (Phoenix)</span>
                 <span class="text-slate-700">|</span>
                <span class="mx-8 ticker-item"><span class="text-brand-success">ðŸ’°</span> <strong class="text-white">$12k Closing Costs</strong> covered by Builder #401 (San Antonio)</span>
                <!-- Duplicate Content Set for Infinite Scroll -->
                <span class="mx-8 ticker-item"><span class="text-brand-success">ðŸ’°</span> <strong class="text-white">$15k Incentive</strong> accepted by Buyer #8492 (Dallas)</span>
                <span class="text-slate-700">|</span>
                <span class="mx-8 ticker-item"><span class="text-brand-blue">ðŸ”¥</span> <strong class="text-white">3 Builders</strong> bidding on Lot 4 (Austin)</span>
                <span class="text-slate-700">|</span>
                <span class="mx-8 ticker-item"><span class="text-brand-blue">ðŸ“‰</span> <strong class="text-white">Interest Rate Buy-down</strong> secured by Buyer #221 (Phoenix)</span>
                 <span class="text-slate-700">|</span>
                <span class="mx-8 ticker-item"><span class="text-brand-success">ðŸ’°</span> <strong class="text-white">$12k Closing Costs</strong> covered by Builder #401 (San Antonio)</span>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="relative pt-20 pb-20 md:pt-32 md:pb-40 overflow-hidden scroll-mt-28 bg-brand-light min-h-[600px] flex items-center" id="hero" aria-labelledby="hero-title" style="background-image: url('https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800&q=80');">
        <!-- Humanizing Overlay -->
        <div class="absolute inset-0 bg-gradient-to-r from-brand-light via-brand-light/80 to-transparent pointer-events-none"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-brand-light via-transparent to-transparent pointer-events-none"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full">
            <div class="max-w-3xl">
                <div id="hero-badge" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-sm bg-white border border-brand-border text-brand-dark text-[10px] md:text-xs font-bold uppercase tracking-wide mb-8 shadow-sharp">
                    <span class="w-1.5 h-1.5 rounded-full bg-brand-blue animate-pulse"></span> The Reverse Market
                </div>
                <h1 id="hero-title" class="text-5xl md:text-7xl font-brand font-bold text-brand-dark tracking-tight mb-6 leading-[1.1] min-h-[2.4em] drop-shadow-sm transition-all duration-300">
                    Don't Chase Listings.<br>
                    <span class="text-brand-blue">Make Builders Bid For You.</span>
                </h1>
                <p id="hero-desc" class="mt-4 max-w-xl text-lg md:text-xl text-slate-600 min-h-[3em] leading-relaxed font-normal bg-white/50 backdrop-blur-sm p-3 border border-brand-border rounded-md transition-all duration-300">
                    Newer connects verified buyers directly with top home builders. Simply post your 'Buy Box' profile, verify your budget, and receive custom proposals for off-market homes.
                </p>
                <div class="mt-10 flex flex-col sm:flex-row gap-4">
                    <a href="#demo" id="hero-cta-btn" class="px-8 py-4 bg-brand-blue text-white rounded-md font-bold shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all duration-200 text-center border-2 border-brand-blue">Build My Buy Box</a>
                    <a href="#concept" class="px-8 py-4 bg-white text-brand-dark border-2 border-brand-dark rounded-md font-bold shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all duration-200 text-center">How It Works</a>
                </div>
            </div>
        </div>
    </section>

    <!-- TRUSTED BY SECTION -->
    <section class="py-10 bg-white border-b border-brand-border">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-[10px] uppercase tracking-widest text-brand-muted font-bold mb-4 font-brand">Inventory Sourced From Top Builders</p>
            <div class="flex flex-wrap justify-center items-center gap-8 md:gap-16 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
                <div class="flex items-center gap-2 font-brand font-bold text-xl text-brand-dark"><i data-lucide="building" class="w-6 h-6"></i> LENNAR</div>
                <div class="flex items-center gap-2 font-brand font-bold text-xl text-brand-dark"><i data-lucide="building-2" class="w-6 h-6"></i> TOLL BROS</div>
                <div class="flex items-center gap-2 font-brand font-bold text-xl text-brand-dark"><i data-lucide="home" class="w-6 h-6"></i> PulteGroup</div>
                <div class="hidden md:flex items-center gap-2 font-brand font-bold text-xl text-brand-dark"><i data-lucide="landmark" class="w-6 h-6"></i> PLAID</div>
            </div>
        </div>
    </section>

    <!-- Concept Section -->
    <section id="concept" class="py-20 md:py-28 bg-white scroll-mt-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 id="concept-title" class="text-3xl md:text-4xl font-brand font-bold text-brand-dark transition-all duration-300">The Power Shift</h2>
                <p id="concept-desc" class="mt-4 text-slate-500 max-w-2xl mx-auto text-lg transition-all duration-300">
                    We flipped the real estate model to put you in control.<br><span class="font-semibold text-brand-blue">Stop begging for viewings. Become the Client.</span>
                </p>
            </div>
            <!-- Grid Alignment -->
            <div class="grid md:grid-cols-2 gap-12 items-stretch">
                <div class="p-10 rounded-lg bg-brand-light border border-brand-border relative group hover:border-brand-dark transition-all duration-300 h-full flex flex-col shadow-sm">
                    <div class="absolute -top-3 left-8 bg-slate-200 text-slate-600 px-3 py-1 rounded-sm text-[10px] font-bold uppercase tracking-wide border border-slate-300">The Old Way</div>
                    <h3 class="text-2xl font-brand font-bold text-brand-dark mb-4 flex items-center gap-3"><i data-lucide="search" class="text-brand-muted w-6 h-6"></i> Active Shopper</h3>
                    <ul id="concept-old-list" class="space-y-4 text-slate-600 text-sm flex-grow"></ul>
                </div>
                <div class="p-10 rounded-lg bg-white border border-brand-blue shadow-sharp relative group hover:shadow-sharp-lg transition-all duration-300 h-full flex flex-col">
                    <div class="absolute -top-3 left-8 bg-brand-blue text-white px-3 py-1 rounded-sm text-[10px] font-bold uppercase tracking-wide border border-brand-blue">The Newer Way</div>
                    <h3 class="text-2xl font-brand font-bold text-brand-dark mb-4 flex items-center gap-3"><i data-lucide="crown" class="text-brand-blue w-6 h-6"></i> VIP Client</h3>
                    <ul id="concept-new-list" class="space-y-4 text-slate-700 text-sm flex-grow"></ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo Section -->
    <section id="demo" class="py-20 md:py-28 bg-brand-light bg-blueprint overflow-hidden relative scroll-mt-24" aria-labelledby="demo-title">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="mb-12">
                <h2 id="demo-title" class="text-3xl md:text-4xl font-brand font-bold text-brand-dark transition-all duration-300">Your Personal Market</h2>
                <p id="demo-desc" class="mt-4 text-slate-600 max-w-3xl text-lg transition-all duration-300">Interact with the <strong>Buyer App</strong> to broadcast your needs. Watch the market respond.</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-10 xl:gap-16 lg:h-[800px]">
                <!-- LEFT COLUMN: Buyer App Simulation -->
                <div class="lg:col-span-4 flex flex-col items-center lg:items-end">
                    <div class="mb-4 text-center lg:text-right w-full">
                        <span class="text-xs font-bold uppercase text-brand-blue tracking-wider">Step 1 & 2: Define & Verify</span>
                        <h3 class="text-xl font-bold text-brand-dark font-brand">The "Buy Box"</h3>
                        <p class="text-sm text-slate-500">Builders only pitch verified profiles.</p>
                    </div>
                    
                    <div class="phone-frame flex flex-col shadow-2xl relative bg-white border-brand-dark">
                        <div class="phone-notch"></div>
                        <div id="phone-notifications" class="absolute top-12 left-0 right-0 px-3 z-50 pointer-events-none flex flex-col items-center space-y-2"></div>
                        <!-- LOGO WITH ICON IN PHONE DEMO -->
                        <div class="h-16 bg-white border-b border-brand-border flex items-center justify-between px-6 pt-6 relative z-10 shrink-0">
                            <div class="flex items-start gap-0.5">
                                <span class="text-xl font-brand font-semibold tracking-tighter text-brand-dark leading-none">NEWER</span>
                                <svg viewBox="0 0 24 24" fill="none" class="w-3 h-3 -mt-0.5 -ml-0.5" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" />
                                </svg>
                            </div>
                            <div class="w-8 h-8 rounded-sm bg-slate-100 flex items-center justify-center border border-slate-200"><i data-lucide="user" class="text-slate-400 w-4 h-4"></i></div>
                        </div>
                        <div id="buyer-screen-container" class="flex-1 p-6 overflow-y-auto bg-brand-light relative">
                            
                            <!-- Step 1: Vibe Check -->
                            <div id="step-1" class="step-content fade-in">
                                <h3 class="text-xl font-brand font-bold mb-1 text-brand-dark">Set the mood.</h3>
                                <p class="text-xs text-slate-500 mb-6">Which style feels like home?</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <button onclick="selectStyle('Modern Farmhouse')" class="style-btn group p-4 bg-white rounded-lg border border-brand-border hover:border-brand-blue hover:shadow-sharp transition-all text-left">
                                        <div class="h-14 bg-slate-50 rounded-md mb-3 flex items-center justify-center group-hover:bg-blue-50 transition-colors border border-slate-100"><i data-lucide="warehouse" class="w-6 h-6 text-slate-400 group-hover:text-brand-blue"></i></div>
                                        <span class="text-[10px] font-bold block text-slate-700 group-hover:text-brand-blue">Modern Farmhouse</span>
                                    </button>
                                    <button onclick="selectStyle('Contemporary')" class="style-btn group p-4 bg-white rounded-lg border border-brand-border hover:border-brand-blue hover:shadow-sharp transition-all text-left">
                                        <div class="h-14 bg-slate-50 rounded-md mb-3 flex items-center justify-center group-hover:bg-blue-50 transition-colors border border-slate-100"><i data-lucide="box" class="w-6 h-6 text-slate-400 group-hover:text-brand-blue"></i></div>
                                        <span class="text-[10px] font-bold block text-slate-700 group-hover:text-brand-blue">Contemporary</span>
                                    </button>
                                    <button onclick="selectStyle('Traditional')" class="style-btn group p-4 bg-white rounded-lg border border-brand-border hover:border-brand-blue hover:shadow-sharp transition-all text-left">
                                        <div class="h-14 bg-slate-50 rounded-md mb-3 flex items-center justify-center group-hover:bg-blue-50 transition-colors border border-slate-100"><i data-lucide="landmark" class="w-6 h-6 text-slate-400 group-hover:text-brand-blue"></i></div>
                                        <span class="text-[10px] font-bold block text-slate-700 group-hover:text-brand-blue">Traditional</span>
                                    </button>
                                    <button onclick="selectStyle('Mediterranean')" class="style-btn group p-4 bg-white rounded-lg border border-brand-border hover:border-brand-blue hover:shadow-sharp transition-all text-left">
                                        <div class="h-14 bg-slate-50 rounded-md mb-3 flex items-center justify-center group-hover:bg-blue-50 transition-colors border border-slate-100"><i data-lucide="sun" class="w-6 h-6 text-slate-400 group-hover:text-brand-blue"></i></div>
                                        <span class="text-[10px] font-bold block text-slate-700 group-hover:text-brand-blue">Mediterranean</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Step 2: Crew & Amenities -->
                            <div id="step-2" class="step-content hidden fade-in">
                                <h3 class="text-xl font-brand font-bold mb-1 text-brand-dark">The Basics.</h3>
                                <p class="text-xs text-slate-500 mb-6">Define your space needs.</p>
                                <div class="space-y-6">
                                    <div>
                                        <label class="text-[10px] font-bold uppercase text-slate-400 tracking-wider">Persona</label>
                                        <div class="flex gap-2 mt-2">
                                            <button onclick="setPersona('Family')" class="persona-btn flex-1 py-2.5 bg-white border border-brand-border rounded-sm text-xs font-bold hover:border-brand-dark hover:text-brand-dark transition-colors text-slate-600">Growing Family</button>
                                            <button onclick="setPersona('Couple')" class="persona-btn flex-1 py-2.5 bg-white border border-brand-border rounded-sm text-xs font-bold hover:border-brand-dark hover:text-brand-dark transition-colors text-slate-600">Pro Couple</button>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label for="demo-bedrooms" class="text-[10px] font-bold uppercase text-slate-400 tracking-wider">Bedrooms</label>
                                            <span id="bed-val" class="text-xs font-bold font-mono text-brand-blue">3</span>
                                        </div>
                                        <input id="demo-bedrooms" type="range" min="2" max="6" value="3" class="w-full accent-brand-blue" oninput="updateRange('bed', this.value)" aria-valuemin="2" aria-valuemax="6" aria-valuenow="3">
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label for="demo-budget" class="text-[10px] font-bold uppercase text-slate-400 tracking-wider">Max Budget</label>
                                            <span id="budget-val" class="text-xs font-bold font-mono text-brand-blue">$500k</span>
                                        </div>
                                        <input id="demo-budget" type="range" min="300" max="1500" step="50" value="500" class="w-full accent-brand-blue" oninput="updateRange('budget', this.value)" aria-valuemin="300" aria-valuemax="1500" aria-valuenow="500">
                                    </div>
                                    <button onclick="nextStep('amenities')" class="w-full py-3.5 bg-brand-dark text-white rounded-md font-bold text-sm shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all">Next Step</button>
                                </div>
                            </div>

                            <!-- Amenities Step -->
                            <div id="step-amenities" class="step-content hidden fade-in">
                                <h3 class="text-xl font-brand font-bold mb-1 text-brand-dark">Non-Negotiables.</h3>
                                <p class="text-xs text-slate-500 mb-6">Select top 3 features.</p>
                                <div class="grid grid-cols-2 gap-3 mb-6">
                                    <button onclick="toggleAmenity(this, 'Office')" class="amenity-btn p-3 rounded-lg border border-brand-border bg-white text-slate-600 hover:border-brand-blue hover:text-brand-blue transition-all flex flex-col items-center gap-2 group">
                                        <i data-lucide="laptop" class="w-5 h-5 text-slate-400 group-hover:text-brand-blue"></i><span class="text-[10px] font-bold">Home Office</span>
                                    </button>
                                    <button onclick="toggleAmenity(this, '3-Car Garage')" class="amenity-btn p-3 rounded-lg border border-brand-border bg-white text-slate-600 hover:border-brand-blue hover:text-brand-blue transition-all flex flex-col items-center gap-2 group">
                                        <i data-lucide="car" class="w-5 h-5 text-slate-400 group-hover:text-brand-blue"></i><span class="text-[10px] font-bold">3-Car Garage</span>
                                    </button>
                                    <button onclick="toggleAmenity(this, 'Rate Buy-Down')" class="amenity-btn p-3 rounded-lg border border-brand-border bg-white text-slate-600 hover:border-brand-blue hover:text-brand-blue transition-all flex flex-col items-center gap-2 group">
                                        <i data-lucide="percent" class="w-5 h-5 text-slate-400 group-hover:text-brand-blue"></i><span class="text-[10px] font-bold">Rate Buy-Down</span>
                                    </button>
                                    <button onclick="toggleAmenity(this, 'Pool Ready')" class="amenity-btn p-3 rounded-lg border border-brand-border bg-white text-slate-600 hover:border-brand-blue hover:text-brand-blue transition-all flex flex-col items-center gap-2 group">
                                        <i data-lucide="waves" class="w-5 h-5 text-slate-400 group-hover:text-brand-blue"></i><span class="text-[10px] font-bold">Pool Ready</span>
                                    </button>
                                </div>
                                <button onclick="nextStep('3')" class="w-full py-3.5 bg-brand-dark text-white rounded-md font-bold text-sm shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all">Get VIP Status</button>
                            </div>

                            <!-- Step 3: VIP Access -->
                            <div id="step-3" class="step-content hidden fade-in">
                                <h3 class="text-xl font-brand font-bold mb-1 text-brand-dark">Unlock VIP Access</h3>
                                <p class="text-xs text-slate-500 mb-4">Builders compete for verified Gold Status buyers.</p>
                                
                                <div class="flex items-center justify-center gap-2 mb-6 bg-blue-50 py-2 px-4 rounded-sm w-fit mx-auto border border-brand-blue shadow-sm shine-gold">
                                    <i data-lucide="crown" class="text-brand-blue w-3 h-3"></i>
                                    <span class="text-[10px] font-bold text-brand-dark uppercase tracking-wide">Verified Access</span>
                                </div>

                                <button onclick="verifyUser(event)" class="w-full py-3.5 bg-white border-2 border-brand-border rounded-md font-bold text-sm flex items-center justify-center gap-3 hover:border-brand-blue hover:text-brand-blue hover:bg-blue-50 transition-all group mb-3 text-slate-600">
                                    <i data-lucide="landmark" class="w-4 h-4 text-slate-300 group-hover:text-brand-blue"></i> Verify Proof of Funds
                                </button>
                                <button onclick="verifyUser(event)" class="w-full py-3.5 bg-white border-2 border-brand-border rounded-md font-bold text-sm flex items-center justify-center gap-3 hover:border-brand-blue hover:text-brand-blue hover:bg-blue-50 transition-all group text-slate-600">
                                    <i data-lucide="upload" class="w-4 h-4 text-slate-300 group-hover:text-brand-blue"></i> Upload Pre-Approval
                                </button>
                                
                                <p class="mt-4 text-[10px] text-center text-slate-400 flex items-center justify-center gap-1">
                                    <i data-lucide="lock" class="w-3 h-3"></i> 256-bit Bank Grade Security
                                </p>
                            </div>

                            <!-- Step 4: Complete -->
                            <div id="step-4" class="step-content hidden fade-in text-center pt-8">
                                <div class="w-16 h-16 bg-brand-dark rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce shadow-sharp-gold border border-brand-gold"><i data-lucide="crown" class="w-8 h-8 text-brand-gold"></i></div>
                                <h3 class="text-xl font-brand font-bold mb-1 text-brand-dark">You are VIP!</h3>
                                <p class="text-xs text-slate-500 mb-6">Alias: <span class="bg-slate-100 py-0.5 px-2 rounded-sm font-mono font-bold text-slate-700 border border-slate-200">Buyer #8942</span></p>
                                
                                <div class="mt-4 mb-6">
                                    <div id="ai-bio-container" class="hidden p-3 bg-white border border-brand-border rounded-lg text-left mb-3 shadow-sm">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-base">âœ¨</span>
                                            <span class="text-[10px] font-bold uppercase text-brand-blue tracking-wider">AI Generated Bio</span>
                                        </div>
                                        <p id="ai-bio-text" class="text-xs text-slate-700 italic leading-relaxed"></p>
                                    </div>
                                    <button onclick="generateBuyerBio()" id="btn-generate-bio" class="w-full py-2.5 bg-white border border-brand-border text-brand-blue font-bold rounded-sm text-xs hover:bg-blue-50 hover:border-brand-blue transition-colors flex items-center justify-center gap-2 shadow-sm">
                                        <span>âœ¨</span> Enhance Profile with AI
                                    </button>
                                </div>

                                <div id="buyer-pitches-container" class="mt-4 text-left">
                                    <div class="p-4 rounded-lg border border-brand-border bg-slate-50 text-center shadow-sm">
                                        <p class="text-[10px] text-slate-400 italic">Waiting for builder proposals...</p>
                                        <div class="mt-2 flex justify-center gap-1">
                                            <div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce"></div>
                                            <div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                            <div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                        </div>
                                    </div>
                                </div>

                                <button onclick="resetDemo()" class="mt-6 text-xs text-slate-400 hover:text-slate-600 underline">Start Over</button>
                            </div>
                        </div>
                        <div class="h-14 bg-white border-t border-brand-border flex justify-around items-center text-slate-300 shrink-0">
                            <i data-lucide="home" class="w-5 h-5 text-brand-dark"></i>
                            <i data-lucide="heart" class="w-5 h-5"></i>
                            <i data-lucide="message-square" class="w-5 h-5"></i>
                            <i data-lucide="user" class="w-5 h-5"></i>
                        </div>
                    </div>
                </div>

                <!-- RIGHT COLUMN: Builder Dashboard -->
                <div class="lg:col-span-8 flex flex-col h-[600px] lg:h-[700px]">
                    <div class="mb-4 text-center lg:text-left pl-4">
                        <span class="text-xs font-bold uppercase text-brand-blue tracking-wider">Step 3: Receive</span>
                        <h3 class="text-xl font-bold text-brand-dark font-brand">Builder Command Center</h3>
                        <p class="text-sm text-slate-500">Builders see your profile (anonymously) and bid for your business.</p>
                    </div>
                    <!-- Dashboard Header -->
                    <div class="bg-brand-dark text-white p-4 rounded-t-lg flex justify-between items-center shadow-lg z-10 border-b border-slate-800 relative overflow-hidden">
                        <div class="absolute inset-0 bg-blueprint-dark opacity-20"></div>
                        <div class="flex items-center gap-3 relative z-10">
                            <div class="flex gap-1.5">
                                <div class="w-3 h-3 rounded-full bg-red-500 border border-black/20"></div>
                                <div class="w-3 h-3 rounded-full bg-yellow-500 border border-black/20"></div>
                                <div class="w-3 h-3 rounded-full bg-green-500 border border-black/20"></div>
                            </div>
                            <svg viewBox="0 0 24 24" fill="none" class="w-4 h-4 ml-2" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" />
                            </svg>
                            <span class="font-mono font-bold text-sm tracking-wider text-slate-300 hidden md:inline">BUILDER_TERMINAL_V2</span>
                            <span class="ml-2 px-2 py-0.5 bg-brand-gold/20 text-brand-gold text-[10px] font-bold rounded-sm border border-brand-gold/30 animate-pulse">LIVE</span>
                        </div>
                        <div class="flex bg-slate-800 rounded-sm p-1 border border-slate-700 relative z-10">
                            <button onclick="toggleDashboardView('list')" id="view-list-btn" class="px-3 py-1 rounded-sm text-xs font-bold bg-brand-gold text-brand-dark transition-all">Feed</button>
                            <button onclick="toggleDashboardView('map')" id="view-map-btn" class="px-3 py-1 rounded-sm text-xs font-bold text-slate-400 hover:text-white transition-all">Map</button>
                            <button onclick="toggleDashboardView('intel')" id="view-intel-btn" class="px-3 py-1 rounded-sm text-xs font-bold text-slate-400 hover:text-white transition-all">Intel</button>
                        </div>
                    </div>
                    <!-- Dashboard Body (Glass Dark - Warmer) -->
                    <div id="builder-dashboard-body" class="bg-brand-dark flex-1 rounded-b-lg border-x border-b border-slate-800 shadow-2xl relative overflow-hidden flex flex-col glass-dark">
                        <!-- Stats Row -->
                        <div class="grid grid-cols-4 gap-px bg-slate-800 border-b border-slate-700">
                            <div class="bg-brand-dark p-3"><div class="text-[10px] text-slate-500 uppercase font-bold">Active Demand</div><div class="text-white font-mono text-base md:text-lg font-bold" id="stat-active">1,248</div></div>
                            <div class="bg-brand-dark p-3"><div class="text-[10px] text-slate-500 uppercase font-bold">Avg Budget</div><div class="text-white font-mono text-base md:text-lg font-bold" id="stat-budget">$485k</div></div>
                            <div class="bg-brand-dark p-3"><div class="text-[10px] text-slate-500 uppercase font-bold">Your Credits</div><div class="text-brand-gold font-mono text-base md:text-lg font-bold" id="stat-credits">500</div></div>
                            <div class="bg-brand-dark p-3"><div class="text-[10px] text-slate-500 uppercase font-bold">Conv. Rate</div><div class="text-brand-success font-mono text-base md:text-lg font-bold">18.4%</div></div>
                        </div>
                        
                        <!-- LIST VIEW CONTAINER -->
                        <div id="dashboard-list-view" class="flex-1 min-h-0 bg-slate-900/50 flex flex-col relative transition-opacity duration-300">
                            <div class="flex justify-between items-center p-3 bg-slate-900/80 border-b border-slate-700 text-[10px] uppercase text-slate-500 font-bold tracking-wider px-4">
                                <span>Incoming Stream</span>
                                <span>Updates <span class="w-1.5 h-1.5 rounded-full bg-brand-success inline-block ml-1 animate-pulse"></span></span>
                            </div>
                            <div id="dashboard-feed" class="flex-1 overflow-y-auto dashboard-scroll p-3 space-y-3 relative"></div>
                        </div>
                        
                        <!-- MAP VIEW CONTAINER -->
                        <div id="dashboard-map-view" class="flex-1 min-h-0 relative bg-slate-900 overflow-hidden hidden transition-opacity duration-300">
                            <canvas id="demandMap" class="w-full h-full object-cover opacity-80" role="img" aria-label="Heatmap of buyer demand vs available builder lots"></canvas>
                            <div class="absolute bottom-4 right-4 bg-black/80 border border-slate-700 px-3 py-2 rounded-sm text-xs text-white backdrop-blur">
                                <span class="w-2 h-2 rounded-full bg-red-500 inline-block mr-1"></span> High Demand
                                <span class="w-2 h-2 rounded-full bg-brand-gold inline-block ml-2 mr-1"></span> Your Lots
                            </div>
                        </div>

                        <!-- INTEL VIEW -->
                        <div id="dashboard-intel-view" class="flex-1 min-h-0 bg-brand-dark overflow-y-auto hidden p-6 transition-opacity duration-300">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 h-full">
                                <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                                    <h4 class="text-xs font-bold text-slate-400 uppercase mb-4">Live Feature Demand</h4>
                                    <div class="space-y-4">
                                        <div><div class="flex justify-between text-xs text-slate-400 mb-1"><span>Home Office</span><span class="text-brand-success font-mono">42% <i data-lucide="arrow-up" class="inline w-3 h-3"></i></span></div><div class="h-1.5 bg-slate-700 rounded-full"><div class="h-full bg-brand-gold rounded-full" style="width: 42%"></div></div></div>
                                        <div><div class="flex justify-between text-xs text-slate-400 mb-1"><span>3-Car Garage</span><span class="text-slate-400 font-mono">28%</span></div><div class="h-1.5 bg-slate-700 rounded-full"><div class="h-full bg-purple-500 rounded-full" style="width: 28%"></div></div></div>
                                        <div><div class="flex justify-between text-xs text-slate-400 mb-1"><span>Rate Buy-Down</span><span class="text-brand-success font-mono">15% <i data-lucide="arrow-up" class="inline w-3 h-3"></i></span></div><div class="h-1.5 bg-slate-700 rounded-full"><div class="h-full bg-teal-500 rounded-full" style="width: 15%"></div></div></div>
                                    </div>
                                    <div class="mt-6 p-3 bg-yellow-900/20 border border-brand-gold/20 rounded-md">
                                        <div class="flex justify-between items-center mb-2">
                                            <div class="text-brand-gold text-[10px] font-bold uppercase"><i data-lucide="bot" class="inline w-3 h-3 mr-1"></i> AI Insight</div>
                                            <button onclick="generateMarketIntel()" id="btn-ai-intel" class="text-[10px] text-brand-dark font-bold bg-brand-gold px-2 py-1 rounded-sm hover:bg-yellow-500 transition-colors">Analyze</button>
                                        </div>
                                        <p id="ai-intel-text" class="text-slate-400 text-xs leading-relaxed">Click Analyze to generate report.</p>
                                    </div>
                                </div>
                                <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                                    <h4 class="text-xs font-bold text-slate-400 uppercase mb-4">Budget Trend (90 Days)</h4>
                                    <div class="chart-container h-48 w-full"><canvas id="intelChart" role="img" aria-label="Line chart showing average buyer budget trends over the last 6 months"></canvas></div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Visualizer -->
                        <div id="user-card-overlay" class="absolute bottom-0 left-0 right-0 bg-brand-dark/95 border-t border-brand-gold p-5 transform translate-y-full transition-transform duration-500 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] z-20 backdrop-blur-sm">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <div class="flex items-center gap-2 mb-1"><span class="text-[10px] font-bold text-brand-gold uppercase tracking-wider">VIP Match Found</span><span class="w-1.5 h-1.5 bg-brand-gold rounded-full animate-pulse"></span></div>
                                    <h4 class="text-white font-bold text-xl font-brand">VIP Buyer #8942</h4>
                                </div>
                                <div class="text-right"><div class="text-2xl font-bold font-mono text-brand-success" id="dash-card-budget">$500k</div><div class="text-[10px] text-slate-500 uppercase">Verified Access</div></div>
                            </div>
                            <div class="grid grid-cols-3 gap-3 mb-4">
                                <div class="bg-slate-800 p-2 rounded-sm border border-slate-700"><div class="text-[10px] text-slate-500 uppercase">Style</div><div class="text-sm text-white font-medium" id="dash-card-style">Modern</div></div>
                                <div class="bg-slate-800 p-2 rounded-sm border border-slate-700"><div class="text-[10px] text-slate-500 uppercase">Size</div><div class="text-sm text-white font-medium font-mono" id="dash-card-config">3bd / 2ba</div></div>
                                <div class="bg-slate-800 p-2 rounded-sm border border-slate-700"><div class="text-[10px] text-slate-500 uppercase">Must Have</div><div class="text-sm text-white font-medium truncate" id="dash-card-amenities">...</div></div>
                            </div>
                            <div id="unlock-area"><button onclick="unlockLead()" id="btn-unlock" class="w-full py-3 bg-brand-gold hover:bg-yellow-500 text-brand-dark font-bold rounded-sm shadow-sharp-gold text-sm transition-all flex items-center justify-center gap-2"><i data-lucide="lock-open" class="w-4 h-4"></i> UNLOCK CONTACT DETAILS (50 Credits)</button></div>
                        </div>

                        <!-- Pitch Modal -->
                        <div id="pitch-modal" class="absolute inset-0 bg-black/80 z-30 hidden flex items-center justify-center p-4 backdrop-blur-sm">
                            <div class="bg-slate-800 border border-slate-600 rounded-lg p-5 w-full max-w-sm shadow-2xl">
                                <h4 class="text-white font-bold mb-1 font-brand">Match Inventory to Buyer <span id="pitch-target-id" class="text-brand-gold font-mono">#0000</span></h4>
                                <p class="text-xs text-slate-400 mb-4">Select standing inventory to offer.</p>
                                
                                <div class="mb-4 relative">
                                    <textarea id="pitch-message" class="w-full bg-slate-900 border border-slate-600 text-white text-xs rounded-sm p-3 focus:border-brand-gold outline-none h-20 resize-none leading-relaxed" placeholder="Drafting pitch..."></textarea>
                                    <button onclick="generateBuilderPitch()" id="btn-ai-pitch" class="absolute bottom-2 right-2 text-[10px] bg-brand-gold hover:bg-yellow-500 text-brand-dark px-2 py-1 rounded-sm flex items-center gap-1 transition-colors font-bold"><span>âœ¨</span> AI Draft</button>
                                </div>

                                <div class="space-y-2 mb-4">
                                    <button onclick="selectPitch(this, 'Spec')" class="pitch-opt w-full text-left p-3 rounded-sm bg-slate-700 border border-slate-600 hover:border-brand-gold hover:bg-slate-600 transition-all text-xs text-slate-300 group">
                                        <div class="flex justify-between mb-1"><span class="font-bold text-white group-hover:text-brand-gold"><i data-lucide="home" class="inline w-3 h-3 mr-2"></i> Move-In Ready (QMI)</span><span class="text-brand-success font-mono">Immediate Close</span></div>
                                    </button>
                                    <button onclick="selectPitch(this, 'Dirt')" class="pitch-opt w-full text-left p-3 rounded-sm bg-slate-700 border border-slate-600 hover:border-brand-gold hover:bg-slate-600 transition-all text-xs text-slate-300 group">
                                        <div class="flex justify-between mb-1"><span class="font-bold text-white group-hover:text-brand-gold"><i data-lucide="layers" class="inline w-3 h-3 mr-2"></i> Custom Build</span><span class="text-blue-400 font-mono">High Margin</span></div>
                                    </button>
                                </div>
                                <div class="flex gap-3">
                                    <button onclick="document.getElementById('pitch-modal').classList.add('hidden')" class="flex-1 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-sm text-xs font-bold">Cancel</button>
                                    <button onclick="sendPitch()" class="flex-1 py-2.5 bg-brand-gold hover:bg-yellow-500 text-brand-dark rounded-sm text-xs font-bold">Send Offer</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Social Proof (Dynamic Content) -->
    <section id="testimonials" class="py-20 md:py-28 bg-white border-y border-brand-border scroll-mt-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 id="testimonial-title" class="text-4xl font-brand font-bold text-brand-dark transition-all duration-300">Success Stories</h2>
                <p id="testimonial-desc" class="mt-4 text-slate-500 transition-all duration-300">Real results from the people changing how homes are bought and sold.</p>
            </div>
            <!-- Container for Dynamic Testimonials -->
            <div id="testimonials-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Content rendered via renderTestimonials() -->
            </div>
        </div>
    </section>
    
    <!-- Revenue / Economics Section (Restored & Optimized per Rec 3) -->
    <section id="revenue" class="py-20 md:py-28 bg-brand-dark text-white scroll-mt-24" data-audience="investor">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 id="revenue-title" class="text-3xl md:text-4xl font-brand font-bold text-white">Partnership Pricing</h2>
                <p id="revenue-desc" class="mt-4 text-slate-400 max-w-2xl mx-auto text-lg">Remove the barrier to entry. Build liquidity first.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Stream 1 (Updated) -->
                <div class="p-8 rounded-lg bg-slate-800 border border-slate-700 relative hover:border-brand-blue transition-all group">
                    <div class="absolute -top-4 left-8 bg-blue-900 text-blue-200 px-3 py-1 rounded-sm text-xs font-bold uppercase group-hover:bg-brand-blue group-hover:text-brand-dark transition-colors">Low Friction</div>
                    <h3 class="text-2xl font-bold mb-2 font-brand">Access Fee</h3>
                    <div class="text-4xl font-mono font-bold text-white mb-4">$0<span class="text-lg text-slate-500 font-normal">/mo</span></div>
                    <p class="text-slate-400 text-sm leading-relaxed">List inventory and view heatmaps for free. No monthly retainers. Get addicted to the data.</p>
                </div>
                <!-- Stream 2 (Updated) -->
                <div class="p-8 rounded-lg bg-slate-800 border border-slate-700 relative hover:border-brand-success transition-all group">
                    <div class="absolute -top-4 left-8 bg-green-900 text-green-200 px-3 py-1 rounded-sm text-xs font-bold uppercase group-hover:bg-brand-success group-hover:text-brand-dark transition-colors">Pay For Performance</div>
                    <h3 class="text-2xl font-bold mb-2 font-brand">Pay Per Match</h3>
                    <div class="text-4xl font-mono font-bold text-white mb-4">$150<span class="text-lg text-slate-500 font-normal">/match</span></div>
                    <p class="text-slate-400 text-sm leading-relaxed">Only pay when you match with a verified, Gold-Tier buyer. Zero risk marketing spend.</p>
                </div>
                <!-- Stream 3 -->
                <div class="p-8 rounded-lg bg-slate-800 border border-slate-700 relative hover:border-purple-500 transition-all group">
                    <div class="absolute -top-4 left-8 bg-purple-900 text-purple-200 px-3 py-1 rounded-sm text-xs font-bold uppercase group-hover:bg-purple-600 group-hover:text-white transition-colors">High Margin</div>
                    <h3 class="text-2xl font-bold mb-2 font-brand">Success Fee</h3>
                    <div class="text-4xl font-mono font-bold text-white mb-4">0.5%<span class="text-lg text-slate-500 font-normal">/deal</span></div>
                    <p class="text-slate-400 text-sm leading-relaxed">Transaction fee collected automatically at closing via standard commission instructions.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Updated CTA Builder Section per Rec 2 -->
    <section id="cta-builder" class="py-16 md:py-24 bg-brand-dark border-t border-brand-blue scroll-mt-24" data-audience="builder">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-brand font-bold text-white mb-6">Eliminate Spec Risk. Build on Contract.</h2>
            <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto mb-10 text-white">
                <div class="p-4 border border-brand-blue/30 rounded-lg bg-brand-blue/10 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-brand-blue">0</div>
                    <div class="text-sm opacity-80">Days on Market (DOM)</div>
                </div>
                <div class="p-4 border border-brand-blue/30 rounded-lg bg-brand-blue/10 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-brand-blue">100%</div>
                    <div class="text-sm opacity-80">Reduced Carry Costs</div>
                </div>
                <div class="p-4 border border-brand-blue/30 rounded-lg bg-brand-blue/10 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-brand-blue">100%</div>
                    <div class="text-sm opacity-80">Verified Intent</div>
                </div>
            </div>
            <button onclick="openWaitlistModal()" class="bg-brand-blue text-brand-dark px-8 py-4 rounded-md font-bold shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all border-2 border-brand-blue">Request Builder Access</button>
        </div>
    </section>

    <!-- NEW CTA Buyer Section -->
    <section id="cta-buyer" class="py-16 md:py-24 bg-brand-blue border-t border-brand-light scroll-mt-24" data-audience="buyer">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-brand font-bold text-white mb-6">Stop Searching. Start Receiving.</h2>
            <p class="text-white/80 mb-10 text-lg max-w-2xl mx-auto">Join the only marketplace where builders compete for your business.</p>
            <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto mb-10 text-white">
                <div class="p-4 border border-white/30 rounded-lg bg-white/10 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-white">0</div>
                    <div class="text-sm opacity-80">Bidding Wars</div>
                </div>
                <div class="p-4 border border-white/30 rounded-lg bg-white/10 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-white">100%</div>
                    <div class="text-sm opacity-80">Off-Market Inventory</div>
                </div>
                <div class="p-4 border border-white/30 rounded-lg bg-white/10 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-white">VIP</div>
                    <div class="text-sm opacity-80">Direct Builder Access</div>
                </div>
            </div>
            <button onclick="document.getElementById('demo').scrollIntoView({behavior: 'smooth'})" class="bg-white text-brand-blue px-8 py-4 rounded-md font-bold shadow-lg hover:translate-y-[2px] hover:shadow-md transition-all border-2 border-white">Build My Buy Box</button>
        </div>
    </section>

    <!-- NEW CTA Investor Section -->
    <section id="cta-investor" class="py-16 md:py-24 bg-brand-dark border-t border-purple-900 scroll-mt-24" data-audience="investor">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-brand font-bold text-white mb-6">Capitalize on Velocity.</h2>
            <p class="text-slate-400 mb-10 text-lg max-w-2xl mx-auto">Fund the demand, not the speculation.</p>
            <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto mb-10 text-white">
                <div class="p-4 border border-purple-500/30 rounded-lg bg-purple-900/20 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-purple-400">3x</div>
                    <div class="text-sm opacity-80">Capital Turnover</div>
                </div>
                <div class="p-4 border border-purple-500/30 rounded-lg bg-purple-900/20 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-purple-400">-40%</div>
                    <div class="text-sm opacity-80">Carry Costs</div>
                </div>
                <div class="p-4 border border-purple-500/30 rounded-lg bg-purple-900/20 backdrop-blur-sm">
                    <div class="text-3xl font-bold font-mono mb-1 text-purple-400">Data</div>
                    <div class="text-sm opacity-80">Backed Demand</div>
                </div>
            </div>
            <button onclick="openWaitlistModal()" class="bg-purple-600 text-white px-8 py-4 rounded-md font-bold shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all border-2 border-purple-600 hover:bg-purple-700">Request Data Sample</button>
        </div>
    </section>
    
    <!-- NEW SEO SECTION: Ecosystem Overview (Static Text for Crawlers) -->
    <section id="ecosystem" class="py-16 md:py-24 bg-white border-t border-brand-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-brand font-bold text-brand-dark">A Unified Marketplace</h2>
                <p class="mt-4 text-slate-500 max-w-2xl mx-auto">Connecting the new construction economy in a single, verified ecosystem.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-12 text-left">
                <!-- Buyers Column (Refined per Strategy) -->
                <div>
                    <h3 class="text-xl font-bold text-brand-dark mb-3">For Home Buyers</h3>
                    <p class="text-sm text-slate-600 leading-relaxed mb-4">
                        Newer is the place to find <strong>new construction homes</strong>. Unlike traditional listings, our reverse marketplace lets you post your budget and preferences, allowing top local builders to compete for your business.
                    </p>
                    <ul class="text-sm text-slate-500 space-y-2">
                        <li>
                            <!-- Gold Roof Icon as Bullet -->
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            Access pre-construction deals.
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            Builders compete, you save.
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            No ghost listings, only real homes.
                        </li>
                    </ul>
                </div>
                <!-- Builders Column -->
                <div>
                    <h3 class="text-xl font-bold text-brand-dark mb-3">For Home Builders</h3>
                    <p class="text-sm text-slate-600 leading-relaxed mb-4">
                        Eliminate speculation risk with our <strong>verified buyer demand feed</strong>. Newer provides a live order book of pre-approved clients in your zip code, reducing marketing costs to zero and ensuring faster inventory turnover.
                    </p>
                    <ul class="text-sm text-slate-500 space-y-2">
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            Zero marketing spend
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            Verified proof of funds
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            High-intent leads
                        </li>
                    </ul>
                </div>
                <!-- Investors Column -->
                <div>
                    <h3 class="text-xl font-bold text-brand-dark mb-3">For Early Investors</h3>
                    <p class="text-sm text-slate-600 leading-relaxed mb-4">
                        Unlock liquidity in the residential construction market. Newer's data-driven approach creates a <strong>predictive construction layer</strong>, matching capital with verified demand to optimize IRR and reduce holding costs.
                    </p>
                    <ul class="text-sm text-slate-500 space-y-2">
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            Real-time demand data
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            De-risked asset classes
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" fill="none" class="inline w-4 h-4 text-brand-gold mr-2" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg>
                            Scalable recurring revenue
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="py-16 md:py-24 bg-brand-light border-t border-brand-border" data-audience="buyer,builder,investor">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-brand font-bold text-brand-dark text-center mb-12">Frequently Asked Questions</h2>
            <div class="space-y-4">
                <!-- UPDATED FAQs for SEO Gaps -->
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">What warranties come with Newer homes?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">All builders on Newer must provide a minimum <strong>1-2-10 Year Warranty</strong> (1 year workmanship, 2 years systems, 10 years structural). We verify builder insurance and track quality ratings to protect you from "lemon" homes.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">Can I request interest rate buy-downs in my bid?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">Yes. In your "Buy Box" profile, you can specify financing needs. Many builders on Newer offer <strong>in-house lending incentives</strong>, including permanent rate buy-downs (e.g., 2-1 buydowns) and closing cost credits to lower your monthly payment.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">How do I choose the specific lot or neighborhood?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">You aren't bidding blind. You can set a <strong>Geofence</strong> for your desired school districts or neighborhoods. Builders respond with specific lots (e.g., "Lot 42, Cul-de-sac") that match your location criteria.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="buyer">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">What protections do I have against construction delays?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">Newer contracts include clear <strong>Timeline Guarantees</strong>. Many listings are "Quick Move-In" (QMI) with guaranteed completion dates. For custom builds, we enforce milestone updates to ensure transparency.</p>
                    </div>
                </div>

                <!-- Existing Builder FAQs -->
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="builder">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">Do I pay for leads that don't close?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">The "Unlock Fee" is for the introduction to a verified buyer. We don't refund, but our conversion rate is ~15x higher than Zillow leads because intent is pre-verified.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="builder">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">How verification works?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">We require soft-pull proof of funds via Plaid or a valid pre-approval letter uploaded within the last 30 days before a buyer can receive pitches.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="builder">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">What is the typical time-to-contract?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">Because intent is verified upfront, our average time from Pitch Acceptance to Contract is 7 days, versus the industry average of 45+ days.</p>
                    </div>
                </div>

                <!-- Investor FAQs -->
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="investor">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">How do you prevent platform leakage?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">Anonymity is key. Builders can't ID buyers without paying. Success fees are enforced via title company partnerships and lien recording.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="investor">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">What prevents builders from bypassing the fee?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">We operate on a standard <strong>Referral Commission</strong> model utilizing binding <strong>Commission Instructions</strong> sent to the title company, ensuring our fee is paid automatically from closing funds.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg border border-brand-border overflow-hidden shadow-sm" data-audience="investor">
                    <button class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none" onclick="toggleFaq(this)" aria-expanded="false">
                        <span class="font-bold text-brand-dark">Is this just a lead gen agency?</span>
                        <i data-lucide="chevron-down" class="text-slate-400 faq-icon w-5 h-5"></i>
                    </button>
                    <div class="faq-answer px-6 bg-brand-light">
                        <p class="py-4 text-slate-600 text-sm">No. Lead gen is selling contact info once. We are a marketplace that monetizes the transaction AND the data stream, creating a recurring revenue moat.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-brand-dark pt-16 pb-8 text-slate-400 border-t border-slate-800 text-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-8 lg:gap-12 mb-12">
                <!-- Col 1: Brand -->
                <div class="col-span-2 md:col-span-1">
                    <div class="flex items-start gap-0.5 group cursor-pointer mb-8" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                         <!-- LOGO v8.1 Footer Mode -->
                        <span class="text-3xl font-brand font-semibold tracking-tighter text-white hover:text-white/90 transition-colors leading-none">NEWER</span>
                        <svg viewBox="0 0 24 24" fill="none" class="w-4 h-4 -mt-1 -ml-0.5" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" />
                        </svg>
                    </div>
                    <p class="text-slate-400 mb-8 leading-relaxed pr-4 text-base">
                        Real Estate. Reversed.
                    </p>
                    <div class="flex gap-4">
                        <a href="#" aria-label="Twitter" class="w-10 h-10 rounded-sm bg-slate-800 flex items-center justify-center hover:bg-brand-blue hover:text-brand-dark transition-all"><i data-lucide="twitter" class="w-5 h-5"></i></a>
                        <a href="#" aria-label="LinkedIn" class="w-10 h-10 rounded-sm bg-slate-800 flex items-center justify-center hover:bg-brand-blue hover:text-brand-dark transition-all"><i data-lucide="linkedin" class="w-5 h-5"></i></a>
                        <a href="#" aria-label="Instagram" class="w-10 h-10 rounded-sm bg-slate-800 flex items-center justify-center hover:bg-brand-blue hover:text-brand-dark transition-all"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    </div>
                </div>
                
                <!-- Col 2: Platform -->
                <div>
                    <h4 class="text-white font-bold mb-8 uppercase tracking-wider text-xs font-brand">Platform</h4>
                    <ul class="space-y-5">
                        <li><button onclick="setAudience('buyer'); window.scrollTo(0,0);" class="hover:text-brand-blue transition-colors text-left">For Buyers</button></li>
                        <li><button onclick="setAudience('builder'); window.scrollTo(0,0);" class="hover:text-brand-blue transition-colors text-left">For Builders</button></li>
                        <li><button onclick="setAudience('investor'); window.scrollTo(0,0);" class="hover:text-brand-blue transition-colors text-left">Partners</button></li>
                        <li><a href="#demo" class="hover:text-brand-blue transition-colors">Live Demo</a></li>
                    </ul>
                </div>

                <!-- Col 3: Company -->
                <div>
                    <h4 class="text-white font-bold mb-8 uppercase tracking-wider text-xs font-brand">Company</h4>
                    <ul class="space-y-5">
                        <li><a href="#" class="hover:text-brand-blue transition-colors">About Us</a></li>
                        <li><a href="#testimonials" class="hover:text-brand-blue transition-colors">Success Stories</a></li>
                        <li><a href="#" class="hover:text-brand-blue transition-colors">Careers</a></li>
                        <li><a href="#" class="hover:text-brand-blue transition-colors">Press</a></li>
                        <li><a href="mailto:hello@newer.com" class="hover:text-brand-blue transition-colors">Contact Support</a></li>
                    </ul>
                </div>

                <!-- Col 4: Legal -->
                <div>
                    <h4 class="text-white font-bold mb-8 uppercase tracking-wider text-xs font-brand">Legal</h4>
                    <ul class="space-y-5">
                        <li><a href="#" class="hover:text-brand-blue transition-colors">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-brand-blue transition-colors">Terms of Service</a></li>
                        <li><a href="#" class="hover:text-brand-blue transition-colors">Cookie Policy</a></li>
                        <li><a href="#" class="hover:text-brand-blue transition-colors">Licenses</a></li>
                    </ul>
                </div>
            </div>

            <!-- SEO Text / Bottom Bar -->
            <div class="border-t border-slate-800 pt-8 mt-8">
                <div class="grid md:grid-cols-2 gap-6 items-center">
                    <div class="text-xs text-slate-500 order-2 md:order-1 flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-6">
                        <span>&copy; 2025 Newer LLC. All rights reserved.</span>
                        <div class="flex items-center gap-1.5 opacity-70 hover:opacity-100 transition-opacity" title="Equal Housing Opportunity">
                            <i data-lucide="home" class="w-3 h-3"></i>
                            <span class="text-[10px]">Equal Housing Opportunity</span>
                        </div>
                    </div>
                    <p class="text-xs text-slate-600 leading-relaxed order-1 md:order-2 text-left md:text-right">
                        Newer connects verified home buyers directly with home builders, facilitating off-market deals in Houston, Dallas, Austin, and San Antonio.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Waitlist Modal -->
    <div id="waitlist-modal" class="fixed inset-0 z-[60] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-brand-dark/80 backdrop-blur-sm transition-opacity opacity-0" id="modal-backdrop" onclick="closeWaitlistModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto pointer-events-none">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="pointer-events-auto relative transform overflow-hidden rounded-lg bg-white text-left shadow-2xl transition-all scale-95 opacity-0 sm:w-full sm:max-w-md border-2 border-brand-dark" id="modal-panel">
                    <button onclick="closeWaitlistModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600" aria-label="Close modal"><i data-lucide="x" class="w-5 h-5"></i></button>
                    
                    <!-- Form State -->
                    <div id="modal-form-state" class="p-8">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 rounded-sm bg-yellow-50 flex items-center justify-center text-brand-gold border border-brand-gold/30">
                                <!-- Replaced Rocket with Gold Roof Icon Ticker Style -->
                                <svg viewBox="0 0 24 24" fill="none" class="w-5 h-5" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" />
                                </svg>
                            </div>
                            <h3 id="modal-title" class="text-xl font-brand font-bold text-brand-dark">Get Early Access</h3>
                        </div>
                        <p class="text-sm text-slate-500 mb-6">Join 4,200+ buyers and builders for the Newer launch in your city. Check your email for VIP confirmation.</p>
                        <form id="waitlist-form" onsubmit="handleWaitlistSubmit(event)">
                            <div class="space-y-4">
                                <div><label for="waitlist-email" class="block text-xs font-bold uppercase text-slate-500 mb-1 font-brand">Email</label><input type="email" id="waitlist-email" name="email" required autocomplete="email" class="w-full px-4 py-3 bg-brand-light border border-brand-border rounded-sm focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all text-sm" placeholder="you@example.com"></div>
                                <div><label for="waitlist-zip" class="block text-xs font-bold uppercase text-slate-500 mb-1 font-brand">Zip Code</label><input type="text" id="waitlist-zip" name="zip" required autocomplete="postal-code" class="w-full px-4 py-3 bg-brand-light border border-brand-border rounded-sm focus:outline-none focus:ring-2 focus:ring-brand-blue transition-all text-sm" placeholder="e.g. 78704"></div>
                                <div role="radiogroup" aria-labelledby="role-label">
                                    <label id="role-label" class="block text-xs font-bold uppercase text-slate-500 mb-2 font-brand">I am a...</label>
                                    <div class="grid grid-cols-3 gap-2">
                                        <label class="cursor-pointer"><input type="radio" name="role" value="buyer" class="peer sr-only" checked><div class="px-2 py-3 border border-brand-border rounded-sm text-center text-xs font-bold text-slate-500 peer-checked:bg-brand-dark peer-checked:text-white peer-checked:border-brand-dark hover:bg-slate-50 transition-all">Buyer</div></label>
                                        <label class="cursor-pointer"><input type="radio" name="role" value="builder" class="peer sr-only"><div class="px-2 py-3 border border-brand-border rounded-sm text-center text-xs font-bold text-slate-500 peer-checked:bg-brand-dark peer-checked:text-white peer-checked:border-brand-dark hover:bg-slate-50 transition-all">Builder</div></label>
                                        <label class="cursor-pointer"><input type="radio" name="role" value="investor" class="peer sr-only"><div class="px-2 py-3 border border-brand-border rounded-sm text-center text-xs font-bold text-slate-500 peer-checked:bg-brand-dark peer-checked:text-white peer-checked:border-brand-dark hover:bg-slate-50 transition-all">Investor</div></label>
                                    </div>
                                </div>
                                <button type="submit" class="w-full bg-brand-blue text-white rounded-sm py-3 font-bold hover:bg-blue-600 transition-all shadow-sharp active:translate-y-[2px] active:shadow-none border-2 border-brand-blue text-brand-dark">Secure My Spot</button>
                            </div>
                        </form>
                    </div>

                    <!-- Success State -->
                    <div id="modal-success-state" class="hidden p-10 text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-brand-success text-2xl animate-bounce border border-green-200"><i data-lucide="check" class="w-8 h-8"></i></div>
                        <h3 class="text-2xl font-brand font-bold text-brand-dark mb-2">You're on the list!</h3>
                        <p class="text-slate-500 text-sm mb-8">We'll notify you when Newer launches in your chosen zip code.</p>
                        <button type="button" onclick="closeWaitlistModal()" class="inline-flex w-full justify-center rounded-sm bg-brand-light px-3 py-2 text-sm font-semibold text-brand-dark hover:bg-slate-200 transition-colors border border-brand-border">Close</button>
                    </div>
                    <div id="modal-footer" class="bg-brand-light px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-brand-border"><p class="text-xs text-slate-400 text-center sm:text-right w-full">We respect your privacy. No spam.</p></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JS Logic -->
    <script>
        // --- State Management ---
        let appState = { style: '', persona: '', bedrooms: 3, budget: 500, amenities: [], verified: false, credits: 500 };
        
        // Data for Map
        const heatMapPoints = Array.from({length: 30}, () => ({ x: Math.random(), y: Math.random(), r: 20 + Math.random() * 40 }));
        const lotPoints = Array.from({length: 5}, () => ({ x: Math.random(), y: Math.random() }));
        
        // DOM Elements (Cached)
        let audienceElements;

        // --- Helper for Lazy Loading Scripts ---
        function loadScript(src, callback) {
            if (document.querySelector(`script[src="${src}"]`)) {
                if (callback) callback();
                return;
            }
            const script = document.createElement('script');
            script.src = src;
            script.onload = () => { if (callback) callback(); };
            document.head.appendChild(script);
        }

        // --- Content Configuration ---
        const contentConfig = {
            buyer: {
                heroImage: 'url("https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800&q=80")', // Optimized & Sized
                badge: '<span class="w-1.5 h-1.5 rounded-full bg-brand-blue animate-pulse"></span> The Reverse Market',
                // Updated Hook from Strategy: Mechanism Hook
                title: 'Don\'t Chase Listings.<br><span class="text-brand-blue">Make Builders Bid For You.</span>',
                // Updated Sub-headline/Bridge from Strategy
                desc: 'Newer connects verified buyers directly with top home builders. Simply post your "Buy Box" profile, verify your budget, and receive custom proposals for inventory and off-market homes that match your exact criteria.',
                ctaText: 'Build My Buy Box',
                conceptTitle: 'The Power Shift',
                conceptDesc: 'We flipped the real estate model to put you in control.<br><span class="font-semibold text-brand-dark">Stop begging for viewings. Become the VIP Client.</span>',
                demoTitle: 'Your Personal Market',
                testimonialTitle: 'Success Stories',
                testimonialDesc: 'See how families are skipping the stress and getting offers directly from builders.',
                // Updated "Old Way" List from Strategy
                oldList: '<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">The Active Shopper:</span><p class="text-sm">Refreshing listing apps every 15 minutes.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">The Pain:</span><p class="text-sm">Driving to open houses only to find it\'s sold.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">The Result:</span><p class="text-sm">Competing against 20 other buyers in a bidding war.</p></div></li>',
                // Updated "New Way" List from Strategy
                newList: `<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">The VIP Client:</span><p class="text-sm">Define your dream specs and budget once.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">The Benefit:</span><p class="text-sm">Top builders review your profile and pitch <em>you</em>.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">The Result:</span><p class="text-sm">Direct offers, incentives, and zero competition.</p></div></li>`,
                demoDesc: 'Interact with the <strong>Buyer App</strong> to broadcast your needs. Watch the market respond.',
                revenueTitle: 'Partnership Pricing', revenueDesc: 'Remove the barrier to entry. Build liquidity first.'
            },
            builder: {
                heroImage: 'url("https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800&q=80")',
                badge: '<span class="w-1.5 h-1.5 rounded-full bg-brand-success animate-pulse"></span> Increased Absorption',
                // Updated Hook: Focus on Contract vs Spec
                title: 'Stop Building on Spec.<br><span class="text-brand-success">Start Building on Contract.</span>',
                desc: 'Access a live order book of <strong>verified, pre-approved buyers</strong> in your zip code. Eliminate marketing costs and sell inventory before you even break ground.',
                ctaText: 'View Live Demand Map',
                conceptTitle: 'The Efficiency Revolution',
                conceptDesc: 'Traditional development is gambling. Newer is engineering.<br><span class="font-semibold text-brand-dark">Replace "Hope Marketing" with Direct Sales.</span>',
                demoTitle: 'Demand Command Center',
                testimonialTitle: 'Builder Wins',
                testimonialDesc: 'See how regional developers are clearing inventory 3x faster than the market average.',
                // Updated Lists: Focus on Carry Costs
                oldList: '<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">The "Spec" Gamble:</span><p class="text-sm">Building millions in vertical inventory and praying interest rates don\'t spike.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">The Cost:</span><p class="text-sm">6% Realtor fees + 12 months of hard money carry costs.</p></div></li>',
                newList: `<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">The Order Book:</span><p class="text-sm">See exactly what buyers want before you pour the slab.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">The Profit:</span><p class="text-sm">Zero marketing spend. Reduced carry. Higher IRR.</p></div></li>`,
                demoDesc: 'Watch the <strong>Builder Terminal</strong> populate instantly as real demand flows in from the App.',
                revenueTitle: 'Partnership Pricing', revenueDesc: 'No hidden fees. A partnership model designed to align our success with yours.'
            },
            investor: {
                heroImage: 'url("https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800&q=80")',
                badge: '<span class="w-1.5 h-1.5 rounded-full bg-purple-600 animate-pulse"></span> Market Efficiency',
                // Updated Hook: Focus on Liquidity
                title: 'Real Estate is Illiquid.<br><span class="text-purple-600">Newer is the Fix.</span>',
                desc: 'We replace speculative building with data-driven demand matching. By connecting capital to verified buyers <strong>before</strong> construction starts, we create a negative working capital cycle that supercharges IRR.',
                ctaText: 'Request Data Sample',
                conceptTitle: 'The Velocity Shift',
                conceptDesc: 'Stop trapping capital in vertical inventory.<br><span class="font-semibold text-brand-dark">Turn assets 3x faster by funding the demand, not just the supply.</span>',
                demoTitle: 'The Liquidity Engine',
                testimonialTitle: 'Market Validation',
                testimonialDesc: 'Data-driven validation of the high-velocity matching engine and liquidity model.',
                // Updated Lists: Focus on Capital Lockup vs Velocity
                oldList: '<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">Capital Lockup:</span><p class="text-sm">Cash trapped in dry wall and dirt for 12-18 months waiting for a sale.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><i data-lucide="x" class="w-5 h-5 text-red-400"></i></div><div><span class="font-bold text-slate-800">The Risk:</span><p class="text-sm">Exposure to market shifts while inventory sits stagnant.</p></div></li>',
                newList: `<li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">Velocity of Money:</span><p class="text-sm">Presold inventory turns capital 3x faster per year.</p></div></li><li class="flex items-start gap-3"><div class="mt-1 min-w-[20px]"><svg viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-brand-gold" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="#FBBF24" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg></div><div><span class="font-bold text-brand-dark">De-Risked Yield:</span><p class="text-sm">Returns secured by buyer deposits, not market speculation.</p></div></li>`,
                demoDesc: 'Watch verified demand monetize instantly in the live <strong>Order Book</strong>.',
                revenueTitle: 'Unicorn Unit Economics', revenueDesc: 'Revenue streams create a scalable, recurring income model with high LTV.'
            }
        };
        
        // --- Mock AI Logic (Reliable for Demos) ---
        const mockBios = [
            "Professional Couple seeking a modern sanctuary. Pre-approved and ready to move quickly for the right home office setup.",
            "Growing family prioritizing school district and space. Looking for a functional layout with room to expand.",
            "Design-conscious buyer seeking architectural uniqueness. Flexible closing timeline for the perfect modern aesthetic."
        ];
        
        const mockPitches = [
            "We have a lot in Phase 2 perfectly suited for your custom plan. Let's discuss a build-to-suit option.",
            "I have a spec home finishing in 45 days that hits all your requirements. $10k incentive if under contract this month.",
            "Your budget aligns with our new 'Modern Series'. Verify your funds and let's schedule a hard hat tour."
        ];

        const mockIntel = "Analysis: High demand for Home Offices in this zip code suggests shifting to Plan B layouts. Recommendation: Increase spec starts on 4bd models to capture verified $500k+ buyers.";
        
        // --- Testimonials Data (Updated per Strategy) ---
        const testimonialsData = [
            {
                roles: ['buyer', 'investor'],
                type: 'Verified Match',
                bgClass: 'bg-slate-50 border-slate-200',
                badgeClass: 'bg-brand-success text-white border-brand-success', // Success Green
                icon: 'user',
                iconBg: 'bg-white text-slate-400 border border-slate-200',
                name: 'Sarah & Mark T.',
                sub: 'Austin, TX',
                // Updated Outcome Testimonial
                quote: '"We spent 6 months losing bids. On Newer, we built a profile on Tuesday and had three builder offers by Friday. We signed a contract for a home that wasn\'t even listed yet."',
                textClass: 'text-slate-600'
            },
            {
                roles: ['buyer', 'investor'],
                type: 'First-Time Buyer',
                bgClass: 'bg-slate-50 border-slate-200',
                badgeClass: 'bg-blue-100 text-brand-blue border border-blue-200',
                icon: 'graduation-cap',
                iconBg: 'bg-white text-slate-400 border border-slate-200',
                name: 'Jason L.',
                sub: 'Denver, CO',
                quote: '"I thought I was priced out. A builder saw my \'Verify\' badge and offered me a pre-construction deal on a townhome if I could close quickly."',
                textClass: 'text-slate-600'
            },
            {
                roles: ['builder', 'investor'],
                type: 'Production Builder',
                bgClass: 'bg-brand-dark border-slate-700',
                badgeClass: 'bg-brand-success text-brand-dark border-brand-success', // High Contrast
                icon: 'hard-hat',
                iconBg: 'bg-slate-700 text-slate-400',
                name: 'James R.',
                sub: 'VP Sales, Regional Builder',
                quote: '"I searched Newer for buyers with a $550k budget in that zip code, found 3 matches, and pitched them. Sold it that weekend with zero marketing spend."',
                nameClass: 'text-white',
                textClass: 'text-slate-300'
            },
            {
                roles: ['builder', 'investor'],
                type: 'Home Builder',
                bgClass: 'bg-brand-dark border-slate-700',
                badgeClass: 'bg-brand-success text-brand-dark border-brand-success', // High Contrast
                icon: 'compass',
                iconBg: 'bg-slate-700 text-slate-400',
                name: 'Elena V.',
                sub: 'Owner, Boutique Homes',
                quote: '"The \'Lead Unlock\' feature alone saved us $20k in ad spend. We connect with clients who already want a custom build in our territory."',
                nameClass: 'text-white',
                textClass: 'text-slate-300'
            },
            {
                roles: ['investor'],
                type: 'The Investor',
                bgClass: 'bg-purple-50 border-purple-100',
                badgeClass: 'bg-purple-200 text-purple-700',
                icon: 'line-chart',
                iconBg: 'bg-white text-purple-600 border border-purple-100',
                name: 'Marcus T.',
                sub: 'Partner, PropTech VC',
                quote: '"By inverting the model, Newer solves the liquidity crisis in new construction. It\'s not just lead gen; it\'s a market maker."',
                nameClass: 'text-purple-900',
                textClass: 'text-purple-800'
            }
        ];

        function renderTestimonials(currentRole) {
            const container = document.getElementById('testimonials-grid');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Filter and Map
            testimonialsData.forEach(item => {
                // If item's roles include the current role, render it
                if (item.roles.includes(currentRole)) {
                    const card = document.createElement('div');
                    card.className = `${item.bgClass} p-8 rounded-lg border relative shadow-sm hover:shadow-sharp transition-all animate-[fadeIn_0.5s_ease-out]`;
                    
                    // Added Verified Deal badge next to name for credibility
                    const verifiedBadge = `<div class="flex items-center gap-1 text-[10px] text-brand-success font-bold mt-1 font-mono"><svg viewBox="0 0 24 24" fill="none" class="w-4 h-4 text-brand-success" xmlns="http://www.w3.org/2000/svg"><path d="M5 15 L12 7 L19 15" stroke="currentColor" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter" /></svg> Verified Deal</div>`;
                    
                    card.innerHTML = `
                        <div class="absolute -top-4 right-8 ${item.badgeClass} px-3 py-1 rounded-sm text-xs font-bold uppercase shadow-sm border ${item.badgeClass.includes('border') ? '' : 'border-transparent'}">${item.type}</div>
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-12 h-12 ${item.iconBg} rounded-sm overflow-hidden flex items-center justify-center text-xl shadow-sm shrink-0">
                                <i data-lucide="${item.icon}" class="w-5 h-5"></i>
                            </div>
                            <div>
                                <h4 class="font-bold ${item.nameClass || 'text-brand-dark'} font-brand">${item.name}</h4>
                                <p class="text-xs text-slate-500 font-sans">${item.sub}</p>
                                ${verifiedBadge}
                            </div>
                        </div>
                        <p class="${item.textClass} italic font-sans">${item.quote}</p>
                    `;
                    container.appendChild(card);
                }
            });
            // Re-run lucide icons for newly added content
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function generateBuyerBio() {
            const btn = document.getElementById('btn-generate-bio');
            const container = document.getElementById('ai-bio-container');
            const text = document.getElementById('ai-bio-text');
            
            btn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i> Generating...'; btn.disabled = true;
            lucide.createIcons();
            
            setTimeout(() => {
                const randomBio = mockBios[Math.floor(Math.random() * mockBios.length)];
                container.classList.remove('hidden');
                text.innerText = `"${randomBio}"`;
                btn.innerHTML = '<span>âœ¨</span> Regenerate Bio'; btn.disabled = false;
            }, 1200);
        }

        function generateBuilderPitch() {
            const btn = document.getElementById('btn-ai-pitch');
            const area = document.getElementById('pitch-message');
            
            btn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i>'; btn.disabled = true;
            lucide.createIcons();
            
            setTimeout(() => {
                area.value = mockPitches[Math.floor(Math.random() * mockPitches.length)];
                btn.innerHTML = '<span>âœ¨</span> AI Draft'; btn.disabled = false;
            }, 800);
        }

        function generateMarketIntel() {
            const btn = document.getElementById('btn-ai-intel');
            const text = document.getElementById('ai-intel-text');
            
            btn.innerText = 'Analyzing...'; btn.disabled = true;
            
            setTimeout(() => {
                text.innerText = mockIntel;
                text.classList.add('text-white', 'font-medium');
                btn.innerText = 'Analyze'; btn.disabled = false;
            }, 1500);
        }

        // --- Helper Functions ---
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => { clearTimeout(timeout); func(...args); };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function toggleFaq(btn) {
            const answer = btn.nextElementSibling; 
            const icon = btn.querySelector('.faq-icon');
            const isExpanded = btn.getAttribute('aria-expanded') === 'true';
            btn.setAttribute('aria-expanded', !isExpanded);
            if(answer.classList.contains('open')) { 
                answer.classList.remove('open'); 
                icon.style.transform = 'rotate(0deg)';
            } else { 
                answer.classList.add('open'); 
                icon.style.transform = 'rotate(180deg)';
            }
        }

        function startMarketSimulation() {
            setInterval(() => {
                const activeEl = document.getElementById('stat-active'); 
                if(!activeEl) return;
                let current = parseInt(activeEl.innerText.replace(/,/g, ''));
                current += Math.random() > 0.6 ? 1 : (Math.random() > 0.5 ? -1 : 0);
                activeEl.innerText = current.toLocaleString();
            }, 3000);
        }

        function loadState() {
            const saved = localStorage.getItem('newerState');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    // Simple validation to ensure it's an object before spreading
                    if (parsed && typeof parsed === 'object') {
                        appState = { ...appState, ...parsed };
                    }
                    
                    if (appState.style) {
                        document.querySelectorAll('.style-btn').forEach(btn => { if(btn.innerText.includes(appState.style)) btn.classList.add('ring-2', 'ring-brand-blue', 'bg-blue-50'); });
                        document.getElementById('step-1').classList.add('hidden'); document.getElementById('step-2').classList.remove('hidden');
                    }
                    if (appState.amenities) {
                        appState.amenities.forEach(am => {
                            document.querySelectorAll('.amenity-btn').forEach(btn => { if(btn.innerText.includes(am)) { btn.classList.add('border-brand-blue', 'text-brand-blue', 'bg-blue-50'); btn.classList.remove('border-stone-200'); } });
                        });
                    }
                    updateDashboardPreview();
                } catch (e) { console.error("State load error:", e); }
            }
        }

        // --- Demo Flow Logic ---
        function setAudience(role) {
            // Update URL State
            try {
                const url = new URL(window.location);
                url.searchParams.set('audience', role);
                window.history.pushState({}, '', url);
            } catch (e) {
                console.warn('History API not supported in this environment');
            }

            // Update Buttons Logic Fixed
            document.querySelectorAll('.role-btn').forEach(btn => {
                // Fixed logic: explicitly handle 'Partners' text matching 'investor' role
                const btnText = btn.innerText.toLowerCase();
                const isActive = (btnText.includes(role) || 
                                (role === 'buyer' && btnText.includes('buyer')) || 
                                (role === 'builder' && btnText.includes('builder')) ||
                                (role === 'investor' && btnText.includes('partner'))); // Critical Fix
                
                if (isActive) {
                    btn.classList.add('active', 'bg-brand-dark', 'text-white', 'border-brand-dark');
                    btn.classList.remove('bg-brand-light', 'text-slate-500', 'border-brand-border');
                    btn.setAttribute('aria-selected', 'true');
                } else {
                    btn.classList.remove('active', 'bg-brand-dark', 'text-white', 'border-brand-dark');
                    btn.classList.add('bg-brand-light', 'text-slate-500', 'border-brand-border');
                    btn.setAttribute('aria-selected', 'false');
                }
            });

            // Update Content
            const config = contentConfig[role] || contentConfig['buyer'];
            const heroSection = document.getElementById('hero');
            const badgeEl = document.getElementById('hero-badge');
            const titleEl = document.getElementById('hero-title');
            const descEl = document.getElementById('hero-desc');
            const ctaEl = document.getElementById('hero-cta-btn');
            
            const conceptTitleEl = document.getElementById('concept-title');
            const conceptDescEl = document.getElementById('concept-desc');
            const demoTitleEl = document.getElementById('demo-title');
            const demoDescEl = document.getElementById('demo-desc');
            // Testimonial Title/Desc handled here, but grid is handled by renderTestimonials below
            const testimonialTitleEl = document.getElementById('testimonial-title');
            const testimonialDescEl = document.getElementById('testimonial-desc');
            const conceptOldListEl = document.getElementById('concept-old-list');
            const conceptNewListEl = document.getElementById('concept-new-list');
            const revenueTitleEl = document.getElementById('revenue-title');
            const revenueDescEl = document.getElementById('revenue-desc');

            if(heroSection) heroSection.style.backgroundImage = config.heroImage;
            if(badgeEl) badgeEl.innerHTML = config.badge;
            if(titleEl) titleEl.innerHTML = config.title;
            if(descEl) descEl.innerHTML = config.desc;
            if(ctaEl) ctaEl.innerText = config.ctaText;
            
            if(conceptTitleEl) conceptTitleEl.innerText = config.conceptTitle;
            if(conceptDescEl) conceptDescEl.innerHTML = config.conceptDesc;
            if(demoTitleEl) demoTitleEl.innerText = config.demoTitle;
            if(demoDescEl) demoDescEl.innerHTML = config.demoDesc;
            if(testimonialTitleEl) testimonialTitleEl.innerText = config.testimonialTitle;
            if(testimonialDescEl) testimonialDescEl.innerText = config.testimonialDesc;
            if(conceptOldListEl) conceptOldListEl.innerHTML = config.oldList;
            if(conceptNewListEl) conceptNewListEl.innerHTML = config.newList;
            if(revenueTitleEl) revenueTitleEl.innerText = config.revenueTitle;
            if(revenueDescEl) revenueDescEl.innerText = config.revenueDesc;

            // Update Audience Elements (Sections)
            audienceElements.forEach(el => {
                const allowedRoles = el.getAttribute('data-audience').split(',').map(s => s.trim());
                // Special check for testimonials section which handles its own internal grid now
                if(el.id === 'testimonials') {
                    el.classList.remove('hidden'); // Always show container, filter inside
                } else if(allowedRoles.includes(role)) { 
                    el.classList.remove('hidden'); 
                } else { 
                    el.classList.add('hidden'); 
                }
            });

            // Trigger Dynamic Testimonial Render
            renderTestimonials(role);
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function selectStyle(style) {
            appState.style = style;
            document.querySelectorAll('.style-btn').forEach(btn => {
                if(btn.innerText.includes(style)) btn.classList.add('ring-2', 'ring-brand-blue', 'bg-blue-50');
                else btn.classList.remove('ring-2', 'ring-brand-blue', 'bg-blue-50');
            });
            setTimeout(() => nextStep('2'), 400);
        }

        function setPersona(type) {
            appState.persona = type;
            document.querySelectorAll('.persona-btn').forEach(btn => {
               if(btn.innerText === type) { btn.classList.add('bg-brand-dark', 'text-white', 'border-brand-dark'); btn.classList.remove('bg-white', 'text-slate-600'); }
               else { btn.classList.remove('bg-brand-dark', 'text-white', 'border-brand-dark'); btn.classList.add('bg-white', 'text-slate-600'); }
            });
        }

        function updateRange(type, val) {
            if(type === 'bed') { appState.bedrooms = val; document.getElementById('bed-val').innerText = val; }
            if(type === 'budget') { appState.budget = val; document.getElementById('budget-val').innerText = `$${val}k`; }
            updateDashboardPreview();
        }

        function toggleAmenity(btn, name) {
            if(appState.amenities.includes(name)) {
                appState.amenities = appState.amenities.filter(a => a !== name);
                btn.classList.remove('border-brand-blue', 'text-brand-blue', 'bg-blue-50');
            } else {
                if(appState.amenities.length >= 3) return;
                appState.amenities.push(name);
                btn.classList.add('border-brand-blue', 'text-brand-blue', 'bg-blue-50');
                // Simulate "Match Found" notification on phone
                notifyPhone("Market Update", `3 Builders match your ${name} request.`);
            }
            updateDashboardPreview();
        }

        function nextStep(id) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`step-${id}`).classList.remove('hidden');
        }

        function verifyUser(e) {
            const btn = e.currentTarget;
            btn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i> Confirming Status...';
            lucide.createIcons();
            
            setTimeout(() => {
                appState.verified = true;
                nextStep('4');
                triggerBuilderNotification();
            }, 1500);
        }

        function triggerBuilderNotification() {
            // Target the specific container for the builder dashboard body
            const dashboardBody = document.getElementById('builder-dashboard-body'); // Changed selector
            if (!dashboardBody) return;

            const notification = document.createElement('div');
            notification.id = 'builder-notification-toast';
            // Positioning absolute within the relative dashboard container
            notification.className = 'absolute top-4 left-4 right-4 bg-brand-gold text-brand-dark p-4 rounded-lg shadow-sharp-gold z-50 cursor-pointer animate-[toastSlideDown_0.5s_ease-out] flex items-center justify-between hover:bg-yellow-500 transition-colors border-2 border-brand-dark group';
            notification.innerHTML = `
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i data-lucide="crown" class="w-5 h-5 text-brand-dark animate-pulse"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm font-brand">New VIP Buyer!</h4>
                        <p class="text-xs text-brand-dark font-mono">Budget: $${appState.budget}k â€¢ Gold Status</p>
                    </div>
                </div>
                <div class="bg-brand-dark text-white text-[10px] font-bold px-3 py-1.5 rounded-sm shadow-sm group-hover:shadow-md transition-all">VIEW</div>
            `;
            
            notification.onclick = function() {
                // Animation out? Just remove for snapiness
                this.remove();
                revealBuilderCard();
            };
            
            dashboardBody.appendChild(notification);
            lucide.createIcons();
        }

        function updateDashboardPreview() {
            const styleEl = document.getElementById('dash-card-style');
            const configEl = document.getElementById('dash-card-config');
            const budgetEl = document.getElementById('dash-card-budget');
            const amenEl = document.getElementById('dash-card-amenities');

            if(styleEl) styleEl.innerText = appState.style || 'Pending';
            if(configEl) configEl.innerText = `${appState.bedrooms}bd / ${Math.ceil(appState.bedrooms * 0.7)}ba`;
            if(budgetEl) budgetEl.innerText = `$${appState.budget}k`;
            if(amenEl) amenEl.innerText = appState.amenities.join(', ') || 'None';
        }

        function revealBuilderCard() {
            const card = document.getElementById('user-card-overlay');
            if(card) card.classList.remove('translate-y-full');
            
            // Update stats
            const activeEl = document.getElementById('stat-active'); 
            if(activeEl) {
                let current = parseInt(activeEl.innerText.replace(/,/g, ''));
                activeEl.innerText = (current + 1).toLocaleString();
            }
        }

        function unlockLead() {
            if(appState.credits < 50) return alert("Low Credits");
            appState.credits -= 50;
            const creditsEl = document.getElementById('stat-credits');
            if(creditsEl) creditsEl.innerText = appState.credits;
            
            const unlockArea = document.getElementById('unlock-area');
            if(unlockArea) {
                unlockArea.innerHTML = `
                    <div class="bg-slate-800 rounded-sm p-3 border border-slate-600 flex flex-col gap-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-[10px] text-slate-400 uppercase">Contact Info</div>
                                <div class="text-sm font-bold text-white">James Smith â€¢ (512) 555-0122</div>
                                <div class="text-xs text-brand-blue">Verified â€¢ 750+ Credit Score</div>
                            </div>
                            <div class="w-8 h-8 bg-brand-success rounded-full flex items-center justify-center text-brand-dark"><i data-lucide="check" class="w-4 h-4"></i></div>
                        </div>
                        <button onclick="openPitchModal('8942')" class="w-full py-2 bg-brand-gold hover:bg-yellow-500 text-brand-dark font-bold rounded-sm text-xs flex items-center justify-center gap-2 transition-colors">
                            <i data-lucide="send" class="w-3 h-3"></i> Send Pitch Now
                        </button>
                    </div>
                `;
                lucide.createIcons();
            }
            notifyPhone("Profile Viewed", "A Builder just unlocked your contact info!");
        }

        function openPitchModal(id) {
            const modal = document.getElementById('pitch-modal');
            const targetId = document.getElementById('pitch-target-id');
            if(modal && targetId) {
                modal.classList.remove('hidden');
                targetId.innerText = '#' + id;
            }
        }

        function closePitchModal() {
            const modal = document.getElementById('pitch-modal');
            if(modal) modal.classList.add('hidden');
        }

        function sendPitch() {
            const modal = document.getElementById('pitch-modal');
            if(modal) modal.classList.add('hidden');
            
            notifyPhone("New Offer!", "Builder Pitch: Custom Lot in Phase 2.");
            addBuyerPitchToPhone();
            
            // Visual feedback on list items (Simulated on the first item for demo)
            const firstPitchBtn = document.querySelector('.pitch-btn');
            if(firstPitchBtn) {
                firstPitchBtn.innerText = "Sent";
                firstPitchBtn.classList.remove('bg-brand-blue', 'hover:bg-blue-600', 'text-brand-dark');
                firstPitchBtn.classList.add('bg-green-600', 'text-white', 'cursor-default');
                firstPitchBtn.disabled = true;
            }
        }

        function acceptPitch() {
            // Create Success Overlay inside Phone
            const container = document.getElementById('buyer-screen-container');
            if(!container) return;

            const overlay = document.createElement('div');
            overlay.id = 'success-overlay';
            overlay.className = 'absolute inset-0 bg-white/95 backdrop-blur-sm z-50 flex flex-col items-center justify-center p-6 text-center animate-[fadeIn_0.5s_ease-out]';
            overlay.innerHTML = `
                <div class="w-24 h-24 mb-6 relative">
                     <div class="absolute inset-0 border-4 border-brand-blue rounded-full opacity-20 animate-ping"></div>
                     <div class="w-full h-full bg-green-50 rounded-full flex items-center justify-center border-2 border-green-100 shadow-xl">
                        <i data-lucide="check" class="w-10 h-10 text-brand-success animate-[pulse_2s_infinite]"></i>
                     </div>
                </div>
                <h3 class="text-3xl font-brand font-bold text-brand-dark mb-2 tracking-tight">It's a Match!</h3>
                <p class="text-sm text-slate-500 mb-8 leading-relaxed">
                    Congratulations! You've accepted the pitch for <strong>The "Hilltop" Plan</strong>.
                    <br><br>
                    <span class="block text-xs bg-slate-50 border border-brand-border p-2 rounded-sm text-slate-400 font-mono">Builder notified. Next step: Contract.</span>
                </p>
                <button onclick="resetDemo()" class="w-full py-3.5 bg-brand-dark text-white rounded-md font-bold text-sm shadow-sharp hover:translate-y-[2px] hover:shadow-none transition-all">Start New Demo</button>
            `;
            container.appendChild(overlay);
            
            // Lazy load Confetti only on success
            loadScript("https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js", () => {
                if (typeof confetti === 'function') {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#006AFF', '#FBBF24'] // PropTech Blue and Verified Gold
                    });
                }
            });
            
            // NEW: Notify Builder
            setTimeout(triggerBuilderSaleSuccess, 1500);
            lucide.createIcons();
        }
        
        function triggerBuilderSaleSuccess() {
            const dashboardBody = document.getElementById('builder-dashboard-body');
            if (!dashboardBody) return;

            // Remove previous toasts
            const prevToast = document.getElementById('builder-notification-toast');
            if(prevToast) prevToast.remove();

            // Check if overlay already exists to prevent duplicates
            if(document.getElementById('builder-sale-overlay')) return;

            const saleAlert = document.createElement('div');
            saleAlert.id = 'builder-sale-overlay';
            // Using glass-dark class for uniformity
            saleAlert.className = 'absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4/5 bg-brand-dark/95 border-2 border-brand-gold rounded-lg shadow-sharp-gold z-50 p-6 text-center animate-[fadeIn_0.5s_ease-out] backdrop-blur-xl';
            saleAlert.innerHTML = `
                <div class="mb-4 stamp-container animate-stamp">
                    SOLD
                </div>
                <h3 class="text-xl font-bold text-white mb-1 uppercase tracking-wider font-brand">Sale Pending</h3>
                <p class="text-xs text-slate-400 mb-6">Unit Presold to Buyer #8942</p>
                
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="bg-slate-800 p-3 rounded-sm border border-slate-700">
                        <div class="text-[10px] uppercase text-slate-500 font-bold">Marketing Spend</div>
                        <div class="text-xl font-mono font-bold text-brand-success">$0.00</div>
                    </div>
                    <div class="bg-slate-800 p-3 rounded-sm border border-slate-700">
                        <div class="text-[10px] uppercase text-slate-500 font-bold">Days on Market</div>
                        <div class="text-xl font-mono font-bold text-brand-success">0</div>
                    </div>
                </div>
                <div class="text-[10px] text-slate-500 italic animate-dust">"The Reverse Market" at work.</div>
            `;
            
            dashboardBody.appendChild(saleAlert);
            
            // Trigger Gold Confetti!
            loadScript("https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js", () => {
                if (typeof confetti === 'function') {
                    confetti({
                        particleCount: 150,
                        spread: 100,
                        origin: { y: 0.6 },
                        colors: ['#006AFF', '#FBBF24'] // PropTech Blue and Verified Gold
                    });
                }
            });
        }

        function addBuyerPitchToPhone() {
            const container = document.getElementById('buyer-pitches-container');
            if(!container) return;
            
            container.innerHTML = `
                <div class="animate-[fadeIn_0.5s_ease-out]">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] font-bold uppercase text-slate-400">Incoming Matches</span>
                        <span class="bg-brand-blue text-brand-dark text-[10px] font-bold px-1.5 rounded-sm animate-pulse">1</span>
                    </div>
                    <div class="bg-white p-3 rounded-lg border border-brand-dark/10 shadow-sharp relative overflow-hidden group cursor-pointer hover:shadow-none hover:translate-y-[2px] transition-all">
                        <div class="absolute top-0 left-0 w-1 h-full bg-brand-blue"></div>
                        <div class="flex justify-between items-start mb-2 pl-2">
                            <div>
                                <div class="text-[10px] font-bold text-brand-blue uppercase tracking-wider mb-0.5">Custom Pitch</div>
                                <h4 class="font-bold text-brand-dark text-sm font-brand">The "Hilltop" Plan</h4>
                            </div>
                            <div class="w-8 h-8 rounded-sm bg-slate-100 flex items-center justify-center text-slate-400">
                                <i data-lucide="home" class="w-4 h-4"></i>
                            </div>
                        </div>
                        <p class="text-[10px] text-slate-500 pl-2 mb-3 leading-relaxed">
                            "Based on your budget of $${appState.budget}k, we can offer Lot 42 with the ${appState.style || 'Modern'} elevation..."
                        </p>
                        <div class="flex gap-2 pl-2">
                            <button onclick="acceptPitch()" class="flex-1 py-1.5 bg-brand-dark text-white text-[10px] font-bold rounded-sm hover:bg-slate-800 transition-colors">Accept Pitch</button>
                            <button class="px-3 py-1.5 bg-slate-100 text-slate-500 text-[10px] font-bold rounded-sm hover:bg-slate-200 transition-colors">Decline</button>
                        </div>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        function resetDemo() {
            // Reset state
            appState = { style: '', persona: '', bedrooms: 3, budget: 500, amenities: [], verified: false, credits: 500 };
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            const step1 = document.getElementById('step-1');
            if(step1) step1.classList.remove('hidden');
            
            const overlayCard = document.getElementById('user-card-overlay');
            if(overlayCard) overlayCard.classList.add('translate-y-full');
            
            // Remove success overlay if exists
            const overlay = document.getElementById('success-overlay');
            if(overlay) overlay.remove();

            // Remove builder sale overlay if exists (Builder side)
            const builderOverlay = document.getElementById('builder-sale-overlay');
            if(builderOverlay) builderOverlay.remove();

            // Reset UI bits
            document.querySelectorAll('.style-btn').forEach(btn => btn.classList.remove('ring-2', 'ring-brand-blue', 'bg-blue-50'));
            document.querySelectorAll('.amenity-btn').forEach(btn => btn.classList.remove('border-brand-blue', 'text-brand-blue', 'bg-blue-50'));
            
            const creditsEl = document.getElementById('stat-credits');
            if(creditsEl) creditsEl.innerText = "500";
            
            const unlockArea = document.getElementById('unlock-area');
            if(unlockArea) unlockArea.innerHTML = '<button onclick="unlockLead()" id="btn-unlock" class="w-full py-3 bg-brand-blue hover:bg-blue-600 text-brand-dark font-bold rounded-sm shadow-sharp-blue text-sm transition-all flex items-center justify-center gap-2"><i data-lucide="lock-open" class="w-4 h-4"></i> UNLOCK CONTACT DETAILS (50 Credits)</button>';
            lucide.createIcons();
            
            // Clear notifications
            const noteContainer = document.getElementById('phone-notifications');
            if(noteContainer) noteContainer.innerHTML = '';
            
            // Reset Pitches
            const pitchContainer = document.getElementById('buyer-pitches-container');
            if(pitchContainer) {
                pitchContainer.innerHTML = `
                    <div class="p-4 rounded-lg border border-slate-100 bg-slate-50 text-center">
                        <p class="text-[10px] text-slate-400 italic">Waiting for builder proposals...</p>
                        <div class="mt-2 flex justify-center gap-1">
                            <div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce"></div>
                            <div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                `;
            }
            
            updateDashboardPreview();
        }

        // --- Notification System ---
        function notifyPhone(title, msg) {
            const container = document.getElementById('phone-notifications');
            if(!container) return;
            
            const el = document.createElement('div');
            el.className = 'w-full bg-white/95 backdrop-blur shadow-lg rounded-lg p-3 border border-slate-100 flex items-start gap-3 transform translate-y-[-10px] opacity-0 transition-all duration-300';
            el.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-blue-100 shrink-0 flex items-center justify-center text-blue-600 text-xs"><i data-lucide="bell" class="w-4 h-4"></i></div>
                <div><h4 class="text-xs font-bold text-stone-900">${title}</h4><p class="text-[10px] text-stone-500 leading-tight mt-0.5">${msg}</p></div>
            `;
            container.appendChild(el);
            lucide.createIcons();
            
            // Animation In
            requestAnimationFrame(() => { el.classList.remove('translate-y-[-10px]', 'opacity-0'); });
            
            // Remove after 4s
            setTimeout(() => {
                el.classList.add('opacity-0', 'translate-y-[-10px]');
                setTimeout(() => el.remove(), 300);
            }, 4000);
        }

        // Add drawMap function
        function drawMap() {
            const canvas = document.getElementById('demandMap');
            if(!canvas) return;
            
            // Ensure parent has dimensions
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            
            const ctx = canvas.getContext('2d');
            
            // Clear/Background
            ctx.fillStyle = '#0F172A'; // Builder Slate
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw Heatmap (Demand)
            heatMapPoints.forEach(p => {
                const x = p.x * canvas.width;
                const y = p.y * canvas.height;
                const grad = ctx.createRadialGradient(x, y, 0, x, y, p.r);
                grad.addColorStop(0, 'rgba(251, 191, 36, 0.4)'); // brand-gold
                grad.addColorStop(1, 'rgba(251, 191, 36, 0)');
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(x, y, p.r, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw Lots (Supply)
            lotPoints.forEach(p => {
                const x = p.x * canvas.width;
                const y = p.y * canvas.height;
                ctx.fillStyle = '#10B981'; // success emerald
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Pulse effect ring
                ctx.strokeStyle = 'rgba(16, 185, 129, 0.5)';
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.stroke();
            });
        }

        const debouncedDraw = debounce(() => {
             const mapView = document.getElementById('dashboard-map-view'); 
             const intelView = document.getElementById('dashboard-intel-view');
             if (mapView && !mapView.classList.contains('hidden')) drawMap();
             if (intelView && !intelView.classList.contains('hidden') && intelChartInstance) intelChartInstance.resize();
        }, 100);
        window.addEventListener('resize', debouncedDraw);

        // --- View Toggles ---
        function toggleDashboardView(view) {
            const listBtn = document.getElementById('view-list-btn');
            const mapBtn = document.getElementById('view-map-btn');
            const intelBtn = document.getElementById('view-intel-btn');
            
            const listView = document.getElementById('dashboard-list-view');
            const mapView = document.getElementById('dashboard-map-view');
            const intelView = document.getElementById('dashboard-intel-view');

            // Reset all buttons first to remove lingering active classes
            [listBtn, mapBtn, intelBtn].forEach(btn => {
                btn.classList.remove('bg-brand-gold', 'bg-slate-600', 'text-brand-dark', 'text-white');
                btn.classList.add('text-slate-400');
            });

            // Hide all views initially
            listView.classList.add('hidden');
            mapView.classList.add('hidden');
            intelView.classList.add('hidden');

            if(view === 'list') {
                listView.classList.remove('hidden');
                listBtn.classList.remove('text-slate-400');
                listBtn.classList.add('bg-brand-gold', 'text-brand-dark');
            } else if (view === 'intel') {
                intelView.classList.remove('hidden');
                intelBtn.classList.remove('text-slate-400');
                intelBtn.classList.add('bg-slate-600', 'text-white');
                // Lazy Load Chart.js
                loadScript("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js", () => {
                    initChart();
                });
            } else {
                mapView.classList.remove('hidden');
                mapBtn.classList.remove('text-slate-400');
                mapBtn.classList.add('bg-slate-600', 'text-white');
                requestAnimationFrame(() => drawMap()); 
            }
        }

        function selectPitch(el, type) {
            document.querySelectorAll('.pitch-opt').forEach(opt => opt.classList.remove('border-brand-gold', 'bg-slate-600'));
            el.classList.add('border-brand-gold', 'bg-slate-600');
        }

        // --- Waitlist Logic ---
        function openWaitlistModal() {
            const modal = document.getElementById('waitlist-modal');
            const panel = document.getElementById('modal-panel');
            const backdrop = document.getElementById('modal-backdrop');
            
            if(modal) modal.classList.remove('hidden');
            setTimeout(() => {
                if(backdrop) backdrop.classList.remove('opacity-0');
                if(panel) panel.classList.remove('opacity-0', 'scale-95');
            }, 10);
        }

        function closeWaitlistModal() {
            const modal = document.getElementById('waitlist-modal');
            const panel = document.getElementById('modal-panel');
            const backdrop = document.getElementById('modal-backdrop');
            
            if(panel) panel.classList.add('opacity-0', 'scale-95');
            if(backdrop) backdrop.classList.add('opacity-0');
            setTimeout(() => { if(modal) modal.classList.add('hidden'); }, 300);
        }

        function handleWaitlistSubmit(e) {
            e.preventDefault();
            const btn = e.submitter;
            btn.classList.add('animate-pulse');
            
            const formState = document.getElementById('modal-form-state');
            const successState = document.getElementById('modal-success-state');
            
            if(formState) formState.classList.add('hidden');
            if(successState) successState.classList.remove('hidden');
        }

        // --- Feed Simulation ---
        function addFeedItem() {
            const container = document.getElementById('dashboard-feed');
            if(!container) return; // Safety check
            
            const id = Math.floor(Math.random() * 8999) + 1000;
            const budget = Math.floor(Math.random() * 500) + 300;
            const item = document.createElement('div');
            item.className = 'grid grid-cols-12 gap-2 p-3 bg-slate-800/40 rounded-sm border border-slate-700 items-center animate-[slideInRight_0.4s_ease-out] hover:bg-slate-700 transition-colors border-l-2 border-l-brand-gold h-16 min-h-[4rem]';
            
            // Use safe function call instead of inline messy JS
            item.innerHTML = `
                <div class="col-span-2 font-mono text-slate-300 text-[10px] sm:text-xs">#${id}</div>
                <div class="col-span-5 text-slate-300 text-[10px] sm:text-xs truncate">3bd â€¢ Modern Farmhouse</div>
                <div class="col-span-2 text-white font-mono font-bold text-[10px] sm:text-xs">$${budget}k</div>
                <div class="col-span-3 text-right">
                    <button onclick="openPitchModal('${id}')" class="pitch-btn px-3 py-1.5 bg-brand-gold hover:bg-yellow-400 text-brand-dark text-[10px] rounded-sm shadow-sm transition-colors font-bold uppercase tracking-wider">Pitch</button>
                </div>
            `;
            container.prepend(item);
            if(container.children.length > 15) container.lastElementChild.remove();
        }

        // --- Init ---
        let intelChartInstance = null;
        function initChart() {
            if(intelChartInstance) return;
            const ctx = document.getElementById('intelChart').getContext('2d');
            intelChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Avg Buyer Budget',
                        data: [420, 435, 430, 450, 465, 485],
                        borderColor: '#FBBF24', // brand-gold
                        tension: 0.4,
                        borderWidth: 2,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { display: false },
                        x: { ticks: { color: '#6b7280', font: {size: 10} }, grid: { display: false } }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // State Persistence (Check URL Param)
            const params = new URLSearchParams(window.location.search);
            const initialRole = params.get('audience') || 'buyer';

            // Init Audience Elements
            audienceElements = document.querySelectorAll('[data-audience]');
            setAudience(initialRole);
            
            // Start Feed Simulation safely
            setInterval(addFeedItem, 3500); 
            addFeedItem(); 
            addFeedItem();
            
            startMarketSimulation();
            
            loadState();
            
            // Init Icons on load
            lucide.createIcons();
        });
    </script>
</body>
</html>
