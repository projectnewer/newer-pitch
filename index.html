<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newer | The Reverse Real Estate Marketplace</title>
    
    <!-- Brand Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' fill='none'><path d='M20 80 V35 L50 20 L50 55 L20 80 Z' fill='%2300C2B2' stroke='%2300C2B2' stroke-width='4' stroke-linejoin='round' /><path d='M80 20 V65 L50 80 L50 45 L80 20 Z' fill='%2300C2B2' stroke='%2300C2B2' stroke-width='4' stroke-linejoin='round' /></svg>">
    
    <!-- SEO Meta (Dual Persona) -->
    <meta name="description" content="Newer is the Reverse Real Estate Marketplace. Buyers: Skip the search and make builders bid. Builders: Eliminate spec risk and build pre-sold with verified demand.">
    <meta name="keywords" content="PropTech, New Construction, Home Builder, Off-Market Real Estate, Reverse Marketplace, Fintech Mortgage, Build Pre-Sold">
    
    <!-- Font: Outfit -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Icons: Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- CSS (Tailwind JIT) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            teal: '#00C2B2',
                            charcoal: '#0F172A', // Dark Slate
                            concrete: '#F3F4F6',
                            gold: '#FBBF24',
                            border: '#E5E7EB',
                            muted: '#9CA3AF'
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(0,0,0,0.08)',
                        'glow': '0 0 20px rgba(0, 194, 178, 0.4)',
                        'glow-gold': '0 0 20px rgba(251, 191, 36, 0.4)',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'marquee': 'marquee 30s linear infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        marquee: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-100%)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body { font-family: 'Outfit', sans-serif; }

        /* Nhouse Pattern */
        .bg-house-pattern {
            background-image: 
                linear-gradient(45deg, rgba(0,0,0,0.03) 25%, transparent 25%), 
                linear-gradient(-45deg, rgba(0,0,0,0.03) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.03) 75%), 
                linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.03) 75%);
            background-size: 20px 20px;
        }
        .dark .bg-house-pattern {
             background-image: 
                linear-gradient(45deg, rgba(255,255,255,0.03) 25%, transparent 25%), 
                linear-gradient(-45deg, rgba(255,255,255,0.03) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.03) 75%), 
                linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.03) 75%);
        }

        /* Smooth Reveal Animation Class */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Ambient Glow Background */
        .ambient-glow {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80vw;
            height: 80vw;
            background: radial-gradient(circle, rgba(0,194,178,0.08) 0%, rgba(255,255,255,0) 70%);
            z-index: -1;
            pointer-events: none;
            transition: background 1s ease;
        }
        .dark .ambient-glow {
            background: radial-gradient(circle, rgba(251,191,36,0.06) 0%, rgba(15,23,42,0) 70%);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #F3F4F6; }
        ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 4px; }
        .dark ::-webkit-scrollbar-track { background: #0F172A; }
        .dark ::-webkit-scrollbar-thumb { background: #334155; }

        /* Floating UI Bubbles */
        .floating-bubble {
            animation: float-bubble 4s ease-in-out infinite;
            backdrop-filter: blur(8px);
        }
        @keyframes float-bubble {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* Toggle Slider Logic */
        .toggle-track { position: relative; }
        .toggle-pill {
            position: absolute;
            top: 0.25rem;
            bottom: 0.25rem;
            left: 0.25rem;
            width: calc(50% - 0.25rem);
            border-radius: 9999px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }

        /* Input Range Styling */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%;
            background: #00C2B2; cursor: pointer; margin-top: -8px; 
            border: 3px solid #FFFFFF; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: #E5E7EB; border-radius: 2px; }

        .faq-answer { transition: max-height 0.4s ease, opacity 0.4s ease; max-height: 0; overflow: hidden; opacity: 0; }
        .faq-answer.open { max-height: 500px; opacity: 1; }
        
        .theme-transition { transition: all 0.5s ease; }
    </style>
</head>
<body class="bg-brand-concrete text-brand-charcoal dark:bg-brand-charcoal dark:text-gray-100 font-sans antialiased pb-32 lg:pb-0 transition-colors duration-500 relative">

    <!-- Ambient Background -->
    <div class="ambient-glow"></div>

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/90 dark:bg-brand-charcoal/90 border-b border-brand-border dark:border-gray-800 backdrop-blur-md transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <!-- LOGO -->
                <a href="#" class="flex items-baseline logo-gap group" onclick="setAudience('buyer'); window.scrollTo({top: 0, behavior: 'smooth'});">
                    <div class="h-[1.5em] flex items-end">
                        <svg class="h-full w-auto block transition-transform group-hover:scale-105" viewBox="0 0 100 100" fill="none">
                            <path id="nav-logo-path-1" d="M20 80 V35 L50 20 L50 55 L20 80 Z" fill="#00C2B2" stroke="#00C2B2" stroke-width="4" stroke-linejoin="round" class="theme-transition"/>
                            <path id="nav-logo-path-2" d="M80 20 V65 L50 80 L50 45 L80 20 Z" fill="#00C2B2" stroke="#00C2B2" stroke-width="4" stroke-linejoin="round" class="theme-transition"/>
                        </svg>
                    </div>
                    <span class="text-2xl font-extrabold tracking-tight leading-none text-brand-charcoal dark:text-white transition-colors ml-1">Newer</span>
                </a>
                
                <!-- Desktop Animated Toggle -->
                <div class="hidden md:flex bg-gray-100 dark:bg-gray-800 rounded-full p-1 relative toggle-track w-[280px]">
                    <!-- The Sliding Pill -->
                    <div id="nav-toggle-pill" class="toggle-pill bg-white dark:bg-brand-charcoal shadow-sm border border-gray-200 dark:border-gray-600"></div>
                    
                    <button onclick="setAudience('buyer')" class="relative z-10 w-1/2 py-2 rounded-full text-sm font-bold transition-colors text-center" id="nav-btn-buyer">For Buyers</button>
                    <button onclick="setAudience('builder')" class="relative z-10 w-1/2 py-2 rounded-full text-sm font-bold transition-colors text-center text-gray-500" id="nav-btn-builder">For Builders</button>
                </div>

                <button id="nav-cta-btn" onclick="openWaitlistModal()" class="hidden md:block bg-brand-charcoal text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-brand-teal dark:bg-brand-gold dark:text-brand-charcoal dark:hover:bg-white transition-all shadow-lg hover:shadow-glow transform hover:-translate-y-0.5">
                    Create Free Profile
                </button>
            </div>
        </div>
    </nav>

    <!-- Ticker -->
    <div class="w-full bg-brand-charcoal dark:bg-black text-gray-400 overflow-hidden z-40 relative h-10 flex items-center border-b border-brand-charcoal dark:border-gray-800 transition-colors">
        <div class="flex whitespace-nowrap overflow-hidden absolute w-full">
            <div class="animate-marquee inline-block text-xs font-bold tracking-wide">
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">New Permit</strong> issued in 78704</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">3 Builders</strong> bidding on Lot 4</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">Rate Buy-down</strong> secured by Buyer #221</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">$15k Incentive</strong> accepted by Buyer #8492</span>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="relative pt-12 pb-20 md:pt-24 md:pb-32 overflow-hidden bg-transparent theme-transition scroll-mt-28" id="hero">
        <!-- Decoration -->
        <div class="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-brand-concrete to-transparent dark:from-gray-900/50 hidden lg:block -z-10"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full grid lg:grid-cols-2 gap-12 items-center">
            <div class="max-w-2xl reveal-on-scroll">
                <div id="hero-badge" class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-brand-teal/10 dark:bg-brand-gold/10 text-brand-teal dark:text-brand-gold text-xs font-bold uppercase tracking-widest mb-8 theme-transition border border-brand-teal/20 dark:border-brand-gold/20">
                    <span class="w-2 h-2 rounded-full bg-brand-teal dark:bg-brand-gold animate-pulse theme-transition" id="hero-badge-dot"></span> <span id="hero-badge-text">The Reverse Market</span>
                </div>
                <h1 id="hero-title" class="text-5xl md:text-7xl font-extrabold text-brand-charcoal dark:text-white tracking-tight mb-6 leading-[1.1] transition-colors">
                    Skip the Search.<br>
                    <span class="text-brand-teal theme-transition" id="hero-highlight">Make Builders Bid.</span>
                </h1>
                <p id="hero-desc" class="mt-6 text-lg md:text-xl text-gray-500 dark:text-gray-300 font-medium leading-relaxed transition-colors">
                    The first marketplace where you define the terms, and top builders compete to build your home.
                </p>
                <div class="mt-10 flex flex-col sm:flex-row gap-4">
                    <a href="#demo" id="hero-cta-main" class="px-8 py-4 bg-brand-teal text-white rounded-full font-bold shadow-lg hover:shadow-glow hover:-translate-y-1 transition-all text-center theme-transition">Create Free Profile</a>
                    <a href="#concept" class="px-8 py-4 bg-white dark:bg-transparent text-brand-charcoal dark:text-white border-2 border-brand-charcoal dark:border-white rounded-full font-bold hover:bg-brand-charcoal hover:text-white dark:hover:bg-white dark:hover:text-brand-charcoal transition-all text-center">How It Works</a>
                </div>
            </div>
            
            <!-- Hero Graphic with Floating UI -->
            <div class="relative lg:h-[600px] w-full hidden md:block reveal-on-scroll" style="transition-delay: 200ms;">
                <div class="absolute inset-0 bg-house-pattern rounded-3xl transform rotate-3 border border-brand-border dark:border-gray-700 transition-colors opacity-50"></div>
                <div class="absolute inset-4 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-brand-border dark:border-gray-700 transform -rotate-2 hover:rotate-0 transition-all duration-700 ease-out group relative">
                    <img id="hero-image-el" src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1200&q=80" 
                         alt="Newer app interface" 
                         class="absolute inset-0 w-full h-full object-cover transition-opacity duration-500 group-hover:scale-105">
                    
                    <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>

                    <!-- Floating Notification Cards (Dynamic) -->
                    <div id="hero-floating-notifications" class="absolute inset-0 pointer-events-none p-8 flex flex-col justify-end items-end gap-4">
                        <!-- JS injects bubbles here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trusted By -->
    <section class="py-12 bg-white/50 dark:bg-brand-charcoal/50 border-y border-brand-border dark:border-gray-800 transition-colors scroll-mt-28 reveal-on-scroll">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-xs uppercase tracking-widest text-brand-muted font-bold mb-8">Designed for Top Builders</p>
            <div class="flex flex-wrap justify-center items-center gap-12 md:gap-20 opacity-40 grayscale hover:grayscale-0 transition-all duration-500">
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400">LENNAR</div>
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400">TOLL BROTHERS</div>
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400">PULTE</div>
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400 flex items-center gap-2"><i data-lucide="landmark" class="w-6 h-6"></i> PLAID</div>
            </div>
        </div>
    </section>

    <!-- 1-2-3 How it Works (New Addition) -->
    <section id="how-it-works" class="py-16 bg-brand-concrete/30 dark:bg-gray-900/30 transition-colors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center reveal-on-scroll">
            <div class="grid md:grid-cols-3 gap-8">
                <div class="p-6">
                    <div class="w-12 h-12 rounded-full bg-brand-teal/10 dark:bg-brand-gold/10 text-brand-teal dark:text-brand-gold font-bold text-xl flex items-center justify-center mx-auto mb-4 border border-brand-teal/20 dark:border-brand-gold/20">1</div>
                    <h3 class="font-bold text-lg text-brand-charcoal dark:text-white mb-2" id="step-1-title">Define</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400" id="step-1-desc">Set your style, budget, and must-haves.</p>
                </div>
                <div class="p-6 relative">
                    <div class="hidden md:block absolute top-1/2 -left-4 w-8 border-t-2 border-dashed border-gray-300 dark:border-gray-700"></div>
                    <div class="w-12 h-12 rounded-full bg-brand-teal/10 dark:bg-brand-gold/10 text-brand-teal dark:text-brand-gold font-bold text-xl flex items-center justify-center mx-auto mb-4 border border-brand-teal/20 dark:border-brand-gold/20">2</div>
                    <h3 class="font-bold text-lg text-brand-charcoal dark:text-white mb-2" id="step-2-title">Verify</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400" id="step-2-desc">Prove you are real to unlock VIP status.</p>
                </div>
                <div class="p-6 relative">
                    <div class="hidden md:block absolute top-1/2 -left-4 w-8 border-t-2 border-dashed border-gray-300 dark:border-gray-700"></div>
                    <div class="w-12 h-12 rounded-full bg-brand-teal/10 dark:bg-brand-gold/10 text-brand-teal dark:text-brand-gold font-bold text-xl flex items-center justify-center mx-auto mb-4 border border-brand-teal/20 dark:border-brand-gold/20">3</div>
                    <h3 class="font-bold text-lg text-brand-charcoal dark:text-white mb-2" id="step-3-title">Receive</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400" id="step-3-desc">Builders compete for your business.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Concept Section -->
    <section id="concept" class="py-24 bg-brand-concrete/50 dark:bg-gray-900/50 transition-colors scroll-mt-28">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll">
                <h2 id="concept-title" class="text-3xl md:text-4xl font-extrabold text-brand-charcoal dark:text-white transition-colors">The Power Shift</h2>
                <p id="concept-desc" class="mt-4 text-gray-500 dark:text-gray-300 max-w-2xl mx-auto text-lg transition-colors">
                    We flipped the model. <span class="text-brand-teal font-bold" id="concept-highlight">Stop begging. Become the Client.</span>
                </p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 items-stretch">
                <!-- Old Way -->
                <div class="p-10 rounded-3xl bg-white dark:bg-gray-800 border border-brand-border dark:border-gray-700 relative h-full flex flex-col hover:shadow-lg transition-all reveal-on-scroll" style="transition-delay: 100ms;">
                    <span class="absolute top-8 right-8 text-xs font-bold text-gray-300 dark:text-gray-500 uppercase tracking-widest" id="concept-label-old">The Old Way</span>
                    <h3 id="concept-header-old" class="text-2xl font-bold text-brand-charcoal dark:text-white mb-6 flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-300"><i data-lucide="search" class="w-5 h-5"></i></div>
                        Active Shopper
                    </h3>
                    <ul id="concept-old-list" class="space-y-6 text-gray-500 dark:text-gray-400 font-medium flex-grow">
                         <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400"></i> Refreshing apps every 15 mins.</li>
                         <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400"></i> Driving to sold open houses.</li>
                         <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400"></i> Bidding wars.</li>
                    </ul>
                </div>
                <!-- New Way -->
                <div class="p-10 rounded-3xl bg-brand-charcoal dark:bg-black text-white relative h-full flex flex-col shadow-2xl transform md:-translate-y-4 border border-transparent dark:border-gray-800 reveal-on-scroll" style="transition-delay: 200ms;">
                    <span class="absolute top-8 right-8 text-xs font-bold text-brand-teal uppercase tracking-widest theme-transition" id="concept-badge-new">Newer Model</span>
                    <h3 id="concept-header-new" class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-brand-teal flex items-center justify-center text-white theme-transition" id="concept-icon-new"><i data-lucide="crown" class="w-5 h-5"></i></div>
                        VIP Client
                    </h3>
                    <ul id="concept-new-list" class="space-y-6 text-gray-300 font-medium flex-grow">
                        <!-- JS Filled -->
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo Section -->
    <section id="demo" class="py-24 bg-white/50 dark:bg-brand-charcoal/50 relative overflow-hidden transition-colors scroll-mt-28" aria-labelledby="demo-title">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="mb-16 text-center reveal-on-scroll">
                <h2 id="demo-title" class="text-3xl md:text-4xl font-extrabold text-brand-charcoal dark:text-white transition-colors">Your Personal Market</h2>
                <p id="demo-desc" class="mt-4 text-gray-500 dark:text-gray-300 max-w-2xl mx-auto text-lg transition-colors">Broadcast your needs via the App. Watch the market respond.</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-12 reveal-on-scroll">
                <!-- LEFT: Buyer App -->
                <div class="lg:col-span-4 flex flex-col items-center">
                    <div class="w-full max-w-[350px] bg-white md:rounded-[3rem] md:border-8 md:border-brand-charcoal border-0 shadow-2xl overflow-hidden h-[700px] relative">
                        <div class="hidden md:block absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-brand-charcoal rounded-b-2xl z-20"></div>
                        <!-- App Header -->
                        <div class="h-20 bg-white border-b border-brand-border flex items-end justify-between px-6 pb-3 pt-8">
                            <div class="h-[1.5em] flex items-end">
                                <svg class="h-full w-auto block" viewBox="0 0 100 100" fill="none">
                                    <path id="app-logo-path-1" d="M20 80 V35 L50 20 L50 55 L20 80 Z" fill="#00C2B2" stroke="#00C2B2" stroke-width="4" stroke-linejoin="round"/>
                                    <path id="app-logo-path-2" d="M80 20 V65 L50 80 L50 45 L80 20 Z" fill="#00C2B2" stroke="#00C2B2" stroke-width="4" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="w-8 h-8 rounded-full bg-brand-concrete flex items-center justify-center"><i data-lucide="user" class="w-4 h-4 text-brand-charcoal"></i></div>
                        </div>
                        <!-- App Body -->
                        <div id="buyer-screen-container" class="h-[calc(100%-80px-60px)] overflow-y-auto bg-brand-concrete p-5 relative scrollbar-hide text-brand-charcoal">
                            <!-- STEP 1: Style -->
                            <div id="step-1" class="step-content fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Set the mood.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Which style feels like home?</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <button onclick="selectStyle('Modern')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="box" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Modern</span>
                                    </button>
                                    <button onclick="selectStyle('Traditional')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="home" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Traditional</span>
                                    </button>
                                    <button onclick="selectStyle('Farmhouse')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="warehouse" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Farmhouse</span>
                                    </button>
                                    <button onclick="selectStyle('Coastal')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="sun" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Coastal</span>
                                    </button>
                                </div>
                            </div>
                            <!-- STEP 2: Basics + Persona -->
                            <div id="step-2" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">The Basics.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Define your space needs.</p>
                                <div class="space-y-6 bg-white p-6 rounded-3xl shadow-sm">
                                    <div>
                                        <label class="text-xs font-bold text-gray-400 uppercase">Persona</label>
                                        <div class="flex gap-2 mt-2">
                                            <button onclick="setPersona('Family')" class="persona-btn flex-1 py-3 bg-brand-concrete rounded-xl text-xs font-bold hover:bg-brand-teal hover:text-white transition-colors text-brand-charcoal">Growing Family</button>
                                            <button onclick="setPersona('Couple')" class="persona-btn flex-1 py-3 bg-brand-concrete rounded-xl text-xs font-bold hover:bg-brand-teal hover:text-white transition-colors text-brand-charcoal">Pro Couple</button>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2"><label class="text-xs font-bold text-brand-charcoal">Bedrooms</label><span id="bed-val" class="text-xs font-bold text-brand-teal">3</span></div>
                                        <input type="range" min="2" max="6" value="3" oninput="updateRange('bed', this.value)">
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2"><label class="text-xs font-bold text-brand-charcoal">Max Budget</label><span id="budget-val" class="text-xs font-bold text-brand-teal">$500k</span></div>
                                        <input type="range" min="300" max="1500" step="50" value="500" oninput="updateRange('budget', this.value)">
                                    </div>
                                    <button onclick="nextStep('amenities')" class="w-full py-4 bg-brand-charcoal text-white rounded-xl font-bold text-sm shadow-lg">Next Step</button>
                                </div>
                            </div>
                             <!-- STEP Amenities -->
                             <div id="step-amenities" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Must Haves.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Select top 3.</p>
                                <div class="flex flex-col gap-3 mb-6">
                                    <button onclick="toggleAmenity(this, 'Office')" class="amenity-btn w-full p-4 bg-white rounded-2xl text-left font-bold text-sm text-brand-charcoal border border-transparent hover:border-brand-teal flex items-center gap-3"><i data-lucide="laptop" class="w-4 h-4 text-brand-teal"></i> Home Office</button>
                                    <button onclick="toggleAmenity(this, '3-Car Garage')" class="amenity-btn w-full p-4 bg-white rounded-2xl text-left font-bold text-sm text-brand-charcoal border border-transparent hover:border-brand-teal flex items-center gap-3"><i data-lucide="car" class="w-4 h-4 text-brand-teal"></i> 3-Car Garage</button>
                                    <button onclick="toggleAmenity(this, 'Pool Ready')" class="amenity-btn w-full p-4 bg-white rounded-2xl text-left font-bold text-sm text-brand-charcoal border border-transparent hover:border-brand-teal flex items-center gap-3"><i data-lucide="waves" class="w-4 h-4 text-brand-teal"></i> Pool Ready</button>
                                </div>
                                <button onclick="nextStep('3')" class="w-full py-4 bg-brand-charcoal text-white rounded-xl font-bold text-sm shadow-lg">Get VIP Status</button>
                            </div>
                            <!-- STEP 3: Verify (UPDATED COPY) -->
                            <div id="step-3" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Get Taken Seriously.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Verification stops you from being ignored.</p>
                                <div class="bg-brand-teal/10 p-4 rounded-2xl mb-6 flex items-center gap-3 border border-brand-teal/20">
                                    <div class="w-8 h-8 rounded-full bg-brand-teal flex items-center justify-center text-white"><i data-lucide="shield-check" class="w-4 h-4"></i></div>
                                    <span class="text-xs font-bold text-brand-teal">Verified Proof of Funds</span>
                                </div>
                                <button onclick="verifyUser(event)" class="w-full py-4 bg-white border-2 border-brand-border text-brand-charcoal rounded-xl font-bold text-sm mb-3 hover:border-brand-teal transition-colors">Upload Pre-Approval</button>
                                <button onclick="verifyUser(event)" class="w-full py-4 bg-white border-2 border-brand-border text-brand-charcoal rounded-xl font-bold text-sm hover:border-brand-teal transition-colors">Connect Bank via Plaid</button>
                                
                                <div class="mt-4 flex items-center justify-center gap-2 text-[10px] text-gray-400">
                                    <i data-lucide="lock" class="w-3 h-3"></i>
                                    <span>Bank-level 256-bit encryption. We never see your login.</span>
                                </div>
                            </div>
                            
                            <!-- STEP 4: Success/Dashboard -->
                            <div id="step-4" class="step-content hidden fade-in text-center pt-10">
                                <div class="w-20 h-20 bg-brand-charcoal rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl border-4 border-brand-teal">
                                    <i data-lucide="check" class="w-10 h-10 text-brand-teal"></i>
                                </div>
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Profile Complete!</h3>
                                <p class="text-xs text-gray-500 mb-6">3 Builders in Austin match your criteria.</p>

                                <form onsubmit="event.preventDefault(); this.innerHTML='<div class=\'text-brand-teal font-bold py-8 text-sm\'>Matches Sent to Your Email!</div>'" class="px-4">
                                    <input type="email" placeholder="Enter email to see matches" class="w-full mb-3 px-4 py-3 rounded-xl border border-gray-200 text-sm font-bold focus:ring-2 focus:ring-brand-teal outline-none text-brand-charcoal" required>
                                    <button type="submit" class="w-full py-3 bg-brand-teal text-white rounded-xl font-bold shadow-lg animate-pulse hover:bg-brand-charcoal transition-colors">
                                        View My Matches
                                    </button>
                                </form>
                                <p class="mt-4 text-[10px] text-gray-400">No spam. Unsubscribe anytime.</p>
                            </div>
                        </div>
                        <!-- App Footer -->
                        <div class="h-16 bg-white border-t border-brand-border flex justify-around items-center px-2">
                            <button class="p-2"><i data-lucide="home" class="w-5 h-5 text-brand-teal"></i></button>
                            <button class="p-2"><i data-lucide="heart" class="w-5 h-5 text-gray-300"></i></button>
                            <button class="p-2"><i data-lucide="message-square" class="w-5 h-5 text-gray-300"></i></button>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Builder Dashboard -->
                <div class="lg:col-span-8 h-[600px] lg:h-[700px] flex flex-col">
                    <div class="mb-6 pl-4 border-l-4 border-brand-gold">
                        <span class="text-xs font-bold uppercase text-yellow-600 dark:text-brand-gold tracking-widest">Builder View</span>
                        <h3 class="text-xl font-bold text-brand-charcoal dark:text-white">Demand Command Center</h3>
                    </div>
                    <div class="flex-1 bg-brand-charcoal rounded-3xl shadow-2xl overflow-hidden flex flex-col border border-gray-800 relative">
                        <!-- Top Bar -->
                        <div class="h-16 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6">
                            <div class="flex items-center gap-3">
                                <div class="flex gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500"></div><div class="w-3 h-3 rounded-full bg-yellow-500"></div><div class="w-3 h-3 rounded-full bg-green-500"></div></div>
                                <span class="ml-4 font-mono text-xs text-gray-500">TERMINAL_V2</span>
                            </div>
                            <div class="flex bg-gray-800 rounded-lg p-1">
                                <button onclick="toggleDashboardView('list')" id="view-list-btn" class="px-4 py-1.5 rounded-md text-xs font-bold bg-brand-gold text-brand-charcoal transition-all">Feed</button>
                                <button onclick="toggleDashboardView('map')" id="view-map-btn" class="px-4 py-1.5 rounded-md text-xs font-bold text-gray-400 hover:text-white transition-all">Map</button>
                                <button onclick="toggleDashboardView('intel')" id="view-intel-btn" class="px-4 py-1.5 rounded-md text-xs font-bold text-gray-400 hover:text-white transition-all">Intel</button>
                            </div>
                        </div>
                        <!-- Stats Bar with Animated Counters -->
                        <div class="grid grid-cols-4 border-b border-gray-800 bg-gray-900/50">
                            <div class="p-4 border-r border-gray-800"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Active Buyers</div><div class="text-xl font-mono font-bold text-white counter" data-target="1248">0</div></div>
                            <div class="p-4 border-r border-gray-800"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Avg Budget</div><div class="text-xl font-mono font-bold text-brand-gold">$485k</div></div>
                            <div class="p-4 border-r border-gray-800"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Credits</div><div class="text-xl font-mono font-bold text-white" id="stat-credits">500</div></div>
                            <div class="p-4"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Conversion</div><div class="text-xl font-mono font-bold text-green-400">18.4%</div></div>
                        </div>
                        <!-- Content Area -->
                        <div class="flex-1 relative bg-brand-charcoal overflow-hidden">
                            <!-- List View -->
                            <div id="dashboard-list-view" class="absolute inset-0 overflow-y-auto p-4 space-y-2"></div>
                            
                            <!-- Map View -->
                            <div id="dashboard-map-view" class="absolute inset-0 hidden">
                                <canvas id="demandMap" class="w-full h-full"></canvas>
                                <div class="absolute bottom-4 left-4 bg-gray-900/90 backdrop-blur px-4 py-2 rounded-lg text-xs font-bold text-white border border-gray-700">
                                    <span class="text-brand-teal">●</span> Your Lots &nbsp; <span class="text-brand-gold">●</span> Demand Heat
                                </div>
                            </div>

                             <!-- Intel View -->
                             <div id="dashboard-intel-view" class="absolute inset-0 hidden p-6 overflow-y-auto">
                                <div class="grid grid-cols-2 gap-6 h-full">
                                    <div class="bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                                        <h4 class="text-xs font-bold text-gray-400 uppercase mb-4">Feature Demand</h4>
                                        <div class="space-y-4">
                                            <div><div class="flex justify-between text-xs text-gray-400 mb-1"><span>Home Office</span><span class="text-brand-gold font-mono">42%</span></div><div class="h-1 bg-gray-700 rounded-full"><div class="h-full bg-brand-gold w-[42%] rounded-full"></div></div></div>
                                            <div><div class="flex justify-between text-xs text-gray-400 mb-1"><span>3-Car Garage</span><span class="text-gray-500 font-mono">28%</span></div><div class="h-1 bg-gray-700 rounded-full"><div class="h-full bg-indigo-500 w-[28%] rounded-full"></div></div></div>
                                        </div>
                                    </div>
                                    <div class="bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                                        <h4 class="text-xs font-bold text-gray-400 uppercase mb-4">Budget Trend</h4>
                                        <div class="h-32 w-full"><canvas id="intelChart"></canvas></div>
                                    </div>
                                </div>
                            </div>

                            <!-- CARD OVERLAY (Restored for notifyBuilder logic) -->
                            <div id="user-card-overlay" class="absolute bottom-0 left-0 right-0 bg-gray-900/95 border-t border-brand-gold p-6 transform translate-y-full transition-transform duration-500 backdrop-blur-md z-20">
                                <div class="flex justify-between items-start mb-4">
                                    <div><div class="flex items-center gap-2 mb-1"><span class="w-2 h-2 bg-brand-gold rounded-full animate-pulse"></span><span class="text-xs font-bold text-brand-gold uppercase">Match Found</span></div><h4 class="text-white font-bold text-xl">VIP Buyer #8942</h4></div>
                                    <div class="text-right"><div class="text-2xl font-mono font-bold text-brand-gold" id="dash-card-budget">$500k</div><div class="text-[10px] text-gray-500 uppercase font-bold">Verified Budget</div></div>
                                </div>
                                <div class="grid grid-cols-3 gap-4 mb-6">
                                    <div class="bg-gray-800 p-3 rounded-xl"><div class="text-[10px] text-gray-500 uppercase font-bold">Style</div><div class="text-white font-bold text-sm" id="dash-card-style">Modern</div></div>
                                    <div class="bg-gray-800 p-3 rounded-xl"><div class="text-[10px] text-gray-500 uppercase font-bold">Specs</div><div class="text-white font-bold text-sm" id="dash-card-config">3bd / 2ba</div></div>
                                    <div class="bg-gray-800 p-3 rounded-xl"><div class="text-[10px] text-gray-500 uppercase font-bold">Must Have</div><div class="text-white font-bold text-sm truncate" id="dash-card-amenities">...</div></div>
                                </div>
                                <button onclick="unlockLead()" id="btn-unlock" class="w-full py-4 bg-brand-gold text-brand-charcoal font-bold rounded-xl hover:bg-white transition-colors flex items-center justify-center gap-2"><i data-lucide="lock-open" class="w-4 h-4"></i> UNLOCK CONTACT (50 Credits)</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Stories -->
    <section id="testimonials" class="py-24 bg-brand-concrete dark:bg-gray-900 transition-colors scroll-mt-28">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 text-center reveal-on-scroll"><h2 id="testimonial-title" class="text-3xl font-extrabold text-brand-charcoal dark:text-white">Real Buyers. Real Bids.</h2></div>
            <div id="testimonials-grid" class="grid md:grid-cols-3 gap-8 reveal-on-scroll"></div>
        </div>
    </section>

    <!-- Pricing (Buyer) -->
    <section id="pricing-buyer" class="py-24 bg-white/50 dark:bg-brand-charcoal border-y border-brand-border dark:border-gray-800 transition-colors scroll-mt-28" data-audience="buyer">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll"><h2 class="text-3xl md:text-4xl font-extrabold text-brand-charcoal dark:text-white">Simple Pricing</h2></div>
            <div class="grid md:grid-cols-3 gap-8 reveal-on-scroll">
                <!-- Cards -->
                <div class="p-8 rounded-3xl bg-brand-concrete dark:bg-gray-800 border border-brand-border dark:border-gray-700"><h3 class="text-2xl font-bold mb-2 text-brand-charcoal dark:text-white">Profile</h3><div class="text-4xl font-mono font-bold text-brand-charcoal dark:text-white mb-4">$0</div><p class="text-gray-500 dark:text-gray-400 text-sm">Build your "Buy Box".</p></div>
                <div class="p-8 rounded-3xl bg-white dark:bg-gray-800 border-2 border-brand-teal shadow-glow transform -translate-y-2"><div class="inline-block px-3 py-1 bg-brand-teal text-white text-xs font-bold rounded-full mb-4">Most Popular</div><h3 class="text-2xl font-bold mb-2 text-brand-charcoal dark:text-white">Verified</h3><div class="text-4xl font-mono font-bold text-brand-teal mb-4">$0</div><p class="text-gray-500 dark:text-gray-400 text-sm">Gold Status Access.</p></div>
                <div class="p-8 rounded-3xl bg-brand-concrete dark:bg-gray-800 border border-brand-border dark:border-gray-700"><h3 class="text-2xl font-bold mb-2 text-brand-charcoal dark:text-white">Agent</h3><div class="text-4xl font-mono font-bold text-brand-teal mb-4">$0</div><p class="text-gray-500 dark:text-gray-400 text-sm">Commissions Covered.</p></div>
            </div>
        </div>
    </section>

    <!-- Pricing (Builder) -->
    <section id="pricing-builder" class="py-24 bg-brand-charcoal text-white hidden transition-colors scroll-mt-28" data-audience="builder">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll"><h2 class="text-3xl md:text-4xl font-extrabold text-white">Pay for Performance</h2></div>
            <div class="grid md:grid-cols-3 gap-8 reveal-on-scroll">
                <div class="p-8 rounded-3xl bg-gray-800 border border-gray-700 hover:border-brand-gold transition-all"><h3 class="text-2xl font-bold mb-2">Platform Fee</h3><div class="text-4xl font-mono font-bold text-white mb-4">$0</div><p class="text-gray-400 text-sm">List unlimited.</p></div>
                <div class="p-8 rounded-3xl bg-gray-800 border-2 border-brand-gold shadow-glow-gold"><h3 class="text-2xl font-bold mb-2">Match Fee</h3><div class="text-4xl font-mono font-bold text-brand-gold mb-4">$150</div><p class="text-gray-400 text-sm">Per unlock.</p></div>
                <div class="p-8 rounded-3xl bg-gray-800 border border-gray-700 hover:border-brand-gold transition-all"><h3 class="text-2xl font-bold mb-2">Success Fee</h3><div class="text-4xl font-mono font-bold text-brand-gold mb-4">0.5%</div><p class="text-gray-400 text-sm">At closing.</p></div>
            </div>
        </div>
    </section>

    <!-- CTA BUYER -->
    <section id="cta-buyer" class="py-20 bg-brand-teal text-white transition-colors scroll-mt-28" data-audience="buyer">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-extrabold mb-6">Stop Searching. Start Receiving.</h2>
            <button onclick="openWaitlistModal()" class="bg-white text-brand-teal px-8 py-4 rounded-full font-bold shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all">Create Free Profile</button>
            <!-- FOMO Counter (Buyer Side) -->
            <p id="buyer-fomo-text" class="text-sm text-white/90 mt-6 font-mono font-bold animate-pulse">● 3 Builders in your zip code are ready to bid.</p>
        </div>
    </section>

    <!-- CTA BUILDER -->
    <section id="cta-builder" class="py-20 bg-gray-900 text-white hidden transition-colors scroll-mt-28" data-audience="builder">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-extrabold mb-6">Eliminate Spec Risk.</h2>
            <button onclick="openWaitlistModal()" class="bg-brand-gold text-brand-charcoal px-8 py-4 rounded-full font-bold shadow-lg hover:shadow-glow-gold hover:-translate-y-1 transition-all">View Local Demand</button>
            <!-- FOMO Counter -->
            <p id="builder-fomo-text" class="text-sm text-brand-gold mt-6 font-mono font-bold animate-pulse">● 12 Verified Buyers in your zip code are waiting.</p>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="py-24 bg-brand-concrete dark:bg-gray-900 border-t border-brand-border dark:border-gray-800 transition-colors scroll-mt-28">
        <div class="max-w-3xl mx-auto px-4">
            <h2 class="text-3xl font-extrabold text-brand-charcoal dark:text-white text-center mb-12">FAQ</h2>
            <div id="faq-container" class="space-y-4"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-brand-charcoal dark:bg-black pt-20 pb-32 md:pb-10 text-gray-400 text-sm transition-colors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-12 mb-16">
                <div class="col-span-1">
                     <a href="#" class="flex items-baseline gap-2 group mb-4" onclick="window.scrollTo({top: 0, behavior: 'smooth'});">
                        <div class="h-[1.5em] flex items-end">
                            <svg class="h-full w-auto block transition-transform group-hover:scale-105" viewBox="0 0 100 100" fill="none">
                                <path id="footer-logo-path-1" d="M20 80 V35 L50 20 L50 55 L20 80 Z" fill="#00C2B2" stroke="#00C2B2" stroke-width="4" stroke-linejoin="round" class="theme-transition"/>
                                <path id="footer-logo-path-2" d="M80 20 V65 L50 80 L50 45 L80 20 Z" fill="#00C2B2" stroke="#00C2B2" stroke-width="4" stroke-linejoin="round" class="theme-transition"/>
                            </svg>
                        </div>
                        <span class="font-extrabold text-2xl tracking-tight leading-none text-white">Newer</span>
                    </a>
                    <p class="leading-relaxed mt-4 mb-6">Real Estate. Reversed.<br><span class="text-xs text-gray-500">The Newer Way to buy new construction.</span></p>
                </div>
                <div><h4 class="text-white font-bold mb-6 uppercase tracking-wider text-xs">Platform</h4><ul class="space-y-4"><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">For Buyers</a></li><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">For Builders</a></li></ul></div>
                <div><h4 class="text-white font-bold mb-6 uppercase tracking-wider text-xs">Company</h4><ul class="space-y-4"><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">About</a></li><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">Careers</a></li></ul></div>
                <div><h4 class="text-white font-bold mb-6 uppercase tracking-wider text-xs">Legal</h4><ul class="space-y-4"><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">Privacy</a></li><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">Terms</a></li></ul></div>
            </div>
            <div class="border-t border-gray-800 pt-8 flex justify-between items-center"><p>&copy; 2025 Newer LLC.</p></div>
        </div>
    </footer>

    <!-- NEW: Mobile Sticky CTA + Nav -->
    <div class="md:hidden fixed bottom-0 left-0 w-full z-50 bg-white dark:bg-brand-charcoal border-t border-gray-200 dark:border-gray-700 shadow-2xl p-4 flex flex-col gap-3 pb-8">
        <!-- Main CTA -->
        <button id="mobile-sticky-cta" onclick="openWaitlistModal()" class="w-full py-3.5 rounded-xl font-bold text-sm bg-brand-teal text-white shadow-lg transition-colors">
            Create Free Profile
        </button>
        <!-- Toggle -->
        <div class="flex bg-gray-100 dark:bg-gray-800 rounded-full p-1 relative w-full">
            <button onclick="setAudience('buyer')" class="role-btn-mobile active flex-1 py-2 rounded-full text-xs font-bold transition-all bg-white text-brand-charcoal shadow-sm">Buyers</button>
            <button onclick="setAudience('builder')" class="role-btn-mobile flex-1 py-2 rounded-full text-xs font-bold transition-all text-gray-500 dark:text-gray-400">Builders</button>
        </div>
    </div>

    <!-- Waitlist Modal -->
    <div id="waitlist-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-brand-charcoal/90 dark:bg-black/90 backdrop-blur-sm" onclick="closeWaitlistModal()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-2xl transition-colors">
            <button onclick="closeWaitlistModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            <div class="text-center">
                <div id="waitlist-badge-bg" class="w-20 h-20 bg-brand-concrete rounded-full flex items-center justify-center mx-auto mb-6 transition-colors duration-500">
                    <svg class="w-10 h-10" viewBox="16 16 68 68" fill="none"><path d="M20 80 V35 L50 20 L50 55 L20 80 Z" fill="white" stroke="white" stroke-width="4" stroke-linejoin="round"/><path d="M80 20 V65 L50 80 L50 45 L80 20 Z" fill="white" stroke="white" stroke-width="4" stroke-linejoin="round"/></svg>
                </div>
                <h3 id="waitlist-title" class="text-2xl font-bold text-brand-charcoal dark:text-white mb-2">Get Early Access</h3>
                <p id="waitlist-desc" class="text-gray-500 dark:text-gray-400 text-sm mb-6">Join 4,200+ users.</p>
                <form onsubmit="event.preventDefault(); this.innerHTML='<div class=\'text-center py-10\'><div class=\'text-2xl mb-2\'>🎉</div><div class=\'text-brand-charcoal dark:text-white font-bold text-xl\'>You\'re on the list!</div></div>'">
                    <div class="relative">
                        <input id="email-input" type="email" placeholder="Email Address" required class="w-full bg-brand-concrete dark:bg-gray-700 dark:text-white border-none rounded-xl px-4 py-3 mb-2 focus:ring-2 focus:ring-brand-teal dark:focus:ring-brand-gold outline-none transition-all" oninput="validateEmail(this)">
                        <i id="email-check" data-lucide="check-circle" class="absolute right-3 top-3.5 w-5 h-5 text-green-500 opacity-0 transition-opacity"></i>
                    </div>
                    
                    <input type="text" placeholder="Zip Code" required class="w-full bg-brand-concrete dark:bg-gray-700 dark:text-white border-none rounded-xl px-4 py-3 mb-4 focus:ring-2 focus:ring-brand-teal dark:focus:ring-brand-gold outline-none transition-all">

                    <div class="flex items-center gap-1.5 mb-4 px-1 justify-center md:justify-start"><i data-lucide="lock" class="w-3 h-3 text-gray-400"></i><span id="waitlist-trust-text" class="text-[10px] text-gray-400 font-medium">Secure 256-bit Encryption</span></div>
                    
                    <!-- Hidden Radio logic to keep form functional but styling handled by context -->
                    <div class="hidden">
                        <input type="radio" name="role" value="buyer" id="role-buyer-input">
                        <input type="radio" name="role" value="builder" id="role-builder-input">
                    </div>

                    <button id="waitlist-submit-btn" type="submit" class="w-full py-3 bg-brand-charcoal text-white font-bold rounded-xl hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300">Secure My Spot</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Logic Script -->
    <script>
        // State
        let appState = { style: '', budget: 500, bedrooms: 3, amenities: [], credits: 500, persona: '' };
        let currentAudience = 'buyer'; 
        let intelChartInstance = null;
        
        // --- Scroll Reveal Logic ---
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    // Check if it has a counter
                    const counters = entry.target.querySelectorAll('.counter');
                    counters.forEach(c => animateCounter(c));
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));

        function animateCounter(el) {
            const target = parseInt(el.dataset.target);
            let count = 0;
            const increment = target / 50; 
            const timer = setInterval(() => {
                count += increment;
                if(count >= target) { count = target; clearInterval(timer); }
                el.innerText = Math.floor(count).toLocaleString();
            }, 30);
        }

        const contentConfig = {
            buyer: {
                title: 'Skip the Search.<br><span class="text-brand-teal">Make Builders Bid.</span>',
                desc: 'The first marketplace where you define the terms, and top builders compete to build your home.',
                imageSrc: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1200&q=80',
                list: `
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-teal"></i></div><div><strong class="text-brand-teal">Save Time:</strong> Build your "Buy Box" once—define style, budget, and must-haves in minutes.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-teal"></i></div><div><strong class="text-brand-teal">Save Money:</strong> Builders compete for you. Access incentives and off-market pricing.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-teal"></i></div><div><strong class="text-brand-teal">Zero Hassle:</strong> Verify budget privately. No more showing bank statements at open houses.</div></li>`,
                legacyLabel: 'The Struggle',
                legacyHeader: `
                    <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-300"><i data-lucide="search" class="w-5 h-5"></i></div>
                    Active Shopper`,
                legacyList: `
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Why does buying feel like a job?</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Refreshing apps every 15 mins.</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Begging to spend your money.</li>`,
                conceptTitle: 'The Power Shift',
                conceptDesc: 'We flipped the script. <span class="text-brand-teal font-bold" id="concept-highlight">Become the Client.</span>',
                demoTitle: 'Your Personal Market',
                demoDesc: 'Broadcast your needs via the App. Watch the market respond.',
                testimonialTitle: 'Real Buyers. Real Bids.',
                // 1-2-3 Steps Content
                step1Title: 'Define', step1Desc: 'Set your style, budget, and must-haves.',
                step2Title: 'Verify', step2Desc: 'Prove you are real to unlock VIP status.',
                step3Title: 'Receive', step3Desc: 'Builders compete for your business.'
            },
            builder: {
                title: 'Eliminate Risk.<br><span class="text-brand-gold">Build Pre-Sold.</span>',
                desc: 'Stop building on speculation. Access a live order book of verified, pre-approved buyers ready to sign today.',
                imageSrc: 'https://images.unsplash.com/photo-1541888946425-d81bb19240f5?auto=format&fit=crop&w=1200&q=80',
                list: `
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i></div><div><strong class="text-brand-gold">Zero Marketing Spend:</strong> Direct access to high-intent buyers who have defined their needs.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i></div><div><strong class="text-brand-gold">Verified Liquidity:</strong> Plaid-verified leads. Only pitch buyers who can close.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i></div><div><strong class="text-brand-gold">Instant Absorption:</strong> Pre-sell lots before you break ground. Reduce carry costs.</div></li>`,
                legacyLabel: 'The Gamble',
                legacyHeader: `
                    <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-300"><i data-lucide="dice-5" class="w-5 h-5"></i></div>
                    Spec Builder`,
                legacyList: `
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Hope is not a business strategy.</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Speculation is eating margins.</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Expensive ads for tire-kickers.</li>`,
                conceptTitle: 'Demand Command Center',
                conceptDesc: 'Newer replaces speculation with data. <span class="text-brand-gold font-bold" id="concept-highlight">Don\'t hunt buyers. Choose them.</span>',
                demoTitle: 'Live Order Book',
                demoDesc: 'Filter by lot size, budget, and timeline to find your perfect buyer.',
                testimonialTitle: 'Trusted by the Top 10.',
                // 1-2-3 Steps Content
                step1Title: 'Filter', step1Desc: 'Set land & budget criteria.',
                step2Title: 'Identify', step2Desc: 'Find verified, ready buyers.',
                step3Title: 'Unlock', step3Desc: 'Directly pitch your build.'
            }
        };

        const modalConfig = {
            buyer: {
                title: 'Unlock Your Personal Market',
                desc: 'Join 4,200+ buyers receiving off-market bids from builders.',
                btnText: 'Create Free Profile',
                micro: 'No credit card required',
                trust: 'Bank-level Encryption (Plaid)',
                color: 'bg-brand-teal',
                hover: 'hover:bg-brand-charcoal'
            },
            builder: {
                title: 'Access High-Intent Demand',
                desc: 'View 1,200+ active buy-boxes in your target zip codes.',
                btnText: 'View Local Demand',
                micro: 'Verification required for approval',
                trust: 'Verified Lead Guarantee',
                color: 'bg-brand-gold',
                hover: 'hover:bg-white hover:text-brand-charcoal'
            }
        };

        const colorMap = {
            buyer: '#00C2B2',   // brand-teal
            builder: '#FBBF24',  // brand-gold
        };

        const testimonialsData = {
            buyer: [
                { name: 'Sarah T.', loc: 'First-Time Buyer, Austin', quote: "I built a profile on Tuesday and had three builder offers by Friday. I signed a contract for a home that wasn't even listed yet." },
                { name: 'Mark D.', loc: 'Tech Professional, Denver', quote: "I wanted a 3-car garage. A builder changed a floorplan just to win my business. This feels like the future." },
                { name: 'Elena R.', loc: 'Investor, Nashville', quote: "Verified my budget once, never had to show a bank statement to a realtor again. Total privacy." }
            ],
            builder: [
                { name: 'James R.', loc: 'VP Sales, Lennar (Austin)', quote: "I searched for buyers with a $550k budget, found 3 matches, and pitched them. Sold it that weekend with zero marketing spend." },
                { name: 'David K.', loc: 'Div Pres, Toll Brothers', quote: "The demand map showed us exactly where to permit our next phase. Pre-sold 4 lots before breaking ground." },
                { name: 'Lisa M.', loc: 'Custom Builder, 78704', quote: "Finally, leads that actually have money. No more tire kickers at open houses on Sundays." }
            ]
        };
        
        const faqData = {
            buyer: [
                { q: "Is it complicated?", a: "No. Setting up your profile takes less than 5 minutes. You define your style, budget, and must-haves, then sit back." },
                { q: "Is it expensive?", a: "Newer is 100% FREE for buyers. Builders pay us because we save them marketing costs." },
                { q: "Is it safe?", a: "We use bank-level 256-bit encryption (via Plaid) to verify funds. We never see your login details, and your privacy is guaranteed." },
                { q: "Can I request rate buy-downs?", a: "Yes. In your 'Buy Box,' specify financing needs. Builders often offer 2-1 buydowns or closing cost credits to win your business." }
            ],
            builder: [
                { q: "Are the leads real?", a: "Yes. Verified Status requires proof of funds or a pre-approval letter within the last 30 days." },
                { q: "What is the cost?", a: "There is $0 Platform Fee to list inventory. You pay a small match fee to unlock contact info, and a 0.5% success fee only at closing." },
                { q: "Does it work for custom builds?", a: "Yes. Filter demand by specific lot requirements (e.g., '3-Car Garage', 'Pool Ready') to find buyers looking for exactly what you build." },
                { q: "When do I pay the success fee?", a: "The 0.5% success fee is collected only at closing. If the deal doesn't close, you don't pay the transaction fee." }
            ]
        };

        function setAudience(role) {
            currentAudience = role;
            if(role === 'builder') document.documentElement.classList.add('dark');
            else document.documentElement.classList.remove('dark');

            // 1. Text & Image Updates
            const cfg = contentConfig[role] || contentConfig['buyer'];
            document.getElementById('hero-title').innerHTML = cfg.title;
            document.getElementById('hero-desc').innerText = cfg.desc;
            
            // Update Concept Section with new dynamic fields
            document.getElementById('concept-title').innerText = cfg.conceptTitle;
            document.getElementById('concept-desc').innerHTML = cfg.conceptDesc;
            document.getElementById('concept-label-old').innerText = cfg.legacyLabel;
            document.getElementById('concept-header-old').innerHTML = cfg.legacyHeader;
            document.getElementById('concept-old-list').innerHTML = cfg.legacyList;
            document.getElementById('concept-new-list').innerHTML = cfg.list;
            
            // Update Demo Section Titles
            const demoTitle = document.getElementById('demo-title');
            const demoDesc = document.getElementById('demo-desc');
            if(demoTitle) demoTitle.innerText = cfg.demoTitle;
            if(demoDesc) demoDesc.innerText = cfg.demoDesc;

            document.getElementById('testimonial-title').innerText = cfg.testimonialTitle;

            // Update 1-2-3 Step Text
            document.getElementById('step-1-title').innerText = cfg.step1Title;
            document.getElementById('step-1-desc').innerText = cfg.step1Desc;
            document.getElementById('step-2-title').innerText = cfg.step2Title;
            document.getElementById('step-2-desc').innerText = cfg.step2Desc;
            document.getElementById('step-3-title').innerText = cfg.step3Title;
            document.getElementById('step-3-desc').innerText = cfg.step3Desc;


            // Image Loading
            const heroImg = document.getElementById('hero-image-el');
            if(heroImg && heroImg.src !== cfg.imageSrc) {
                heroImg.style.opacity = '0.5';
                const img = new Image(); img.src = cfg.imageSrc;
                img.onload = () => { heroImg.src = cfg.imageSrc; heroImg.style.opacity = '1'; };
            }

            // 2. Animated Toggle Logic
            const pill = document.getElementById('nav-toggle-pill');
            const btnBuyer = document.getElementById('nav-btn-buyer');
            const btnBuilder = document.getElementById('nav-btn-builder');
            
            if(role === 'buyer') {
                pill.style.transform = 'translateX(0)';
                btnBuyer.classList.remove('text-gray-500'); btnBuyer.classList.add('text-brand-charcoal');
                btnBuilder.classList.add('text-gray-500'); btnBuilder.classList.remove('text-white');
            } else {
                pill.style.transform = 'translateX(100%)';
                btnBuyer.classList.add('text-gray-500'); btnBuyer.classList.remove('text-brand-charcoal');
                btnBuilder.classList.remove('text-gray-500'); btnBuilder.classList.add('text-white');
            }

            // 3. Mobile Floating Nav Update - Simplified Logic
            document.querySelectorAll('.role-btn-mobile').forEach(btn => {
                const isBuilderBtn = btn.innerText.includes('Builder');
                const isActive = (role === 'builder' && isBuilderBtn) || (role === 'buyer' && !isBuilderBtn);
                
                // Clear all potential states first
                btn.classList.remove('active', 'shadow-sm', 'bg-brand-gold', 'bg-brand-teal', 'bg-white', 'text-brand-charcoal', 'text-white', 'text-gray-500', 'text-gray-400');
                
                if (isActive) {
                    btn.classList.add('active', 'shadow-sm');
                    if (role === 'builder') {
                        // Builder Active State (Gold)
                        btn.classList.add('bg-brand-gold', 'text-brand-charcoal');
                    } else {
                        // Buyer Active State (White on gray bg)
                        btn.classList.add('bg-white', 'text-brand-charcoal');
                    }
                } else {
                    // Inactive State
                    if (role === 'builder') {
                        btn.classList.add('text-gray-400'); // Dark mode inactive text
                    } else {
                        btn.classList.add('text-gray-500'); // Light mode inactive text
                    }
                }
            });

            // 4. Section Visibility & Visuals
            const badgeDot = document.getElementById('hero-badge-dot');
            const ctaBtn = document.getElementById('hero-cta-main');
            const conceptBadge = document.getElementById('concept-badge-new');
            const conceptIcon = document.getElementById('concept-icon-new');
            const conceptHighlight = document.getElementById('concept-highlight');
            const stickyCta = document.getElementById('mobile-sticky-cta');

            // Reset classes
            ['bg-brand-teal', 'bg-brand-gold', 'text-brand-teal', 'text-brand-gold'].forEach(c => {
                badgeDot.classList.remove(c); ctaBtn.classList.remove(c); 
                conceptBadge.classList.remove(c); conceptIcon.classList.remove(c); 
                if(conceptHighlight) conceptHighlight.classList.remove(c);
            });

            if(role === 'builder') {
                badgeDot.classList.add('bg-brand-gold');
                ctaBtn.classList.add('bg-brand-gold');
                ctaBtn.classList.add('text-brand-charcoal'); ctaBtn.classList.remove('text-white');
                ctaBtn.innerText = 'View Demand Map';
                
                conceptBadge.classList.add('text-brand-gold');
                conceptIcon.classList.add('bg-brand-gold');
                if(conceptHighlight) conceptHighlight.classList.add('text-brand-gold');
                
                document.getElementById('pricing-buyer').classList.add('hidden');
                document.getElementById('pricing-builder').classList.remove('hidden');
                document.getElementById('cta-buyer').classList.add('hidden');
                document.getElementById('cta-builder').classList.remove('hidden');

                // Mobile Sticky CTA
                if(stickyCta) {
                    stickyCta.innerText = "View Local Demand";
                    stickyCta.classList.remove('bg-brand-teal', 'text-white');
                    stickyCta.classList.add('bg-brand-gold', 'text-brand-charcoal');
                }

            } else {
                badgeDot.classList.add('bg-brand-teal');
                ctaBtn.classList.add('bg-brand-teal');
                ctaBtn.classList.add('text-white'); ctaBtn.classList.remove('text-brand-charcoal');
                ctaBtn.innerText = 'Create Free Profile';

                conceptBadge.classList.add('text-brand-teal');
                conceptIcon.classList.add('bg-brand-teal');
                if(conceptHighlight) conceptHighlight.classList.add('text-brand-teal');

                document.getElementById('pricing-buyer').classList.remove('hidden');
                document.getElementById('pricing-builder').classList.add('hidden');
                document.getElementById('cta-buyer').classList.remove('hidden');
                document.getElementById('cta-builder').classList.add('hidden');

                // Mobile Sticky CTA
                if(stickyCta) {
                    stickyCta.innerText = "Create Free Profile";
                    stickyCta.classList.remove('bg-brand-gold', 'text-brand-charcoal');
                    stickyCta.classList.add('bg-brand-teal', 'text-white');
                }
            }
            
            // Render Testimonials
            const tGrid = document.getElementById('testimonials-grid');
            if(tGrid) {
                tGrid.innerHTML = '';
                const currentTestimonials = testimonialsData[role];
                currentTestimonials.forEach(t => {
                    const div = document.createElement('div');
                    const hoverClass = role === 'builder' ? 'hover:border-brand-gold' : 'hover:border-brand-teal';
                    const iconTextClass = role === 'builder' ? 'text-brand-gold' : 'text-brand-teal';
                    const groupHoverBgClass = role === 'builder' ? 'group-hover:bg-brand-gold' : 'group-hover:bg-brand-teal';

                    div.className = `bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-soft border border-transparent ${hoverClass} transition-all group`;
                    div.innerHTML = `
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-12 h-12 bg-brand-concrete dark:bg-gray-700 rounded-full flex items-center justify-center font-bold text-xl group-hover:text-white transition-colors ${iconTextClass} ${groupHoverBgClass}">${t.name.charAt(0)}</div>
                            <div><h4 class="font-bold text-brand-charcoal dark:text-white">${t.name}</h4><p class="text-xs text-gray-500 font-bold uppercase tracking-wider">${t.loc}</p></div>
                        </div>
                        <p class="text-gray-500 dark:text-gray-300 italic leading-relaxed">"${t.quote}"</p>
                    `;
                    tGrid.appendChild(div);
                });
            }
            
            // Render FAQs
            const fContainer = document.getElementById('faq-container');
            if(fContainer) {
                fContainer.innerHTML = '';
                const currentFaqs = faqData[role];
                currentFaqs.forEach(item => {
                    const div = document.createElement('div');
                    div.className = "bg-white dark:bg-gray-800 rounded-2xl border border-brand-border dark:border-gray-700 overflow-hidden shadow-sm";
                    div.innerHTML = `
                        <button class="w-full px-6 py-5 text-left flex justify-between items-center font-bold text-brand-charcoal dark:text-white" onclick="toggleFaq(this)">
                            ${item.q} <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400 transition-transform duration-300"></i>
                        </button>
                        <div class="faq-answer px-6 bg-gray-50 dark:bg-gray-900"><p class="py-4 text-sm text-gray-600 dark:text-gray-400">${item.a}</p></div>
                    `;
                    fContainer.appendChild(div);
                });
            }
            
            // Logo Color Update
            const activeHex = colorMap[role];
            ['nav-logo-path-1', 'nav-logo-path-2', 'footer-logo-path-1', 'footer-logo-path-2'].forEach(id => {
                const el = document.getElementById(id);
                if(el) { el.setAttribute('fill', activeHex); el.setAttribute('stroke', activeHex); }
            });

            lucide.createIcons();
        }

        // --- Demo & Dashboard Logic (Restored from v1.4) ---
        function selectStyle(s) {
            appState.style = s;
            document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('ring-2', 'ring-brand-teal'));
            event.currentTarget.classList.add('ring-2', 'ring-brand-teal');
            setTimeout(() => nextStep('2'), 300);
        }

        function nextStep(id) {
            document.querySelectorAll('.step-content').forEach(d => d.classList.add('hidden'));
            document.getElementById(`step-${id}`).classList.remove('hidden');
        }

        function updateRange(type, val) {
            if(type === 'bed') { appState.bedrooms = val; document.getElementById('bed-val').innerText = val; }
            if(type === 'budget') { appState.budget = val; document.getElementById('budget-val').innerText = `$${val}k`; }
            updateDashPreview();
        }
        
        function setPersona(p) {
            appState.persona = p;
            document.querySelectorAll('.persona-btn').forEach(b => {
                if(b.innerText.includes(p)) b.classList.add('bg-brand-teal', 'text-white');
                else b.classList.remove('bg-brand-teal', 'text-white');
            });
        }

        function toggleAmenity(btn, name) {
            if(appState.amenities.includes(name)) {
                appState.amenities = appState.amenities.filter(a => a !== name);
                btn.classList.remove('ring-1', 'ring-brand-teal', 'bg-brand-teal/5');
            } else {
                if(appState.amenities.length < 3) {
                    appState.amenities.push(name);
                    btn.classList.add('ring-1', 'ring-brand-teal', 'bg-brand-teal/5');
                }
            }
            updateDashPreview();
        }

        function updateDashPreview() {
            // Safe check for elements, as they exist in overlay
            const sEl = document.getElementById('dash-card-style');
            if(sEl) sEl.innerText = appState.style || 'Pending';
            const bEl = document.getElementById('dash-card-budget');
            if(bEl) bEl.innerText = `$${appState.budget}k`;
            const cEl = document.getElementById('dash-card-config');
            if(cEl) cEl.innerText = `${appState.bedrooms}bd`;
            const aEl = document.getElementById('dash-card-amenities');
            if(aEl) aEl.innerText = appState.amenities.join(', ') || 'None';
        }

        function verifyUser(e) {
            e.currentTarget.innerHTML = 'Verifying...';
            setTimeout(() => { nextStep('4'); notifyBuilder(); }, 1000);
        }

        function notifyBuilder() {
            const overlay = document.getElementById('user-card-overlay');
            if(overlay) overlay.classList.remove('translate-y-full');
            const stats = document.querySelector('.counter'); 
            // Trigger confetti
            confetti({ particleCount: 50, spread: 60, origin: { x: 0.7, y: 0.8 }, colors: ['#00C2B2', '#FBBF24'] });
        }

        function unlockLead() {
            if(appState.credits < 50) return;
            appState.credits -= 50;
            const credStat = document.getElementById('stat-credits');
            if(credStat) credStat.innerText = appState.credits;
            
            const btn = document.getElementById('btn-unlock');
            btn.innerHTML = `<i data-lucide="check" class="w-4 h-4"></i> LEAD UNLOCKED`;
            btn.classList.remove('bg-brand-gold', 'text-brand-charcoal');
            btn.classList.add('bg-green-500', 'text-white');
            setTimeout(() => {
               document.getElementById('user-card-overlay').innerHTML = `<div class="text-center py-8"><h3 class="text-white font-bold text-2xl">Pitch Sent!</h3></div>`;
               setTimeout(() => {
                   document.getElementById('user-card-overlay').classList.add('translate-y-full');
               }, 2000);
            }, 1000);
        }

        function addFeedItem() {
            const container = document.getElementById('dashboard-list-view');
            if (!container) return;
            const item = document.createElement('div');
            item.className = "flex items-center justify-between p-3 bg-gray-800 rounded-xl border border-gray-700 animate-pulse";
            item.innerHTML = `<div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs font-mono text-gray-400">#${Math.floor(Math.random()*9000)+1000}</div><div><div class="text-xs font-bold text-white">Active Search</div><div class="text-[10px] text-gray-500">Just Now</div></div></div><div class="text-xs font-mono font-bold text-brand-gold">$${Math.floor(Math.random()*400)+400}k</div>`;
            container.prepend(item);
            if(container.children.length > 8) container.lastElementChild.remove();
        }

        function toggleDashboardView(v) {
            const list = document.getElementById('dashboard-list-view');
            const map = document.getElementById('dashboard-map-view');
            const intel = document.getElementById('dashboard-intel-view');
            const listBtn = document.getElementById('view-list-btn');
            const mapBtn = document.getElementById('view-map-btn');
            const intelBtn = document.getElementById('view-intel-btn');

            if(list) list.classList.add('hidden'); 
            if(map) map.classList.add('hidden'); 
            if(intel) intel.classList.add('hidden');
            
            [listBtn, mapBtn, intelBtn].forEach(b => { 
                if(b) {
                    b.classList.remove('bg-brand-gold', 'text-brand-charcoal'); 
                    b.classList.add('text-gray-400'); 
                }
            });

            if(v === 'map') { 
                map.classList.remove('hidden'); mapBtn.classList.add('bg-brand-gold', 'text-brand-charcoal'); drawMap(); 
            } else if (v === 'intel') {
                intel.classList.remove('hidden'); intelBtn.classList.add('bg-brand-gold', 'text-brand-charcoal'); initChart();
            } else { 
                list.classList.remove('hidden'); listBtn.classList.add('bg-brand-gold', 'text-brand-charcoal'); 
            }
        }

        function drawMap() {
            const c = document.getElementById('demandMap');
            if(!c) return;
            const ctx = c.getContext('2d');
            c.width = c.parentElement.offsetWidth;
            c.height = c.parentElement.offsetHeight;
            ctx.fillStyle = '#111827';
            ctx.fillRect(0,0,c.width,c.height);
            for(let i=0; i<30; i++) { 
                ctx.beginPath(); 
                ctx.arc(Math.random()*c.width, Math.random()*c.height, Math.random()*20+5, 0, Math.PI*2); 
                ctx.fillStyle = 'rgba(251, 191, 36, 0.15)'; 
                ctx.fill(); 
            }
        }

        function initChart() {
            if(intelChartInstance) return;
            const c = document.getElementById('intelChart');
            if(!c) return;
            const ctx = c.getContext('2d');
            intelChartInstance = new Chart(ctx, {
                type: 'line',
                data: { labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'], datasets: [{ label: 'Avg Buyer Budget', data: [420, 435, 430, 450, 465, 485], borderColor: '#FBBF24', tension: 0.4, borderWidth: 2, pointRadius: 0 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { ticks: { color: '#6b7280' }, grid: { display: false } } } }
            });
        }
        
        function toggleFaq(btn) {
            const ans = btn.nextElementSibling;
            // Lucide replaces <i> with <svg>, so we try to find the svg first, fallback to i if not yet replaced
            const icon = btn.querySelector('svg') || btn.querySelector('i');
            if (!icon) return; // Safety check
            
            if(ans.classList.contains('open')) { 
                ans.classList.remove('open'); 
                icon.style.transform = 'rotate(0deg)'; 
            } else { 
                ans.classList.add('open'); 
                icon.style.transform = 'rotate(180deg)'; 
            }
        }

        // --- Floating Hero UI Logic ---
        const notifications = [
            { text: "New Match: $450k Budget", icon: "check" },
            { text: "Builder Bid: $15k Incentive", icon: "tag" },
            { text: "Pre-Approval Verified", icon: "shield" }
        ];
        
        function spawnNotification() {
            const container = document.getElementById('hero-floating-notifications');
            if(!container) return;
            const notif = notifications[Math.floor(Math.random() * notifications.length)];
            const el = document.createElement('div');
            el.className = "floating-bubble bg-white/90 dark:bg-gray-900/90 backdrop-blur px-4 py-2 rounded-xl shadow-lg border border-white/20 text-xs font-bold flex items-center gap-2 text-brand-charcoal dark:text-white";
            el.innerHTML = `<i data-lucide="${notif.icon}" class="w-3 h-3 text-brand-teal"></i> ${notif.text}`;
            container.appendChild(el);
            lucide.createIcons();
            
            // Remove after 4s
            setTimeout(() => { el.remove(); }, 4000);
        }
        
        // --- Form Validation ---
        function validateEmail(input) {
            const icon = document.getElementById('email-check');
            if(input.value.includes('@') && input.value.includes('.')) {
                icon.classList.remove('opacity-0');
            } else {
                icon.classList.add('opacity-0');
            }
        }

        // --- Init ---
        function openWaitlistModal(role) { 
            const target = role || currentAudience;
            updateModalContext(target);
            document.getElementById('waitlist-modal').classList.remove('hidden'); 
        }
        
        function updateModalContext(role) {
            const conf = modalConfig[role];
            document.getElementById('waitlist-title').innerText = conf.title;
            document.getElementById('waitlist-desc').innerText = conf.desc;
            const btn = document.getElementById('waitlist-submit-btn');
            btn.innerText = conf.btnText;
            btn.className = `w-full py-3 font-bold rounded-xl hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 ${conf.color} ${conf.hover}`;
            if(role === 'builder') { btn.classList.remove('text-white'); btn.classList.add('text-brand-charcoal'); }
            else { btn.classList.add('text-white'); btn.classList.remove('text-brand-charcoal'); }
            
            const badge = document.getElementById('waitlist-badge-bg');
            badge.classList.remove('bg-brand-teal', 'bg-brand-gold');
            badge.classList.add(role === 'builder' ? 'bg-brand-gold' : 'bg-brand-teal');
            
            document.getElementById('waitlist-trust-text').innerText = conf.trust;
            
            // Handle radio buttons logic visually only
            const buyerInput = document.getElementById('role-buyer-input');
            const builderInput = document.getElementById('role-builder-input');
            if(role === 'buyer') buyerInput.checked = true;
            else builderInput.checked = true;
        }

        function closeWaitlistModal() { document.getElementById('waitlist-modal').classList.add('hidden'); }

        document.addEventListener('DOMContentLoaded', () => { 
            lucide.createIcons(); 
            setAudience('buyer'); 
            setInterval(addFeedItem, 3000); 
            setInterval(spawnNotification, 2500); 
            addFeedItem(); // Initial call
        });

    </script>
</body>
</html>
